// IW9 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

setupcommoncallbacks()
{
    level.onnormaldeath = ::oncommonnormaldeath;
    level.onsuicidedeath = ::oncommonsuicidedeath;
    level.onteamchangedeath = ::oncommonteamchangedeath;
    addspecialistdialog();

    if ( isusingmatchrulesdata() )
    {
        level._id_6B6AB19619B97010 = ::_id_6B6AB19619B97010;
        [[ level._id_6B6AB19619B97010 ]]();
    }

    _id_9081E2D33D0B53F9();
    _id_E9AD38AF5A6BEDCD();
    _id_8D478840C4E44366();
    _id_8C9FF0DF46C52845();
    _id_36532A1506F2C161();
    _id_030DD74B21BFFFE6();
    _id_52343D5C1B190CF0();
    level.spawnprotectionexception = undefined;
    scripts\mp\utility\join_team_aggregator::registeronplayerjointeamcallback( ::onplayerjointeamcommon );
    scripts\mp\utility\game::registerdogtagsenableddvar( scripts\mp\utility\game::getgametype(), 0 );
    level._effect["cranked_explode"] = loadfx( "vfx/iw9/dmz/bombsite/vfx_dmz_bombsite_expl.vfx" );
}

_id_6B6AB19619B97010()
{
    setdynamicdvar( "dvar_8D99F31DD75FCF9C", getmatchrulesdata( "commonOption", "aiSpawnOnDeath" ) );
    setdynamicdvar( "dvar_148266EA4825C4B0", getmatchrulesdata( "commonOption", "aiSpawnOnDeath" ) );
    setdynamicdvar( "dvar_BA25FABADE697401", getmatchrulesdata( "commonOption", "buyMode" ) );
    setdynamicdvar( "dvar_4E33F79A5437AA5C", getmatchrulesdata( "commonOption", "classForceLoadouts" ) );
    setdynamicdvar( "dvar_838C297E26529E6B", getmatchrulesdata( "commonOption", "gunGameWeapons" ) );
    setdynamicdvar( "dvar_A88F1329561BC6E1", getmatchrulesdata( "commonOption", "carePackageDropTime" ) );
    setdynamicdvar( "dvar_127490A7577F169F", getmatchrulesdata( "commonOption", "tier1ModeEnabled" ) );
}

_id_3149B2E03CE13DD9()
{
    level.usepingsystem = getdvarint( "dvar_58F6DDD5E5892406", 1 );

    if ( istrue( level.usepingsystem ) )
        scripts\mp\calloutmarkerping_mp::calloutmarkerping_init();

    level _id_451A1A9BD9613164::_id_8ECE37593311858A( _id_07C40FA80892A721::initarmor );
    level scripts\mp\utility\spawn_event_aggregator::registeronplayerspawncallback( _id_07C40FA80892A721::givestartingarmor );
    level scripts\mp\utility\lui_game_event_aggregator::registeronluieventcallback( _id_07C40FA80892A721::_id_13CAA305C839A278 );
}

updatecommongametypedvars()
{
    level.dogtagsenabled = scripts\mp\utility\dvars::dvarintvalue( "dogtags", 0, 0, 1 );

    if ( level.dogtagsenabled )
        _id_1CEA1B70A5AAD392::init();
}

oncommonnormaldeath( victim, attacker, lifeid, meansofdeath, objweapon, iskillstreakweapon )
{
    score = 0;

    if ( isbot( self ) && isdefined( self.isbotmedicrole ) )
        self.isbotmedicrole = undefined;

    if ( istrue( level.flashpointactive ) && isdefined( attacker ) && isdefined( attacker.team ) )
        scripts\mp\flashpoint::flashpoint_processnewevent( attacker, victim, gettime(), "kill_by_" + attacker.team );

    if ( isdefined( attacker._id_ACB55A437C3145C0 ) && isdefined( attacker._id_ACB55A437C3145C0.objweapon ) && attacker._id_ACB55A437C3145C0.objweapon.basename == "iw9_racecar_mp" )
        return 1;

    _id_E67514BA22EEC9CB = scripts\mp\utility\game::islaststandenabled() && istrue( victim.playergoingintols );

    if ( !_id_E67514BA22EEC9CB && attacker.team != self.team )
    {
        _id_605B9986CE6166A1 = level.scoremod["death"] * -1;

        if ( _id_605B9986CE6166A1 != 0 )
        {
            if ( level.teambased )
                level scripts\mp\gamescore::giveteamscoreforobjective( victim.pers["team"], _id_605B9986CE6166A1, 0 );
            else
                attacker scripts\mp\gamescore::giveplayerscore( "stat_EF9582D72160F199", _id_605B9986CE6166A1 );
        }

        score = level.scoremod["kill"];

        if ( istrue( iskillstreakweapon ) )
            score = score + level.scoremod["kskill"];

        if ( meansofdeath == "MOD_HEAD_SHOT" )
            score = score + level.scoremod["headshot"];

        if ( level.dogtagsenabled && scripts\mp\flags::gameflag( "prematch_done" ) )
            level thread _id_1CEA1B70A5AAD392::spawndogtags( victim, attacker, "new_tag_spawned", meansofdeath );
    }

    if ( scripts\mp\utility\game::_id_F698BFD3EFA33302() || scripts\mp\utility\game::_id_E9F3A160BBEFE208( attacker ) || scripts\mp\utility\game::_id_E9F3A160BBEFE208( victim ) )
    {
        if ( scripts\mp\utility\game::matchmakinggame() && isdefined( attacker.cranked ) )
        {
            if ( !_id_E67514BA22EEC9CB && score != 0 )
            {
                score = score + 1;
                attacker thread scripts\mp\rank::scoreeventpopup( _func_2EF675C13CA1C4AF( "stat_2C8BCBB02EC7FF9B", score ) );
            }
        }

        attacker scripts\mp\cranked::oncranked( victim, attacker, lifeid );
    }

    if ( score != 0 )
    {
        if ( level.teambased )
            level scripts\mp\gamescore::giveteamscoreforobjective( attacker.pers["team"], score, 0 );
        else
            attacker scripts\mp\gamescore::giveplayerscore( "stat_EF9582D72160F199", score, victim );
    }

    _id_F4143542F608E034 = 1;

    if ( isdefined( level._id_5DF506226294AA65 ) )
        level thread [[ level._id_5DF506226294AA65 ]]( victim, attacker );

    if ( istrue( level._id_36304CC9071BF738 ) )
    {
        dropstruct = _id_7E52B56769FA7774::_id_7B9F3966A7A42003();
        victim _id_7E52B56769FA7774::dropbrhealthpack( dropstruct );
    }

    if ( scripts\cp_mp\utility\game_utility::_id_0B2C4B42F9236924() )
        victim _id_7BAC8EE72285298E();
}

oncommonsuicidedeath( victim )
{
    if ( scripts\mp\utility\game::_id_F698BFD3EFA33302() || scripts\mp\utility\game::_id_E9F3A160BBEFE208( victim ) )
        victim scripts\mp\cranked::cleanupcrankedplayertimer();

    if ( isdefined( level.scoremod ) )
    {
        _id_605B9986CE6166A1 = level.scoremod["death"] * -1;

        if ( _id_605B9986CE6166A1 != 0 )
        {
            if ( level.teambased )
                level scripts\mp\gamescore::giveteamscoreforobjective( victim.pers["team"], _id_605B9986CE6166A1, 0 );
        }
    }

    if ( isdefined( level.modeonsuicidedeath ) )
        [[ level.modeonsuicidedeath ]]( victim );
}

oncommonteamchangedeath( victim )
{
    if ( scripts\mp\utility\game::_id_F698BFD3EFA33302() || scripts\mp\utility\game::_id_E9F3A160BBEFE208( victim ) )
        victim scripts\mp\cranked::cleanupcrankedplayertimer();

    if ( isdefined( level.modeonteamchangedeath ) )
        [[ level.modeonteamchangedeath ]]( victim );
}

dogtagcommonallyonusecb( player )
{

}

dogtagcommonenemyonusecb( player )
{

}

onspawnplayercommon( _id_9156B53BCF7CE573 )
{
    if ( istrue( game["inLiveLobby"] ) )
    {
        _id_949548949727D77E = istrue( level.allowprematchdamage ) && istrue( level.spawnprotectiontimer );
        thread managespawnprotection( _id_949548949727D77E );
    }
    else if ( istrue( level.spawnprotectiontimer ) )
    {
        if ( isdefined( level.spawnprotectionexception ) )
        {
            if ( [[ level.spawnprotectionexception ]]() )
                thread managespawnprotection( 1 );
        }
        else
            thread managespawnprotection( 1 );
    }

    if ( scripts\mp\utility\game::isteamreviveenabled() )
        thread scripts\mp\teamrevive::updaterevivetriggerspawnposition();

    if ( istrue( level.disablesupersprint ) )
        self allowsupersprint( 0 );

    if ( istrue( level.disablemount ) )
    {
        self allowmountside( 0 );
        self allowmounttop( 0 );
    }

    if ( isdefined( level.modeonspawnplayer ) )
        [[ level.modeonspawnplayer ]]( _id_9156B53BCF7CE573 );
    else
        thread updatematchstatushintonspawncommon();

    if ( scripts\mp\utility\game::getgametypenumlives() != 0 )
        updatealiveomnvars();

    if ( istrue( game["practiceRound"] ) )
    {
        if ( istrue( level.snowballfight ) )
            thread snowballfighthint();
        else
            self sethudtutorialmessage( "MP_INGAME_ONLY/PRACTICE_ROUND", 1 );
    }
    else if ( !isagent( self ) )
        self clearhudtutorialmessage();

    if ( _id_486382FA025EB9D1() )
        thread _id_4CE29F970B570F97();
}

nvghintnotify( _id_E9DEF77708D779B7 )
{
    self endon( "disconnect" );
    self notify( "nvg_spawn_tutorial" );
    self endon( "nvg_spawn_tutorial" );
    _id_63366D9D88CE51F8 = 1;

    if ( !isdefined( _id_E9DEF77708D779B7 ) )
        _id_E9DEF77708D779B7 = 0;

    for (;;)
    {
        if ( _id_63366D9D88CE51F8 )
            self waittill( "giveLoadout" );
        else
            self waittill( "spawned" );

        if ( _id_E9DEF77708D779B7 < 2 )
        {
            if ( self usinggamepad() )
                msg = "hint_use_nvg";
            else
                msg = "hint_use_nvg_kb";

            if ( scripts\mp\flags::gameflag( "infil_will_run" ) && !scripts\mp\flags::gameflag( "prematch_done" ) )
            {
                level waittill( "prematch_done" );
                wait 5;
                scripts\mp\utility\lower_message::setlowermessageomnvar( msg );
                wait 5;
                scripts\mp\utility\lower_message::setlowermessageomnvar( "clear_lower_msg" );
            }
            else
            {
                if ( !_id_E9DEF77708D779B7 )
                    wait 5;

                scripts\mp\utility\lower_message::setlowermessageomnvar( msg );
                wait 5;
                scripts\mp\utility\lower_message::setlowermessageomnvar( "clear_lower_msg" );
            }

            _id_E9DEF77708D779B7++;
            continue;
        }

        break;
    }
}

onplayerkilledcommon( einflictor, attacker, idamage, smeansofdeath, objweapon, vdir, shitloc, psoffsettime, deathanimduration, _id_61B5D0250B328F00, iskillstreakweapon )
{
    if ( scripts\mp\utility\game::getgametypenumlives() != 0 )
        updatealiveomnvars();

    if ( scripts\mp\utility\game::islaststandenabled() && istrue( self.inlaststand ) && !scripts\cp_mp\utility\game_utility::_id_0BEFF479639E6508() )
        oncommonnormaldeath( self, attacker, _id_61B5D0250B328F00, smeansofdeath, objweapon, iskillstreakweapon );

    if ( isdefined( level.onplayerkilled ) )
        [[ level.onplayerkilled ]]( einflictor, attacker, idamage, smeansofdeath, objweapon, vdir, shitloc, psoffsettime, deathanimduration, _id_61B5D0250B328F00 );

    if ( isdefined( level._id_9ABCA503637351B3 ) )
        [[ level._id_9ABCA503637351B3 ]]( einflictor, attacker, idamage, smeansofdeath, objweapon, vdir, shitloc, psoffsettime, deathanimduration, _id_61B5D0250B328F00 );

    if ( _id_2009718B681222C2() )
    {
        if ( isbot( self ) )
            self.classcallback = "gamemode";
    }
}

onplayerconnectcommon()
{
    for (;;)
    {
        level waittill( "connected", player );

        if ( isdefined( level.onplayerconnect ) )
            level thread [[ level.onplayerconnect ]]( player );

        if ( istrue( level._id_36304CC9071BF738 ) )
            player._id_D2DBB2FA012E6D9C = [];

        if ( scripts\cp_mp\utility\game_utility::_id_9CDAADFDDEDA4D7A() )
            player thread _id_9BAEAFA29FCF15F9();

        if ( scripts\cp_mp\utility\game_utility::isnightmap() )
            player thread nvghintnotify();

        if ( _id_2009718B681222C2() )
        {
            level.denyclasschoice = 1;
            player scripts\mp\class::_id_A16868D4DCD81A4B();
            player.pers["gamemodeLoadout"] = game["forceRandomLoadout"][game["forceRandomLoadoutIndex"]];
        }

        if ( istrue( level.usepingsystem ) )
            player scripts\cp_mp\calloutmarkerping::calloutmarkerping_initplayer();

        if ( isdefined( player ) && scripts\common\utility::_id_A10967D736DC56E5() )
            level thread _id_70C67FA95F4222C1( player );
    }
}

_id_70C67FA95F4222C1( player )
{
    player endon( "disconnect" );

    if ( !isdefined( level.difficultytype ) )
        level _id_48814951E916AF89::_id_C8393014DD7F8AB6();

    player.gameskill = _id_53DA3333B83B3527::get_gameskill();
    player _id_53DA3333B83B3527::set_difficulty_from_locked_settings();
    player.owner = undefined;
    scripts\engine\utility::flag_wait( "level_stealth_initialized" );

    while ( !isdefined( player.team ) )
        waitframe();

    player scripts\stealth\player::main();
}

onplayerdisconnectcommon( player )
{
    if ( scripts\mp\utility\game::getgametypenumlives() != 0 )
        player updatealiveomnvars();

    if ( isdefined( level.onplayerdisconnect ) )
        player thread [[ level.onplayerdisconnect ]]( player );
}

onplayerjointeamcommon( player )
{
    if ( isdefined( level.onplayerjointeam ) )
        [[ level.onplayerjointeam ]]( self );

    if ( istrue( level.dogtagsenabled ) )
        _id_1CEA1B70A5AAD392::onplayerjoinedteam( player );

    if ( scripts\cp_mp\utility\game_utility::isnightmap() )
        player thread nvghintnotify( 1 );
}

managespawnprotection( _id_AC20F98EA430A859 )
{
    level endon( "game_ended" );
    self endon( "disconnect" );
    self endon( "remove_spawn_protection" );
    thread applyspawnprotection();

    if ( !istrue( level.allowprematchdamage ) )
        scripts\mp\flags::gameflagwait( "prematch_done" );

    if ( _id_AC20F98EA430A859 )
        wait( level.spawnprotectiontimer );

    thread removespawnprotection();
}

applyspawnprotection()
{
    level endon( "game_ended" );
    self endon( "death_or_disconnect" );
    self endon( "remove_spawn_protection" );
    self waittill( "spawned_player" );
    self.spawnprotection = 1;
    scripts\mp\lightarmor::setlightarmorvalue( self, 1000, undefined, 0 );
}

removespawnprotection()
{
    self endon( "disconnect" );

    if ( isdefined( self ) )
        self.spawnprotection = 0;

    scripts\mp\lightarmor::lightarmor_unset( self );
    self notify( "remove_spawn_protection" );
}

updatealiveomnvars()
{
    if ( isdefined( level.updatealiveomnvars ) )
        self [[ level.updatealiveomnvars ]]();
    else
    {
        if ( scripts\cp_mp\utility\game_utility::_id_0BEFF479639E6508() )
        {
            _id_856DC7D9133C0369 = 0;

            foreach ( _id_F90358454413407F in level.teamnamelist )
                _id_856DC7D9133C0369 = _id_856DC7D9133C0369 + scripts\mp\utility\teams::getteamdata( _id_F90358454413407F, "aliveCount" );

            setomnvar( "ui_allies_alive", 0 );
            setomnvar( "ui_axis_alive", _id_856DC7D9133C0369 );
            return;
        }

        setomnvar( "ui_allies_alive", scripts\mp\utility\teams::getteamdata( "allies", "aliveCount" ) );
        setomnvar( "ui_axis_alive", scripts\mp\utility\teams::getteamdata( "axis", "aliveCount" ) );
    }
}

updatematchstatushintonspawncommon()
{
    level endon( "game_ended" );
    scripts\mp\hud_message::_id_F004EF4606B9EFDC( "kill" );
}

ffmessageonspawn()
{
    wait 1;

    if ( isdefined( self ) )
        scripts\mp\hud_message::showerrormessage( "MP/FRIENDLY_FIRE_WILL_NOT" );
}

addspecialistdialog()
{
    game["dialog"]["specialty_warhead"] = "perk_amped";
    game["dialog"]["specialty_tac_resist"] = "perk_amped";
    game["dialog"]["specialty_covert_ops"] = "perk_coldblooded";
    game["dialog"]["specialty_hustle"] = "perk_doubletime";
    game["dialog"]["specialty_eod"] = "perk_eod";
    game["dialog"]["specialty_guerrilla"] = "perk_ghost";
    game["dialog"]["specialty_surveillance"] = "perk_highalert";
    game["dialog"]["specialty_heavy_metal"] = "perk_killchain";
    game["dialog"]["specialty_munitions_2"] = "perk_overkill";
    game["dialog"]["specialty_strategist"] = "perk_pointman";
    game["dialog"]["specialty_quick_fix"] = "perk_quickfix";
    game["dialog"]["specialty_restock"] = "perk_restock";
    game["dialog"]["specialty_scavenger_plus"] = "perk_scavenger";
    game["dialog"]["specialty_extra_shrapnel"] = "perk_shrapnel";
    game["dialog"]["specialty_specialist_bonus"] = "perk_specialistbonus";
    game["dialog"]["specialty_tactical_recon"] = "perk_spotter";
    game["dialog"]["specialty_huntmaster"] = "perk_tracker";
    game["dialog"]["specialty_tune_up"] = "perk_tuneup";
}

_id_E9AD38AF5A6BEDCD()
{
    if ( getdvarint( "dvar_BA25FABADE697401", 0 ) == 1 )
        _id_88B47710BECE931F();
}

_id_88B47710BECE931F()
{
    _id_FDC32B02A967AA99();
    setomnvar( "ui_buy_mode", 1 );
    level._id_9CDAADFDDEDA4D7A = 1;
    level._id_8EC1A1CA587A6487 = ::_id_8EC1A1CA587A6487;
    level._id_C59C301EAABC2E32 = 1;
    level.br_plunder_enabled = 1;
    level._id_1E17E3480B1D264D = 1;
    level.armoronweaponswitchlongpress = 1;
    setdvar( "dvar_ED6E4FFA933AF621", 1 );
    setdvar( "dvar_8A1945C94D5092C2", 1 );
    setdvar( "dvar_E38E16D9FBF3FC43", "mp/loot/br/default/loot_item_defs.csv" );
    setdvar( "dvar_ADD02E4FFF48882F", " mp/loot/core/risk/loot_table_zones.csv" );
    setdvar( "dvar_CE882CA282C2F85E", 1 );
    setdvar( "dvar_6D36F3E8FBC43781", "2,5" );
    _id_4384ABBF498DF6A7::_id_B38F5FFE645943C3( "core" );

    if ( level._id_1E17E3480B1D264D )
        level._id_9C1E3C18B99409E9 = scripts\mp\utility\points::_id_9C1E3C18B99409E9;

    level thread _id_D05C9BF671A28D2D();
    level thread _id_88822B4598FF1773();
}

_id_D05C9BF671A28D2D()
{
    waitframe();
    level scripts\common\ui::lui_registercallback( "buy_menu_open", _id_4384ABBF498DF6A7::armorykioskused );
    level scripts\common\ui::lui_registercallback( "buy_menu_close", ::_id_CD2DB96CA42742E6 );
    _id_4384ABBF498DF6A7::init();
    level._id_8E9DABA162280A8E = 1;
    level._id_6BEFF7B631AB7E18 = ::_id_6BEFF7B631AB7E18;
}

_id_CD2DB96CA42742E6( value )
{
    self notify( "buy_menu_close" );
}

_id_FDC32B02A967AA99()
{
    _id_4D43EB408252DAA0 = [];
    _id_4D43EB408252DAA0[_id_4D43EB408252DAA0.size] = getent( "cyber_empzone_axis", "targetname" );
    _id_4D43EB408252DAA0[_id_4D43EB408252DAA0.size] = getent( "cyber_empzone_allies", "targetname" );
    _id_58553518A66CEBE9 = getentarray( "cyber_emp_pickup_trig", "targetname" );

    foreach ( trig in _id_58553518A66CEBE9 )
        _id_4D43EB408252DAA0[_id_4D43EB408252DAA0.size] = trig;

    if ( _id_4D43EB408252DAA0.size == 0 )
    {
        primaryflags = getentarray( "flag_primary", "targetname" );

        foreach ( flag in primaryflags )
        {
            _id_4D43EB408252DAA0[_id_4D43EB408252DAA0.size] = flag;
            break;
        }
    }

    _id_C9050C643D9FCEAC = [];

    foreach ( temp in _id_4D43EB408252DAA0 )
    {
        _id_EAF4A038607A8C2F = spawnstruct();
        _id_EAF4A038607A8C2F.origin = temp.origin;
        _id_EAF4A038607A8C2F.angles = temp.angles;
        _id_C9050C643D9FCEAC[_id_C9050C643D9FCEAC.size] = _id_EAF4A038607A8C2F;
    }

    level thread _id_BDC6D23A3189EC1F( _id_C9050C643D9FCEAC );
}

_id_BDC6D23A3189EC1F( _id_BAAF67A759D54315 )
{
    waitframe();
    level._id_5B25E7620E424CB2 = [];
    _id_EADBD277474BB8BD = scripts\engine\utility::getstructarray( "buystation_loc", "targetname" );

    foreach ( loc in _id_EADBD277474BB8BD )
        _id_EADBD277474BB8BD[_id_EADBD277474BB8BD.size] = _id_EADBD277474BB8BD;

    if ( _id_EADBD277474BB8BD.size > 0 )
        _id_BAAF67A759D54315 = _id_EADBD277474BB8BD;

    _id_FBCABD62B8F66EB8 = scripts\engine\trace::create_default_contents( 1 );

    foreach ( loc in _id_BAAF67A759D54315 )
    {
        if ( _id_EADBD277474BB8BD.size == 0 )
        {
            groundorigin = scripts\engine\utility::drop_to_ground( loc.origin + anglestoforward( loc.angles ) * 50, 50, -200, undefined, _id_FBCABD62B8F66EB8 );
            spawnangles = loc.angles;
        }
        else
        {
            groundorigin = loc.origin;
            spawnangles = loc.angles;
        }

        _id_2FA65F34EB9042F5 = spawnscriptable( "br_plunder_box", groundorigin, spawnangles );
        _id_2FA65F34EB9042F5 setscriptablepartstate( "br_plunder_box", "visible" );
        _id_2FA65F34EB9042F5._id_5CFA621EBF61D8AA = 0;
        level._id_5B25E7620E424CB2[level._id_5B25E7620E424CB2.size] = _id_2FA65F34EB9042F5;
    }
}

_id_88822B4598FF1773()
{
    level._id_068A1353068460D1 = scripts\mp\cranked::_id_068A1353068460D1;
    waitframe();

    if ( level.crankedbombtimer == 0 )
        level.crankedbombtimer = 30;
}

_id_D19636A80151B35D( squadindex )
{
    player = self;
    player.br_squadindex = squadindex;
    _id_573AA6BE0B25ACD9 = player.game_extrainfo & 65528;
    _id_573AA6BE0B25ACD9 = _id_573AA6BE0B25ACD9 | squadindex;
    player.game_extrainfo = _id_573AA6BE0B25ACD9;
    player setclientomnvar( "ui_client_squad_index", 1 );
}

_id_6BEFF7B631AB7E18( instance, player )
{
    if ( isint( instance ) )
    {
        instance = player;
        instance._id_5CFA621EBF61D8AA = 0;
        instance.objectivekey = "_a";
    }
    else
    {

    }

    if ( istrue( instance._id_5CFA621EBF61D8AA ) || istrue( level._id_8E9DABA162280A8E ) )
        player setclientomnvar( "ui_buystation_override", _id_600B944A95C3A7BF::_id_54B046AA3BA2678A( "core" ) );
}

_id_8EC1A1CA587A6487( _id_CB325DDB4A764623 )
{
    switch ( _id_CB325DDB4A764623 )
    {
        case "armor_plate":
        case "armor":
            self.pers["armor_buy_plates"]++;
            break;
        case "armor_plate_instant":
            if ( scripts\mp\utility\player::isreallyalive( self ) )
            {
                if ( isdefined( self.armorhealth ) && self.armorhealth < self._id_8790C077C95DB752 )
                    _id_07C40FA80892A721::_id_AC7803D45979135C( int( clamp( self.armorhealth + level._id_4B78859BACC88808, 0, self._id_8790C077C95DB752 ) ) );
            }
            else
            {
                self.pers["armor_buy_plates_instant"]++;
                thread _id_07C40FA80892A721::_id_4F88731347251184();
            }
        default:
            break;
    }
}

_id_9BAEAFA29FCF15F9()
{
    _id_03F1B6713CA4C9C7::_id_6DA8B65579348D0B();
    _id_D19636A80151B35D( 1 );

    if ( !isdefined( self.pers["armor_buy_plates"] ) )
    {
        self.pers["armor_buy_plates"] = 0;
        self.pers["armor_buy_plates_instant"] = 0;
    }
}

_id_8D478840C4E44366()
{
    level._id_726494DF62567093 = scripts\engine\utility::ter_op( getdvarint( "dvar_4E33F79A5437AA5C", 0 ) > 0, getdvarint( "dvar_4E33F79A5437AA5C", 0 ), undefined );

    if ( _id_2009718B681222C2() )
        level thread _id_5E789E0461BC3A69();
}

_id_2009718B681222C2()
{
    return isdefined( level._id_726494DF62567093 ) && level._id_726494DF62567093 > 0;
}

_id_5E789E0461BC3A69()
{
    level.bypassclasschoicefunc = scripts\mp\class::alwaysgamemodeclass;
    level.bots_gametype_handles_class_choice = 1;
    waitframe();
    thread _id_943A60C848E07E13();
    _id_09EF19AF8915EBB2();
}

_id_943A60C848E07E13()
{
    if ( !isdefined( game["roundsPlayed"] ) )
        game["roundsPlayed"] = 0;

    if ( game["roundsPlayed"] == 0 )
    {
        if ( istrue( game["practiceRound"] ) )
        {
            _id_0BE8C4476E2E599F();
            game["forceRandomLoadoutIndex"] = 0;
        }
        else if ( !isdefined( game["practiceRound"] ) || istrue( game["didSnowFight"] ) )
        {
            if ( istrue( game["didSnowFight"] ) )
                game["didSnowFight"] = undefined;

            _id_0BE8C4476E2E599F();
            game["forceRandomLoadoutIndex"] = 0;
        }
    }
    else
    {
        level.loadoutchangeround = level._id_726494DF62567093;

        if ( level.loadoutchangeround != 0 )
        {
            if ( game["roundsPlayed"] % level.loadoutchangeround == 0 )
                game["forceRandomLoadoutIndex"]++;

            if ( game["forceRandomLoadoutIndex"] == game["forceRandomLoadout"].size )
                game["forceRandomLoadoutIndex"] = 0;
        }
        else
            game["forceRandomLoadoutIndex"] = 0;
    }
}

_id_0BE8C4476E2E599F()
{
    game["forceRandomLoadout"] = [];
    loadouts = [];
    _id_D6F262BBEC7B0CAA = 0;
    table = "classtable:classtable_force_loadouts";

    for ( _id_A300FA75277719EE = scripts\mp\class::_id_DF2933F96D726D71( table ); _id_D6F262BBEC7B0CAA < _id_A300FA75277719EE; _id_D6F262BBEC7B0CAA++ )
        loadouts[loadouts.size] = _id_E2302479CA960E45( table, _id_D6F262BBEC7B0CAA );

    _id_B51C1B732564E22A = undefined;
    _id_E08CB9BBD6F3241D = undefined;
    _id_7EA3494E3DA2FBA5 = getdvar( "dvar_76BC70AAC09A0054", "" );
    _id_8831B759B9F84BE1 = getdvarfloat( "dvar_680F5C2690E8D15F", 0.0 );

    if ( _id_7EA3494E3DA2FBA5 != "" && _id_8831B759B9F84BE1 > 0.0 )
    {
        _id_F684B277677B66EB = strtok( _id_7EA3494E3DA2FBA5, "," );

        foreach ( _id_A6ED1602A5107749 in _id_F684B277677B66EB )
        {
            _id_094B8DA0083DAE53 = strtok( _id_A6ED1602A5107749, "|" );

            if ( _id_094B8DA0083DAE53.size == 2 )
            {
                rootweapon = _id_094B8DA0083DAE53[0];
                variantid = int( _id_094B8DA0083DAE53[1] );
                _id_3F57E7EDDC8A4779 = scripts\mp\utility\weapon::weaponisvalid( rootweapon, variantid );

                if ( _id_3F57E7EDDC8A4779 )
                {
                    if ( !isdefined( _id_B51C1B732564E22A ) )
                    {
                        _id_B51C1B732564E22A = [];
                        _id_E08CB9BBD6F3241D = _id_8831B759B9F84BE1;
                    }

                    struct = spawnstruct();
                    struct.rootweapon = rootweapon;
                    struct.variantid = variantid;
                    _id_B51C1B732564E22A[_id_B51C1B732564E22A.size] = struct;
                }
            }
        }
    }

    loadouts = _id_A8FC18DF76D1AA2F( loadouts, 99, _id_B51C1B732564E22A, _id_E08CB9BBD6F3241D );
    game["forceRandomLoadout"] = scripts\engine\utility::array_randomize( loadouts );
}

_id_E2302479CA960E45( table, _id_089688461C79EF11 )
{
    _id_E698DF1EC0933CE4 = [];
    _id_E698DF1EC0933CE4["loadoutArchetype"] = "archetype_assault";
    _id_E698DF1EC0933CE4["loadoutPrimaryAddBlueprintAttachments"] = scripts\mp\class::table_getaddblueprintattachments( table, _id_089688461C79EF11, 0 );
    _id_E698DF1EC0933CE4["loadoutPrimary"] = scripts\mp\class::table_getweapon( table, _id_089688461C79EF11, 0 );

    for ( _id_DF6D8E005B4B8020 = 0; _id_DF6D8E005B4B8020 < scripts\mp\class::getmaxprimaryattachments(); _id_DF6D8E005B4B8020++ )
    {
        _id_EFBDCD88107AF5F9 = scripts\mp\class::getattachmentloadoutstring( _id_DF6D8E005B4B8020, "primary" );
        _id_E698DF1EC0933CE4[_id_EFBDCD88107AF5F9] = scripts\mp\class::table_getweaponattachment( table, _id_089688461C79EF11, 0, _id_DF6D8E005B4B8020 );
    }

    _id_E698DF1EC0933CE4["loadoutPrimaryCamo"] = scripts\mp\class::table_getweaponcamo( table, _id_089688461C79EF11, 0 );
    _id_E698DF1EC0933CE4["loadoutPrimaryReticle"] = scripts\mp\class::table_getweaponreticle( table, _id_089688461C79EF11, 0 );
    _id_E698DF1EC0933CE4["loadoutPrimaryVariantID"] = 0;
    _id_E698DF1EC0933CE4["loadoutSecondaryAddBlueprintAttachments"] = scripts\mp\class::table_getaddblueprintattachments( table, _id_089688461C79EF11, 1 );
    _id_E698DF1EC0933CE4["loadoutSecondary"] = scripts\mp\class::table_getweapon( table, _id_089688461C79EF11, 1 );

    for ( _id_DF6D8E005B4B8020 = 0; _id_DF6D8E005B4B8020 < scripts\mp\class::getmaxsecondaryattachments(); _id_DF6D8E005B4B8020++ )
    {
        _id_EFBDCD88107AF5F9 = scripts\mp\class::getattachmentloadoutstring( _id_DF6D8E005B4B8020, "secondary" );
        _id_E698DF1EC0933CE4[_id_EFBDCD88107AF5F9] = scripts\mp\class::table_getweaponattachment( table, _id_089688461C79EF11, 1, _id_DF6D8E005B4B8020 );
    }

    if ( istrue( level.specialdayloadouts ) )
        _id_E698DF1EC0933CE4["loadoutSecondaryCamo"] = scripts\mp\class::table_getweaponcamo( table, _id_089688461C79EF11, 1 );
    else
        _id_E698DF1EC0933CE4["loadoutSecondaryCamo"] = scripts\mp\class::table_getweaponcamo( table, _id_089688461C79EF11, 1 );

    _id_E698DF1EC0933CE4["loadoutSecondaryReticle"] = scripts\mp\class::table_getweaponreticle( table, _id_089688461C79EF11, 1 );
    _id_E698DF1EC0933CE4["loadoutSecondaryVariantID"] = 0;
    _id_E698DF1EC0933CE4["loadoutEquipmentPrimary"] = scripts\mp\class::table_getequipmentprimary( table, _id_089688461C79EF11 );
    _id_E698DF1EC0933CE4["loadoutExtraEquipmentPrimary"] = scripts\mp\class::table_getextraequipmentprimary( table, _id_089688461C79EF11 );
    _id_E698DF1EC0933CE4["loadoutEquipmentSecondary"] = scripts\mp\class::table_getequipmentsecondary( table, _id_089688461C79EF11 );
    _id_E698DF1EC0933CE4["loadoutExtraEquipmentSecondary"] = scripts\mp\class::table_getextraequipmentsecondary( table, _id_089688461C79EF11 );
    _id_E698DF1EC0933CE4["loadoutPerks"] = [];

    for ( _id_AC0E594AC96AA3A8 = 0; _id_AC0E594AC96AA3A8 < 3; _id_AC0E594AC96AA3A8++ )
    {
        perk = scripts\mp\class::table_getperk( table, _id_089688461C79EF11, _id_AC0E594AC96AA3A8 );

        if ( perk != "specialty_null" )
            _id_E698DF1EC0933CE4["loadoutPerks"][_id_E698DF1EC0933CE4["loadoutPerks"].size] = perk;
    }

    _id_E698DF1EC0933CE4["loadoutGesture"] = "playerData";
    _id_E698DF1EC0933CE4["loadoutExecution"] = "playerData";
    _id_E698DF1EC0933CE4["loadoutFieldUpgrade1"] = "none";
    _id_E698DF1EC0933CE4["loadoutFieldUpgrade2"] = "none";
    return _id_E698DF1EC0933CE4;
}

_id_A8FC18DF76D1AA2F( loadouts, count, _id_B51C1B732564E22A, _id_E08CB9BBD6F3241D )
{
    _id_92F35FCFAE58B4EB = [];
    _id_B0BC46F3BA5DB389 = [];

    for ( num = 0; num < count && loadouts.size > 0; num++ )
    {
        loadout = loadouts[randomint( loadouts.size )];
        _id_ACFE7336F59B3D76 = loadout["loadoutPrimary"];

        if ( isdefined( _id_B51C1B732564E22A ) && isdefined( _id_E08CB9BBD6F3241D ) )
        {
            _id_53877F59F7445553 = _id_01AC1E1C43D4CEBC( _id_ACFE7336F59B3D76 );
            _id_208F46D708A99CC3 = _id_828B81C9F2465841( _id_B51C1B732564E22A, _id_53877F59F7445553 );

            if ( _id_208F46D708A99CC3.size > 0 )
            {
                if ( randomfloat( 1.0 ) < _id_E08CB9BBD6F3241D )
                {
                    _id_920D33641E200BDB = randomint( _id_208F46D708A99CC3.size );
                    _id_4FC88DFDBD8DDB28 = _id_208F46D708A99CC3[_id_920D33641E200BDB];
                    _id_B51C1B732564E22A = scripts\engine\utility::array_remove_index( _id_B51C1B732564E22A, _id_920D33641E200BDB );
                    loadout["loadoutPrimaryAddBlueprintAttachments"] = 1;
                    loadout["loadoutPrimary"] = _id_4FC88DFDBD8DDB28.rootweapon;
                    loadout["loadoutPrimaryVariantID"] = _id_4FC88DFDBD8DDB28.variantid;
                    loadout["loadoutPrimaryCamo"] = "none";
                    loadout["loadoutPrimaryReticle"] = "none";

                    for ( _id_DF6D8E005B4B8020 = 0; _id_DF6D8E005B4B8020 < scripts\mp\class::getmaxprimaryattachments(); _id_DF6D8E005B4B8020++ )
                    {
                        _id_EFBDCD88107AF5F9 = scripts\mp\class::getattachmentloadoutstring( _id_DF6D8E005B4B8020, "primary" );
                        loadout[_id_EFBDCD88107AF5F9] = "none";
                    }
                }
            }
        }

        _id_B0BC46F3BA5DB389[_id_B0BC46F3BA5DB389.size] = loadout;
        loadouts = _id_F76C0948F37C7855( loadouts, _id_ACFE7336F59B3D76 );
    }

    return _id_B0BC46F3BA5DB389;
}

_id_828B81C9F2465841( _id_855A91067674D651, _id_53877F59F7445553 )
{
    _id_7CB19F95DBC68942 = [];

    foreach ( struct in _id_855A91067674D651 )
    {
        if ( _id_01AC1E1C43D4CEBC( struct.rootweapon ) == _id_53877F59F7445553 )
            _id_7CB19F95DBC68942[_id_7CB19F95DBC68942.size] = struct;
    }

    return _id_7CB19F95DBC68942;
}

_id_F76C0948F37C7855( loadouts, _id_ACFE7336F59B3D76 )
{
    _id_7CB19F95DBC68942 = [];
    group = _id_01AC1E1C43D4CEBC( _id_ACFE7336F59B3D76 );

    foreach ( loadout in loadouts )
    {
        _id_EDCF839453192090 = _id_01AC1E1C43D4CEBC( loadout["loadoutPrimary"] );

        if ( group != _id_EDCF839453192090 )
            _id_7CB19F95DBC68942[_id_7CB19F95DBC68942.size] = loadout;
    }

    return _id_7CB19F95DBC68942;
}

_id_01AC1E1C43D4CEBC( rootweapon )
{
    group = "none";

    if ( rootweapon != "none" )
    {
        group = scripts\mp\utility\weapon::getweapongroup( rootweapon );

        if ( group == "weapon_dmr" )
            group = "weapon_sniper";
    }

    return group;
}

updatehighpriorityweapons()
{
    self loadweaponsforplayer( level.loadweapons, 1 );
}

_id_09EF19AF8915EBB2()
{
    level.loadweapons = [];
    _id_BC002676438672C9 = [];
    _id_2AEE5A9B1A165F09 = [];
    loadout = game["forceRandomLoadout"][game["forceRandomLoadoutIndex"]];
    primary = loadout["loadoutPrimary"];
    _id_D7B9856A19F9B6B5 = loadout["loadoutSecondary"];

    if ( primary != "none" )
        _id_BC002676438672C9[_id_BC002676438672C9.size] = _id_D08DB0C19DAACC9C( primary, loadout, 1 );

    if ( _id_D7B9856A19F9B6B5 != "none" )
        _id_2AEE5A9B1A165F09[_id_2AEE5A9B1A165F09.size] = _id_5C5F49069EB558EC( _id_D7B9856A19F9B6B5, loadout, 1 );

    if ( !isdefined( level.loadoutchangeround ) )
        level.loadoutchangeround = 1;

    if ( level.loadoutchangeround != 0 )
    {
        _id_A9C56228C41ECDA0 = game["forceRandomLoadoutIndex"] + 1;

        if ( game["forceRandomLoadoutIndex"] == game["forceRandomLoadout"].size - 1 )
            _id_A9C56228C41ECDA0 = 0;

        _id_C3D433AF5F864E84 = game["forceRandomLoadout"][_id_A9C56228C41ECDA0];
        _id_C03D6DD4BFB14C5A = _id_C3D433AF5F864E84["loadoutPrimary"];
        _id_FCCB1D1573E7F2A6 = _id_C3D433AF5F864E84["loadoutSecondary"];

        if ( _id_C03D6DD4BFB14C5A != "none" )
            _id_BC002676438672C9[_id_BC002676438672C9.size] = _id_D08DB0C19DAACC9C( _id_C03D6DD4BFB14C5A, _id_C3D433AF5F864E84 );

        if ( _id_FCCB1D1573E7F2A6 != "none" )
            _id_2AEE5A9B1A165F09[_id_2AEE5A9B1A165F09.size] = _id_5C5F49069EB558EC( _id_FCCB1D1573E7F2A6, _id_C3D433AF5F864E84 );
    }

    level.loadweapons = scripts\engine\utility::array_combine( _id_BC002676438672C9, _id_2AEE5A9B1A165F09 );
}

_id_D08DB0C19DAACC9C( primary, loadout, _id_995DC1BB9AC37BF2 )
{
    _id_AC82E189F4D06152 = [];

    for ( _id_AC0E594AC96AA3A8 = 1; _id_AC0E594AC96AA3A8 < 6; _id_AC0E594AC96AA3A8++ )
    {
        _id_AB0F600188412CF1 = _id_AC0E594AC96AA3A8;

        if ( _id_AC0E594AC96AA3A8 == 1 )
            _id_AB0F600188412CF1 = "";

        attachment = loadout["loadoutPrimaryAttachment" + _id_AB0F600188412CF1];

        if ( attachment != "none" )
            _id_AC82E189F4D06152[_id_AC82E189F4D06152.size] = attachment;
    }

    _id_AB501F397D3CD312 = _id_2669878CF5A1B6BC::getweaponrootname( primary );
    camoname = "none";
    _id_6A42D475DFB96A31 = "none";
    variantid = undefined;
    _id_F3464D71F01F614E = undefined;
    cosmeticattachment = undefined;
    stickers = undefined;
    _id_2CF0771420522CB6 = _id_2669878CF5A1B6BC::buildweapon( _id_AB501F397D3CD312, _id_AC82E189F4D06152, camoname, _id_6A42D475DFB96A31, variantid, _id_F3464D71F01F614E, cosmeticattachment, stickers );
    _id_DD515FCF025B2E79 = getcompleteweaponname( _id_2CF0771420522CB6 );
    return _id_DD515FCF025B2E79;
}

_id_5C5F49069EB558EC( _id_D7B9856A19F9B6B5, loadout, _id_995DC1BB9AC37BF2 )
{
    _id_AC82E189F4D06152 = [];

    for ( _id_AC0E594AC96AA3A8 = 1; _id_AC0E594AC96AA3A8 < 6; _id_AC0E594AC96AA3A8++ )
    {
        _id_AB0F600188412CF1 = _id_AC0E594AC96AA3A8;

        if ( _id_AC0E594AC96AA3A8 == 1 )
            _id_AB0F600188412CF1 = "";

        attachment = loadout["loadoutSecondaryAttachment" + _id_AB0F600188412CF1];

        if ( attachment != "none" )
            _id_AC82E189F4D06152[_id_AC82E189F4D06152.size] = attachment;
    }

    camoname = "none";
    _id_6A42D475DFB96A31 = "none";
    variantid = undefined;
    _id_F3464D71F01F614E = undefined;
    cosmeticattachment = undefined;
    stickers = undefined;
    _id_AB501F397D3CD312 = _id_2669878CF5A1B6BC::getweaponrootname( _id_D7B9856A19F9B6B5 );
    _id_2CF0771420522CB6 = _id_2669878CF5A1B6BC::buildweapon( _id_AB501F397D3CD312, _id_AC82E189F4D06152, camoname, _id_6A42D475DFB96A31 );
    _id_DD515FCF025B2E79 = getcompleteweaponname( _id_2CF0771420522CB6 );
    return _id_DD515FCF025B2E79;
}

_id_8C9FF0DF46C52845()
{
    level._id_9BC45DA762160EB8 = scripts\engine\utility::ter_op( getdvarint( "dvar_838C297E26529E6B", 0 ) > 0, getdvarint( "dvar_838C297E26529E6B", 0 ), undefined );

    if ( _id_486382FA025EB9D1() )
    {
        if ( !isdefined( game["gunLoadout"] ) )
        {
            game["gunLoadout"] = [];
            game["gunLoadout"]["loadoutArchetype"] = "archetype_assault";
            game["gunLoadout"]["loadoutPrimary"] = "iw9_pi_decho";
            game["gunLoadout"]["loadoutPrimaryAttachment"] = "none";
            game["gunLoadout"]["loadoutPrimaryAttachment2"] = "none";
            game["gunLoadout"]["loadoutPrimaryCamo"] = "none";
            game["gunLoadout"]["loadoutPrimaryReticle"] = "none";
            game["gunLoadout"]["loadoutPrimaryVariantID"] = 0;
            game["gunLoadout"]["loadoutSecondary"] = "none";
            game["gunLoadout"]["loadoutSecondaryAttachment"] = "none";
            game["gunLoadout"]["loadoutSecondaryAttachment2"] = "none";
            game["gunLoadout"]["loadoutSecondaryCamo"] = "none";
            game["gunLoadout"]["loadoutSecondaryReticle"] = "none";
            game["gunLoadout"]["loadoutSecondaryVariantID"] = 0;
            game["gunLoadout"]["loadoutEquipment"] = "specialty_null";
            game["gunLoadout"]["loadoutOffhand"] = "none";
            game["gunLoadout"]["loadoutStreakType"] = "assault";
            game["gunLoadout"]["loadoutKillstreak1"] = "none";
            game["gunLoadout"]["loadoutKillstreak2"] = "none";
            game["gunLoadout"]["loadoutKillstreak3"] = "none";
            game["gunLoadout"]["loadoutPerks"] = [];
            game["gunLoadout"]["loadoutGesture"] = "playerData";
        }

        level.bypassclasschoicefunc = scripts\mp\class::alwaysgamemodeclass;
        level thread _id_027EB7D4BA8113A1();
        _id_451A1A9BD9613164::_id_8ECE37593311858A( ::_id_5589C299E0EDE792 );
    }
}

_id_027EB7D4BA8113A1()
{
    scripts\mp\flags::initgameflags();
    scripts\mp\flags::gameflaginit( "gungame_set", 0 );

    while ( !isdefined( level.weaponmapdata ) )
        waitframe();

    wait 0.1;
    level.blockweapondrops = 1;
    level.setback = 1;
    level.setbackstreak = 0;
    level.killsperweapon = 1;
    level.ladderindex = 1;
    level._id_9ABCA503637351B3 = ::_id_9ABCA503637351B3;

    if ( !isdefined( game["gunGameGuns"] ) )
    {
        setgunladder();
        setgunsfinal();
    }

    scripts\mp\flags::gameflagset( "gungame_set" );
}

_id_4CE29F970B570F97()
{
    level endon( "game_ended" );
    self endon( "disconnect" );
    self waittill( "spawned_player" );

    if ( self.gungamegunindex == game["gunGameGuns"].size )
        self.gungamegunindex = self.gungameprevgunindex;

    thread givenextgun( 1 );
}

_id_9ABCA503637351B3( einflictor, attacker, idamage, smeansofdeath, objweapon, vdir, shitloc, psoffsettime, deathanimduration, lifeid )
{
    if ( smeansofdeath == "MOD_FALLING" || isdefined( attacker ) && isplayer( attacker ) )
    {
        _id_55EF6C1F428AC567 = scripts\cp_mp\utility\weapon_utility::isriotshield( objweapon.basename );
        _id_3AE8C9BE21E07046 = scripts\cp_mp\utility\weapon_utility::isknifeonly( objweapon.basename ) || scripts\mp\utility\weapon::isakimbomeleeweapon( objweapon.basename ) || scripts\mp\utility\weapon::isaxeweapon( objweapon.basename ) || scripts\mp\utility\weapon::ismeleeoverrideweapon( objweapon );
        _id_6A7DE031C0D6FFA9 = isdefined( smeansofdeath ) && smeansofdeath == "MOD_EXECUTION";

        if ( !isdefined( self.ladderdeathsthisweapon ) )
            self.ladderdeathsthisweapon = 1;
        else
            self.ladderdeathsthisweapon++;

        if ( smeansofdeath == "MOD_FALLING" || attacker == self || smeansofdeath == "MOD_MELEE" && _id_3AE8C9BE21E07046 || self.ladderdeathsthisweapon == level.setbackstreak || _id_6A7DE031C0D6FFA9 )
        {
            self.ladderdeathsthisweapon = 0;
            self playlocalsound( "iw9_mp_ui_objective_lost" );
            self notify( "update_loadweapons" );
            self.gungameprevgunindex = self.gungamegunindex;
            self.gungamegunindex = int( max( 0, self.gungamegunindex - level.setback ) );

            if ( self.gungameprevgunindex > self.gungamegunindex )
            {
                if ( level.teambased )
                    scripts\mp\gamescore::giveplayerscore( "stat_0BC852DBBECB5643", 0 );
                else
                    scripts\mp\gamescore::giveplayerscore( "stat_0BC852DBBECB5643", 0 );

                thread scripts\mp\rank::scoreeventpopup( "stat_0BC852DBBECB5643" );
            }

            if ( smeansofdeath == "MOD_MELEE" )
            {
                if ( self.gungameprevgunindex )
                    attacker thread scripts\mp\utility\points::_id_0366980B6A8796AE( "stat_9FEDFEA2929DC7DA" );

                attacker scripts\mp\utility\points::_id_0366980B6A8796AE( "stat_6943B98A3E7D1A00" );
            }

            if ( attacker == self )
                return;
        }

        if ( attacker != self && smeansofdeath == "MOD_PISTOL_BULLET" || smeansofdeath == "MOD_RIFLE_BULLET" || smeansofdeath == "MOD_HEAD_SHOT" || smeansofdeath == "MOD_PROJECTILE" || smeansofdeath == "MOD_PROJECTILE_SPLASH" || smeansofdeath == "MOD_IMPACT" || smeansofdeath == "MOD_GRENADE" || smeansofdeath == "MOD_GRENADE_SPLASH" || smeansofdeath == "MOD_EXPLOSIVE" || smeansofdeath == "MOD_FIRE" || smeansofdeath == "MOD_MELEE" && attacker isonlastkill() && ( _id_3AE8C9BE21E07046 || _id_55EF6C1F428AC567 || _id_6A7DE031C0D6FFA9 ) || smeansofdeath == "MOD_MELEE" && !_id_3AE8C9BE21E07046 || _id_6A7DE031C0D6FFA9 )
        {
            _id_0AC0B9ADAA0D681A = getweaponbasename( attacker.primaryweapon );

            if ( !attacker canprogressingunrank( objweapon, _id_0AC0B9ADAA0D681A, _id_6A7DE031C0D6FFA9, _id_55EF6C1F428AC567, _id_3AE8C9BE21E07046 ) )
                return;

            if ( !isdefined( attacker.ladderkillsthisweapon ) )
                attacker.ladderkillsthisweapon = 1;
            else
                attacker.ladderkillsthisweapon++;

            if ( attacker.ladderkillsthisweapon != level.killsperweapon )
                return;

            attacker.ladderkillsthisweapon = 0;
            attacker.ladderdeathsthisweapon = 0;
            attacker.gungameprevgunindex = attacker.gungamegunindex;
            attacker.gungamegunindex++;
            attacker.pers["gunGameGunIndex"] = attacker.gungamegunindex;
            attacker.pers["gunGamePrevGunIndex"] = attacker.gungameprevgunindex;
            attacker notify( "update_loadweapons" );

            if ( level.teambased )
                attacker scripts\mp\gamescore::giveplayerscore( "stat_FE819F757CFE15FD", 0 );
            else
                attacker scripts\mp\gamescore::giveplayerscore( "stat_FE819F757CFE15FD", 0 );

            if ( attacker.gungamegunindex < game["gunGameGuns"].size )
            {
                points = scripts\mp\rank::getscoreinfovalue( "stat_FE819F757CFE15FD" );
                attacker thread scripts\mp\rank::scorepointspopup( points );
                attacker thread scripts\mp\rank::scoreeventpopup( "stat_FE819F757CFE15FD" );
                attacker playlocalsound( "iw9_mp_ui_objective_taken" );
                attacker thread givenextgun( 0 );
            }
            else if ( attacker.gungamegunindex >= game["gunGameGuns"].size )
            {
                attacker.gungamegunindex = 0;
                attacker.gungameprevgunindex = 0;
                attacker.pers["gunGamePrevGunIndex"] = 0;
                attacker.pers["gunGameGunIndex"] = 0;
                points = scripts\mp\rank::getscoreinfovalue( "stat_FE819F757CFE15FD" );
                attacker thread scripts\mp\rank::scorepointspopup( points );
                attacker thread scripts\mp\rank::scoreeventpopup( "stat_FE819F757CFE15FD" );
                attacker playlocalsound( "iw9_mp_ui_objective_taken" );
                attacker thread givenextgun( 0 );
            }

            attacker.lastgunrankincreasetime = gettime();
        }
    }
}

canprogressingunrank( objweapon, _id_0AC0B9ADAA0D681A, _id_6A7DE031C0D6FFA9, _id_55EF6C1F428AC567, _id_3AE8C9BE21E07046 )
{
    if ( objweapon.basename == _id_0AC0B9ADAA0D681A )
        return 1;

    if ( _id_0AC0B9ADAA0D681A == "iw8_sn_crossbow_mp" )
    {
        if ( issubstr( objweapon.basename, "bolt" ) )
            return 1;
    }

    if ( objweapon.basename == "dragonsbreath_mp" )
        return 1;

    if ( isonlastkill() )
    {
        if ( _id_6A7DE031C0D6FFA9 || _id_55EF6C1F428AC567 || _id_3AE8C9BE21E07046 )
            return 1;
    }

    return 0;
}

isonlastkill()
{
    return self.gungamegunindex == game["gunGameGuns"].size - 1;
}

givenextgun( _id_04FEE35970DD4DDF )
{
    self endon( "death_or_disconnect" );
    level endon( "game_ended" );

    if ( !_id_04FEE35970DD4DDF )
        _id_3B64EB40368C1450::set( "spawn_weapon", "weapon_switch", 0 );

    _id_66B3DB972AC1531E = getnextgun();
    _id_66B3DB972AC1531E = scripts\mp\weapons::updatesavedaltstate( _id_66B3DB972AC1531E );
    scripts\cp_mp\utility\inventory_utility::_giveweapon( _id_66B3DB972AC1531E, undefined, undefined, 1 );

    if ( _id_04FEE35970DD4DDF )
    {
        self setspawnweapon( _id_66B3DB972AC1531E );

        foreach ( weapon in self.weaponlist )
        {
            if ( weapon != _id_66B3DB972AC1531E )
                thread scripts\cp_mp\utility\inventory_utility::takeweaponwhensafe( weapon );
        }
    }

    self.pers["primaryWeapon"] = _id_66B3DB972AC1531E.basename;
    self.primaryweapon = _id_66B3DB972AC1531E.basename;
    self.primaryweaponobj = _id_66B3DB972AC1531E;
    scripts\cp_mp\utility\inventory_utility::_switchtoweapon( _id_66B3DB972AC1531E );
    _id_F118B7926C3FDE57 = scripts\mp\utility\weapon::isaxeweapon( _id_66B3DB972AC1531E );

    if ( _id_F118B7926C3FDE57 )
    {
        self setweaponammoclip( _id_66B3DB972AC1531E, 1 );
        thread takeweaponwhensafegungame( "iw9_knifestab_mp", 0 );
    }
    else if ( self.gungamegunindex != game["gunGameGuns"].size - 1 )
    {
        self givestartammo( _id_66B3DB972AC1531E );
        _id_F968C960C23738E6 = makeweapon( "iw9_knifestab_mp" );
        self giveweapon( _id_F968C960C23738E6 );
        self assignweaponmeleeslot( _id_F968C960C23738E6 );
    }

    if ( !_id_04FEE35970DD4DDF )
    {
        currentweapon = self.lastdroppableweaponobj;
        thread takeweaponwhensafegungame( currentweapon, 1 );
    }

    scripts\mp\weapons::updatetogglescopestate( _id_66B3DB972AC1531E );
    self.gungameprevgunindex = self.gungamegunindex;

    if ( !isdefined( self.lastgunpromotiontime ) )
        self.lastgunpromotiontime = gettime();

    _id_6943F322AA5378A5 = ( gettime() - self.lastgunpromotiontime ) / 1000;
    self.lastgunpromotiontime = gettime();

    if ( isdefined( self.pers["longestTimeSpentOnWeapon"] ) && _id_6943F322AA5378A5 > self.pers["longestTimeSpentOnWeapon"] )
        self.pers["longestTimeSpentOnWeapon"] = _id_6943F322AA5378A5;
}

takeweaponwhensafegungame( weapon, _id_2AF5EEDF0B55AC7E )
{
    self endon( "death_or_disconnect" );

    for (;;)
    {
        if ( !scripts\cp_mp\utility\inventory_utility::iscurrentweapon( weapon ) )
            break;

        waitframe();
    }

    scripts\cp_mp\utility\inventory_utility::_takeweapon( weapon );

    if ( _id_2AF5EEDF0B55AC7E )
        _id_3B64EB40368C1450::_id_C9D0B43701BDBA00( "spawn_weapon" );
}

getnextgun( _id_5ED2CD7C116C2AD7 )
{
    _id_111A8E98DCE6A897 = self.gungamegunindex;

    if ( isdefined( _id_5ED2CD7C116C2AD7 ) )
        _id_111A8E98DCE6A897 = _id_5ED2CD7C116C2AD7;

    _id_DD515FCF025B2E79 = game["gunGameGuns"][_id_111A8E98DCE6A897];
    return _id_DD515FCF025B2E79;
}

_id_486382FA025EB9D1()
{
    return istrue( level._id_9BC45DA762160EB8 );
}

_id_16C5EC6B74D04649()
{
    return level._id_9BC45DA762160EB8 == 1;
}

_id_F49DAE08DC34E74A()
{
    return level._id_9BC45DA762160EB8 == 2;
}

_id_68F2F15472AD594E()
{
    return level._id_9BC45DA762160EB8 == 3;
}

getggweapontablelootvariants( _id_C27E2A04BAB78C1F )
{
    _id_C0AA7602B6BBC954 = [];
    _id_AB501F397D3CD312 = _id_2669878CF5A1B6BC::getweaponrootname( _id_C27E2A04BAB78C1F );
    _id_C0AA7602B6BBC954 = tablelookup( "mp/gunGameWeapons.csv", 1, _id_AB501F397D3CD312, 6 );
    return _id_C0AA7602B6BBC954;
}

refillammo()
{
    level endon( "game_ended" );
    self endon( "disconnect" );

    for (;;)
    {
        self waittill( "reload" );
        _id_8A2ECC3A9D4C95DF = weaponstartammo( self.primaryweapon );
        clipammo = weaponclipsize( self.primaryweapon );
        stockammo = _id_8A2ECC3A9D4C95DF - clipammo;
        self setweaponammostock( self.primaryweapon, stockammo );
    }
}

refillsinglecountammo()
{
    level endon( "game_ended" );
    self endon( "disconnect" );

    for (;;)
    {
        if ( scripts\mp\utility\player::isreallyalive( self ) && self.team != "spectator" && isdefined( self.primaryweapon ) && self getammocount( self.primaryweapon ) == 0 )
        {
            wait 2;
            self notify( "reload" );
            wait 1;
            continue;
        }

        waitframe();
    }
}

keepweaponsloaded()
{
    self loadweaponsforplayer( [ game["gunGameGuns"][0], game["gunGameGuns"][1] ], 1 );
    _id_1942F036EF77C9A4 = [];

    for (;;)
    {
        self waittill( "update_loadweapons" );
        _id_1942F036EF77C9A4[0] = game["gunGameGuns"][int( max( 0, self.gungamegunindex - level.setback ) )];
        _id_1942F036EF77C9A4[1] = game["gunGameGuns"][self.gungamegunindex];
        _id_1942F036EF77C9A4[2] = game["gunGameGuns"][self.gungamegunindex + 1];
        self loadweaponsforplayer( _id_1942F036EF77C9A4, 1 );
    }
}

setgunladder()
{
    game["gunGameGuns"] = [];

    switch ( level.ladderindex )
    {
        case 6:
        case 5:
        case 4:
        case 1:
            if ( scripts\mp\utility\game::matchmakinggame() && getdvarint( "dvar_0FB3E643C9CDD861", 0 ) == 1 )
            {
                game["gunGameGuns"][0] = "rand_pistol";
                game["gunGameGuns"][1] = "rand_shotgun";
                game["gunGameGuns"][2] = "rand_smg";
                game["gunGameGuns"][3] = "rand_assault";
                game["gunGameGuns"][4] = "rand_lmg";
                game["gunGameGuns"][5] = "rand_sniper";
                game["gunGameGuns"][6] = "rand_smg";
                game["gunGameGuns"][7] = "rand_assault";
                game["gunGameGuns"][8] = "rand_lmg";
                game["gunGameGuns"][9] = "rand_launcher";
                game["gunGameGuns"][10] = "rand_shotgun";
                game["gunGameGuns"][11] = "rand_smg";
                game["gunGameGuns"][12] = "rand_assault";
                game["gunGameGuns"][13] = "rand_shotgun";
                game["gunGameGuns"][14] = "rand_assault";
                game["gunGameGuns"][15] = "rand_sniper";
                game["gunGameGuns"][16] = "rand_pistol";
                game["gunGameGuns"][17] = "rand_knife_end";
            }
            else
            {
                game["gunGameGuns"][0] = "rand_assault";
                game["gunGameGuns"][1] = "rand_smg";
                game["gunGameGuns"][2] = "rand_shotgun";
                game["gunGameGuns"][3] = "rand_lmg";
                game["gunGameGuns"][4] = "rand_assault";
                game["gunGameGuns"][5] = "rand_sniper";
                game["gunGameGuns"][6] = "rand_pistol";
                game["gunGameGuns"][7] = "rand_assault";
                game["gunGameGuns"][8] = "rand_smg";
                game["gunGameGuns"][9] = "rand_launcher";
                game["gunGameGuns"][10] = "rand_shotgun";
                game["gunGameGuns"][11] = "rand_lmg";
                game["gunGameGuns"][12] = "rand_assault";
                game["gunGameGuns"][13] = "rand_smg";
                game["gunGameGuns"][14] = "rand_shotgun";
                game["gunGameGuns"][15] = "rand_sniper";
                game["gunGameGuns"][16] = "rand_pistol";
                game["gunGameGuns"][17] = "rand_knife_end";
            }

            break;
        case 2:
            game["gunGameGuns"][0] = "rand_pistol";
            game["gunGameGuns"][1] = "rand_shotgun";
            game["gunGameGuns"][2] = "rand_smg";
            game["gunGameGuns"][3] = "rand_assault";
            game["gunGameGuns"][4] = "rand_pistol";
            game["gunGameGuns"][5] = "rand_shotgun";
            game["gunGameGuns"][6] = "rand_smg";
            game["gunGameGuns"][7] = "rand_assault";
            game["gunGameGuns"][8] = "rand_pistol";
            game["gunGameGuns"][9] = "rand_shotgun";
            game["gunGameGuns"][10] = "rand_smg";
            game["gunGameGuns"][11] = "rand_assault";
            game["gunGameGuns"][12] = "rand_pistol";
            game["gunGameGuns"][13] = "rand_shotgun";
            game["gunGameGuns"][14] = "rand_smg";
            game["gunGameGuns"][15] = "rand_assault";
            game["gunGameGuns"][16] = "rand_pistol";
            game["gunGameGuns"][17] = "rand_knife_end";
            break;
        case 3:
            game["gunGameGuns"][0] = "rand_pistol";
            game["gunGameGuns"][1] = "rand_assault";
            game["gunGameGuns"][2] = "rand_lmg";
            game["gunGameGuns"][3] = "rand_launcher";
            game["gunGameGuns"][4] = "rand_sniper";
            game["gunGameGuns"][5] = "rand_assault";
            game["gunGameGuns"][6] = "rand_lmg";
            game["gunGameGuns"][7] = "rand_launcher";
            game["gunGameGuns"][8] = "rand_sniper";
            game["gunGameGuns"][9] = "rand_assault";
            game["gunGameGuns"][10] = "rand_lmg";
            game["gunGameGuns"][11] = "rand_launcher";
            game["gunGameGuns"][12] = "rand_sniper";
            game["gunGameGuns"][13] = "rand_assault";
            game["gunGameGuns"][14] = "rand_sniper";
            game["gunGameGuns"][15] = "rand_assault";
            game["gunGameGuns"][16] = "rand_pistol";
            game["gunGameGuns"][17] = "rand_knife_end";
            break;
    }

    if ( level.gametype == "gun" )
    {
        scorelimit = game["gunGameGuns"].size;
        setdynamicdvar( "dvar_A7992F287575DD31", scorelimit );
        scripts\mp\utility\game::registerscorelimitdvar( scripts\mp\utility\game::getgametype(), scorelimit );
    }
}

setgunsfinal()
{
    buildrandomweapontable();

    for ( _id_AC0E594AC96AA3A8 = 0; _id_AC0E594AC96AA3A8 < game["gunGameGuns"].size; _id_AC0E594AC96AA3A8++ )
    {
        _id_B3BF8105D61A60E1 = game["gunGameGuns"][_id_AC0E594AC96AA3A8];

        if ( scripts\engine\utility::string_starts_with( _id_B3BF8105D61A60E1, "rand_" ) )
        {
            _id_BAE77D8848F4D84D = getrandomweaponfromcategory( _id_B3BF8105D61A60E1 );

            if ( level.ladderindex == 4 || level.ladderindex == 5 )
                game["gunGameGuns"][_id_AC0E594AC96AA3A8] = _id_2669878CF5A1B6BC::buildweapon_blueprint( _id_BAE77D8848F4D84D["weapon"], undefined, undefined, _id_BAE77D8848F4D84D["variantID"], undefined, undefined, scripts\cp_mp\utility\game_utility::isnightmap() );
            else
                game["gunGameGuns"][_id_AC0E594AC96AA3A8] = buildweaponfromrandomcategory( _id_BAE77D8848F4D84D );

            continue;
        }

        _id_AB501F397D3CD312 = _id_2669878CF5A1B6BC::getweaponrootname( game["gunGameGuns"][_id_AC0E594AC96AA3A8] );
        _id_DD515FCF025B2E79 = _id_AB501F397D3CD312;
        _id_C8616C37BC30098B = 0;

        if ( level.ladderindex == 4 || level.ladderindex == 5 )
        {
            _id_9D519609E4FFDAA3 = getggweapontablelootvariants( _id_AB501F397D3CD312 );
            variantid = scripts\mp\class::table_parseweaponvariantidvalue( _id_AB501F397D3CD312, _id_9D519609E4FFDAA3 );
            _id_DD515FCF025B2E79 = _id_2669878CF5A1B6BC::buildweapon_blueprint( _id_AB501F397D3CD312, undefined, undefined, variantid, undefined, undefined, scripts\cp_mp\utility\game_utility::isnightmap() );
        }
        else
        {
            variantid = 0;

            if ( level.ladderindex == 6 )
            {
                _id_9D519609E4FFDAA3 = getggweapontablelootvariants( _id_AB501F397D3CD312 );
                variantid = scripts\mp\class::table_parseweaponvariantidvalue( _id_AB501F397D3CD312, _id_9D519609E4FFDAA3 );
            }

            _id_DD515FCF025B2E79 = gun_createrandomweapon( _id_AB501F397D3CD312, _id_C8616C37BC30098B, variantid, scripts\cp_mp\utility\game_utility::isnightmap() );
        }

        game["gunGameGuns"][_id_AC0E594AC96AA3A8] = _id_DD515FCF025B2E79;
    }
}

_id_5589C299E0EDE792()
{
    if ( !isdefined( self.pers["gunGameGunIndex"] ) )
    {
        self.pers["gunGameGunIndex"] = 0;
        self.gungamegunindex = 0;
    }
    else
        self.gungamegunindex = self.pers["gunGameGunIndex"];

    if ( !isdefined( self.pers["gunGamePrevGunIndex"] ) )
    {
        self.pers["gunGamePrevGunIndex"] = 0;
        self.gungameprevgunindex = 0;
    }
    else
        self.gungameprevgunindex = self.pers["gunGamePrevGunIndex"];

    scripts\mp\class::_id_A16868D4DCD81A4B();
    self.pers["gamemodeLoadout"] = game["gunLoadout"];
    thread refillammo();
    thread refillsinglecountammo();
    scripts\mp\flags::gameflagwait( "gungame_set" );
    thread keepweaponsloaded();
}

_id_CA4A1CA698AE7A2C( _id_22E2935C86B3B88E )
{
    if ( !isdefined( level.weaponcategories ) )
        return;

    if ( !isdefined( level.weaponcategories[_id_22E2935C86B3B88E] ) )
        return;

    _id_BFBB389447A5262C = level.weaponcategories[_id_22E2935C86B3B88E].weaponlist.size;

    for ( _id_AC0E594AC96AA3A8 = 0; _id_AC0E594AC96AA3A8 < _id_BFBB389447A5262C; _id_AC0E594AC96AA3A8++ )
        level.weaponcategories[_id_22E2935C86B3B88E].weaponlist[_id_AC0E594AC96AA3A8].isused = 1;

    level.weaponcategories[_id_22E2935C86B3B88E]._id_938C48B66243B196 = _id_BFBB389447A5262C;
}

_id_45751BB958E8C4EF()
{
    level._id_29FE567A5CA5271D = [];
    _id_E2EBC5C5929B4B54 = tablelookupgetnumrows( "mp/gunGameWeapons.csv" );
    _id_AC5AE676F98D14F8 = tablelookupgetnumcols( "mp/gunGameWeapons.csv" );

    for ( _id_AC0E594AC96AA3A8 = 0; _id_AC0E594AC96AA3A8 < _id_E2EBC5C5929B4B54; _id_AC0E594AC96AA3A8++ )
    {
        for ( _id_AC0E5C4AC96AAA41 = 0; _id_AC0E5C4AC96AAA41 < _id_AC5AE676F98D14F8; _id_AC0E5C4AC96AAA41++ )
        {
            if ( !isdefined( level._id_29FE567A5CA5271D[_id_AC0E594AC96AA3A8] ) )
                level._id_29FE567A5CA5271D[_id_AC0E594AC96AA3A8] = [];

            level._id_29FE567A5CA5271D[_id_AC0E594AC96AA3A8][_id_AC0E5C4AC96AAA41] = tablelookupbyrow( "mp/gunGameWeapons.csv", _id_AC0E594AC96AA3A8, _id_AC0E5C4AC96AAA41 );
        }
    }
}

_id_F02A31864FCB05E7( _id_CB89110314447B2F, _id_5E9770323AA54F5B )
{
    if ( !isdefined( level._id_29FE567A5CA5271D ) )
        _id_45751BB958E8C4EF();

    return level._id_29FE567A5CA5271D[_id_CB89110314447B2F][_id_5E9770323AA54F5B];
}

buildrandomweapontable()
{
    if ( !isdefined( level._id_29FE567A5CA5271D ) )
        _id_45751BB958E8C4EF();

    level.weaponcategories = [];

    for ( _id_CB89110314447B2F = 0; _id_CB89110314447B2F < level._id_29FE567A5CA5271D.size; _id_CB89110314447B2F++ )
    {
        _id_22E2935C86B3B88E = _id_F02A31864FCB05E7( _id_CB89110314447B2F, 0 );

        if ( _id_22E2935C86B3B88E == "" )
            break;

        if ( !isdefined( level.weaponcategories[_id_22E2935C86B3B88E] ) )
        {
            level.weaponcategories[_id_22E2935C86B3B88E] = spawnstruct();
            level.weaponcategories[_id_22E2935C86B3B88E].weaponlist = [];
            level.weaponcategories[_id_22E2935C86B3B88E]._id_938C48B66243B196 = 0;
        }

        _id_E1FB30830E39F39D = _id_F02A31864FCB05E7( _id_CB89110314447B2F, 5 );

        if ( _id_E1FB30830E39F39D == "" || getdvarint( _id_E1FB30830E39F39D, 0 ) == 1 )
        {
            _id_BD138DE99B3B3507 = int( _id_F02A31864FCB05E7( _id_CB89110314447B2F, 7 ) );

            if ( !( level.ladderindex == 4 || level.ladderindex == 6 ) || _id_BD138DE99B3B3507 )
            {
                _id_BAE77D8848F4D84D = [];
                _id_BAE77D8848F4D84D["weapon"] = _id_2669878CF5A1B6BC::getweaponrootname( _id_F02A31864FCB05E7( _id_CB89110314447B2F, 1 ) );
                _id_BAE77D8848F4D84D["min"] = int( _id_F02A31864FCB05E7( _id_CB89110314447B2F, 2 ) );
                _id_BAE77D8848F4D84D["max"] = int( _id_F02A31864FCB05E7( _id_CB89110314447B2F, 3 ) );
                _id_BAE77D8848F4D84D["perk"] = _id_F02A31864FCB05E7( _id_CB89110314447B2F, 4 );
                _id_BAE77D8848F4D84D["allowed"] = _id_BD138DE99B3B3507;
                _id_DF530EC0D1DEA418 = level.weaponcategories[_id_22E2935C86B3B88E].weaponlist.size;
                level.weaponcategories[_id_22E2935C86B3B88E].weaponlist[_id_DF530EC0D1DEA418] = spawnstruct();
                level.weaponcategories[_id_22E2935C86B3B88E].weaponlist[_id_DF530EC0D1DEA418]._id_BAE77D8848F4D84D = _id_BAE77D8848F4D84D;
                level.weaponcategories[_id_22E2935C86B3B88E].weaponlist[_id_DF530EC0D1DEA418].isused = 0;
                level.weaponcategories[_id_22E2935C86B3B88E]._id_938C48B66243B196++;
            }
        }
    }
}

getrandomweaponfromcategory( _id_22E2935C86B3B88E )
{
    if ( isdefined( level.weaponcategories[_id_22E2935C86B3B88E] ) )
    {
        if ( level.weaponcategories[_id_22E2935C86B3B88E]._id_938C48B66243B196 <= 0 )
            _id_CA4A1CA698AE7A2C( _id_22E2935C86B3B88E );

        weaponlist = level.weaponcategories[_id_22E2935C86B3B88E].weaponlist;
        _id_BAE77D8848F4D84D = undefined;
        loopcount = 0;

        for (;;)
        {
            index = randomintrange( 0, weaponlist.size );
            _id_BAE77D8848F4D84D = weaponlist[index]._id_BAE77D8848F4D84D;
            _id_AAA935A3EBF3FD7C = 1;

            if ( level.ladderindex == 4 || level.ladderindex == 6 )
                _id_AAA935A3EBF3FD7C = _id_BAE77D8848F4D84D["allowed"];

            if ( !istrue( weaponlist[index].isused ) && _id_AAA935A3EBF3FD7C || loopcount > weaponlist.size )
            {
                level.weaponcategories[_id_22E2935C86B3B88E].weaponlist[index].isused = 1;
                level.weaponcategories[_id_22E2935C86B3B88E]._id_938C48B66243B196--;
                break;
            }

            loopcount++;
        }

        if ( level.ladderindex == 4 || level.ladderindex == 6 )
        {
            _id_9D519609E4FFDAA3 = getggweapontablelootvariants( _id_BAE77D8848F4D84D["weapon"] );
            _id_BAE77D8848F4D84D["variantID"] = scripts\mp\class::table_parseweaponvariantidvalue( _id_BAE77D8848F4D84D["weapon"], _id_9D519609E4FFDAA3 );
        }
        else if ( level.ladderindex == 5 )
            _id_BAE77D8848F4D84D["variantID"] = scripts\mp\class::table_parseweaponvariantidvalue( _id_BAE77D8848F4D84D["weapon"], "-1" );

        return _id_BAE77D8848F4D84D;
    }
    else
    {

    }

    return "none";
}

buildweaponfromrandomcategory( _id_BAE77D8848F4D84D )
{
    _id_C8616C37BC30098B = randomintrange( _id_BAE77D8848F4D84D["min"], _id_BAE77D8848F4D84D["max"] + 1 );
    _id_DD515FCF025B2E79 = gun_createrandomweapon( _id_BAE77D8848F4D84D["weapon"], _id_C8616C37BC30098B, _id_BAE77D8848F4D84D["variantID"], scripts\cp_mp\utility\game_utility::isnightmap() );
    return _id_DD515FCF025B2E79;
}

gun_createrandomweapon( _id_AB501F397D3CD312, _id_C8616C37BC30098B, variantid, _id_11A1FA68AEB971C0 )
{
    if ( level.ladderindex == 6 )
    {
        if ( !isdefined( _id_C8616C37BC30098B ) )
            _id_C8616C37BC30098B = randomintrange( 2, 5 );

        _id_B8215055A946EEBB = _id_2669878CF5A1B6BC::buildweapon( _id_AB501F397D3CD312, undefined, undefined, undefined, undefined, undefined, undefined, undefined, _id_11A1FA68AEB971C0 );
        _id_79583F5B5010A954 = gun_buildoverrideattachmentlist( _id_AB501F397D3CD312 );
        _id_952F1674FA8D734F = [];

        for ( _id_AC0E594AC96AA3A8 = 0; _id_AC0E594AC96AA3A8 < _id_C8616C37BC30098B; _id_AC0E594AC96AA3A8++ )
        {
            attachment = scripts\mp\weapons::getrandomgraverobberattachment( _id_B8215055A946EEBB, _id_79583F5B5010A954 );

            if ( !isdefined( attachment ) )
                break;
            else
            {
                _id_66B3DB972AC1531E = scripts\mp\weapons::addattachmenttoweapon( _id_B8215055A946EEBB, attachment );

                if ( isdefined( _id_66B3DB972AC1531E ) )
                    _id_B8215055A946EEBB = _id_66B3DB972AC1531E;

                _id_952F1674FA8D734F[_id_952F1674FA8D734F.size] = attachment;
            }
        }

        _id_B8215055A946EEBB = _id_2669878CF5A1B6BC::buildweapon_blueprintwithcustomattachments( _id_AB501F397D3CD312, _id_952F1674FA8D734F, undefined, undefined, variantid, undefined, undefined, undefined, _id_11A1FA68AEB971C0 );
        return _id_B8215055A946EEBB;
    }
    else
    {
        if ( isdefined( variantid ) && variantid != 0 )
            _id_B8215055A946EEBB = _id_2669878CF5A1B6BC::buildweapon_blueprint( _id_AB501F397D3CD312, undefined, undefined, variantid, undefined, undefined, _id_11A1FA68AEB971C0 );
        else
            _id_B8215055A946EEBB = _id_2669878CF5A1B6BC::buildweapon( _id_AB501F397D3CD312, undefined, undefined, undefined, undefined, undefined, undefined, undefined, _id_11A1FA68AEB971C0 );

        if ( !isdefined( _id_C8616C37BC30098B ) )
            _id_C8616C37BC30098B = randomintrange( 2, 5 );

        _id_79583F5B5010A954 = gun_buildoverrideattachmentlist( _id_B8215055A946EEBB );

        for ( _id_AC0E594AC96AA3A8 = 0; _id_AC0E594AC96AA3A8 < _id_C8616C37BC30098B; _id_AC0E594AC96AA3A8++ )
        {
            attachment = scripts\mp\weapons::getrandomgraverobberattachment( _id_B8215055A946EEBB, _id_79583F5B5010A954 );

            if ( !isdefined( attachment ) )
                break;

            _id_66B3DB972AC1531E = scripts\mp\weapons::addattachmenttoweapon( _id_B8215055A946EEBB, attachment );

            if ( isdefined( _id_66B3DB972AC1531E ) )
                _id_B8215055A946EEBB = _id_66B3DB972AC1531E;
        }

        return _id_B8215055A946EEBB;
    }
}

gun_buildoverrideattachmentlist( _id_72C4B0AF1A85887E )
{
    _id_0605B3BCE83E5F38 = scripts\mp\utility\weapon::getallselectableattachments( _id_72C4B0AF1A85887E );
    _id_79583F5B5010A954 = [];

    foreach ( attachment in _id_0605B3BCE83E5F38 )
    {
        if ( isstartstr( attachment, "gl" ) || isstartstr( attachment, "ub" ) || isstartstr( attachment, "thermal" ) || attachment == "hybrid3" )
            continue;

        _id_79583F5B5010A954[_id_79583F5B5010A954.size] = attachment;
    }

    return _id_79583F5B5010A954;
}

_id_9081E2D33D0B53F9()
{
    if ( getdvarint( "dvar_8D99F31DD75FCF9C", 0 ) == 1 )
    {
        level._id_D0D511BA6517842A = 1;

        if ( getdvarint( "dvar_148266EA4825C4B0", 0 ) == 1 )
        {
            level._id_5DF506226294AA65 = ::_id_5DF506226294AA65;
            level._id_484F1A4BDB5CDA1E = ::_id_484F1A4BDB5CDA1E;
        }

        level thread _id_7ABA1069126EB717();
        scripts\engine\utility::flag_init( "stealth_enabled" );
        scripts\engine\utility::flag_init( "level_stealth_initialized" );
        scripts\engine\utility::flag_init( "stealth_spotted" );
    }
}

_id_7ABA1069126EB717()
{
    level._id_72E8A99508B7BE1B = getdvarint( "dvar_742EC92F3F5C3B41", 12 );
    _id_48814951E916AF89::init();

    if ( !isdefined( level.difficultytype ) )
        level _id_48814951E916AF89::_id_C8393014DD7F8AB6();

    scripts\cp_mp\utility\script_utility::registersharedfunc( "ai", "dropLootOnAgentDeath", ::_id_9A4C44116474133A );

    while ( !isdefined( level.teamnamelist ) )
        waitframe();

    foreach ( team in level.teamnamelist )
    {
        _id_B5B1784D5A1327C7 = team + "_agents";
        _id_48814951E916AF89::_id_BA4022744DCE59F6( _id_B5B1784D5A1327C7, level._id_72E8A99508B7BE1B );
    }
}

_id_5DF506226294AA65( victim, attacker )
{
    if ( victim.deaths % 5 == 0 )
        victim._id_8308E73A11DCA140 = 1;

    _id_B5B1784D5A1327C7 = victim.team + "_agents";
    _id_3D2E4B298E935C8D = _id_48814951E916AF89::_id_9368FB9261E4CD0A( _id_B5B1784D5A1327C7 );
    _id_0644D90DE7685F75 = level._id_72E8A99508B7BE1B - _id_3D2E4B298E935C8D;

    if ( _id_0644D90DE7685F75 <= 0 )
        return;

    goalpos = undefined;
    spawnpoint = victim [[ level.getspawnpoint ]]();
    team = victim.team;
    wait 0.15;

    if ( isdefined( spawnpoint ) )
    {
        if ( isdefined( attacker ) )
            goalpos = attacker.origin;
        else
            goalpos = spawnpoint.origin;

        if ( istrue( victim._id_8308E73A11DCA140 ) )
        {
            _id_40E875A042B82875 = getdvarint( "dvar_04EC508AA0002244", 1 );

            if ( _id_40E875A042B82875 > 0 )
            {
                for ( _id_AC0E594AC96AA3A8 = 0; _id_AC0E594AC96AA3A8 < _id_40E875A042B82875; _id_AC0E594AC96AA3A8++ )
                {
                    agent = _id_48814951E916AF89::_id_EA94A8BF24D3C5EF( "enemy_mp_jugg_base", spawnpoint.origin, spawnpoint.angles, "absolute", _id_B5B1784D5A1327C7, "jugg", _id_B5B1784D5A1327C7, team );

                    if ( isdefined( agent ) )
                    {
                        agent thread _id_35C195DF2BA46725( agent, team );
                        _id_371B4C2AB5861E62::_id_1828F1E20E52B418( agent );
                        agent thread _id_120270BD0A747A35::_id_A5117518725DA028( agent, goalpos );
                        agent.doavoidanceblocking = 0;
                    }
                }
            }

            victim._id_8308E73A11DCA140 = undefined;
        }
        else
        {
            numagents = getdvarint( "dvar_65D94DDFEF09716A", 1 );

            if ( numagents > 0 )
            {
                for ( _id_AC0E594AC96AA3A8 = 0; _id_AC0E594AC96AA3A8 < numagents; _id_AC0E594AC96AA3A8++ )
                {
                    aitype = _id_48814951E916AF89::_id_D5BC07EABF352ABB();
                    agent = _id_48814951E916AF89::_id_EA94A8BF24D3C5EF( aitype, spawnpoint.origin, spawnpoint.angles, "absolute", _id_B5B1784D5A1327C7, "jugg", _id_B5B1784D5A1327C7, team );

                    if ( isdefined( agent ) )
                    {
                        agent thread _id_35C195DF2BA46725( agent, team );
                        agent thread _id_120270BD0A747A35::_id_A5117518725DA028( agent, goalpos );

                        if ( team == "allies" )
                            agent _id_371B4C2AB5861E62::_id_C37C4F9D687074FF( "body_mp_eastern_geist_1_1_lod1", "head_mp_eastern_bale_1_1" );
                        else
                            agent _id_371B4C2AB5861E62::_id_C37C4F9D687074FF( "body_spetsnaz_cqc", "head_spetsnaz_cqc" );

                        agent.doavoidanceblocking = 0;
                    }
                }
            }
        }
    }
}

_id_35C195DF2BA46725( agent, team )
{
    waitframe();
    agent.gameskill = _id_53DA3333B83B3527::get_gameskill();
    agent _id_53DA3333B83B3527::apply_difficulty_settings( 1 );
    _id_371B4C2AB5861E62::_id_350CF0DB9F5E0CBE( agent, "team", team );
}

_id_DF3E6EE36363E610( agent )
{
    if ( agent.team == "axis" )
    {
        body = "body_spetsnaz_cqc";
        head = "head_spetsnaz_cqc";
    }
    else
    {
        body = "body_mp_eastern_geist_1_1_lod1";
        head = "head_mp_eastern_bale_1_1";
    }

    weapon = undefined;
    _id_A664AAD02EE98BD2 = _id_371B4C2AB5861E62::_id_BA0801276542946B();
    grenadeammo = getdvarint( "dvar_CE85F7CC40B562F5", 0 );
    armor = 0;
    agent _id_371B4C2AB5861E62::_id_C37C4F9D687074FF( body, head, weapon, _id_A664AAD02EE98BD2, grenadeammo, armor );
    agent.baseaccuracy = getdvarfloat( "dvar_949A1D9903E71C7A", 0.4 );
}

_id_9A4C44116474133A( agent, _id_DCF5E15C58C4152A, groupname )
{
    agent notify( "endLootDropThread" );
    agent endon( "endLootDropThread" );
    agent waittill( "death" );
    agent [[ level.weapondropfunction ]]( scripts\engine\utility::ter_op( isdefined( self.attacker ), self.attacker, undefined ), scripts\engine\utility::ter_op( isdefined( self.damagemod ), self.damagemod, "MOD_RIFLE_BULLET" ) );
}

_id_484F1A4BDB5CDA1E( attacker, victim )
{
    score = level.scoremod["kill"];

    if ( scripts\mp\utility\game::_id_F698BFD3EFA33302() || scripts\mp\utility\game::_id_E9F3A160BBEFE208( attacker ) || scripts\mp\utility\game::_id_E9F3A160BBEFE208( victim ) )
    {
        if ( scripts\mp\utility\game::matchmakinggame() && isdefined( attacker.cranked ) )
        {
            if ( score != 0 )
            {
                score = score + 1;
                attacker thread scripts\mp\rank::scoreeventpopup( _func_2EF675C13CA1C4AF( "stat_2C8BCBB02EC7FF9B", score ) );
            }
        }

        attacker scripts\mp\cranked::oncranked( victim, attacker );
    }

    if ( score != 0 )
    {
        if ( level.teambased )
            level scripts\mp\gamescore::giveteamscoreforobjective( attacker.pers["team"], score, 0 );
        else
            attacker scripts\mp\gamescore::giveplayerscore( "stat_EF9582D72160F199", score, victim );
    }
}

_id_36532A1506F2C161()
{
    _id_EC3DE47AC260EA33 = undefined;

    if ( getdvar( "dvar_E65E9A96EB2FF62B" ) == "arena" )
    {
        objmodifier = 0;

        if ( isusingmatchrulesdata() )
            objmodifier = getmatchrulesdata( "arenaData", "objModifier" );
        else
            objmodifier = scripts\mp\utility\dvars::dvarintvalue( "objModifier", 0, 0, 3 );

        if ( objmodifier == 3 )
            _id_EC3DE47AC260EA33 = 1;
    }

    level._id_C3A5ECC6DB827A75 = 0;
    matchmakingmatch = getdvarint( "dvar_962400405F9F3C0B" ) && !getdvarint( "dvar_485EF1ED1D39D3A3" );

    if ( matchmakingmatch )
        level._id_C3A5ECC6DB827A75 = getdvarint( "dvar_750E151E9A3727E7", 0 );

    if ( level._id_C3A5ECC6DB827A75 || istrue( _id_EC3DE47AC260EA33 ) )
    {
        _id_E55C6985B99A0D78();
        level.setupsoccerball = ::setupsoccerball;
        level thread [[ level.setupsoccerball ]]();
        level thread scripts\mp\utility\entity::global_physics_sound_monitor();

        if ( getdvarint( "dvar_C8724EBC0F08EC3E", 1 ) == 1 )
        {
            _id_DAED1651833FB1A2();
            level _id_08F38B7A29DAD82F();

            if ( getdvarint( "dvar_71C708CA0182656B", 3 ) > 0 )
            {
                if ( !isdefined( game["multiBall"] ) )
                    game["multiBall"] = 0;
            }
        }
    }
    else
        level._id_C3A5ECC6DB827A75 = undefined;

    if ( getdvarint( "dvar_CE8358082DFAB9E9", 0 ) == 1 )
    {
        level._id_B6E1C0B3C715B0DF["gos_fireworks"] = loadfx( "vfx/iw8_mp/gamemode/vfx_gos_firework.vfx" );
        level._id_DD7AF80C3EB2C1E0 = 1;
    }
}

setupsoccerball()
{
    level._id_1B6B55EFA67BA7A8 = [];
    _id_22CE7236B68B2334 = [];
    spawnpos = undefined;

    if ( scripts\mp\utility\game::getgametype() == "arena" )
    {
        arenaflag = getentarray( "flag_arena", "targetname" );
        spawnpos = arenaflag[0].origin + ( 0, 0, 30 );
    }
    else
    {
        _id_22CE7236B68B2334 = [];
        primaryflags = getentarray( "flag_primary", "targetname" );

        foreach ( flag in primaryflags )
        {
            if ( flag.script_label == "_b" )
            {
                _id_22CE7236B68B2334[_id_22CE7236B68B2334.size] = flag.origin;
                break;
            }
        }

        if ( _id_22CE7236B68B2334.size == 0 )
            return;

        _id_22CE7236B68B2334 = scripts\engine\utility::array_randomize( _id_22CE7236B68B2334 );
        spawnpos = _id_22CE7236B68B2334[0];

        if ( getdvar( "dvar_EF237DA69BB64EF6" ) == "mp_firingrange" )
            spawnpos = ( -194, -858, 90 );
    }

    _id_288D5564A47D230A = [];
    _id_58553518A66CEBE9 = getentarray( "cyber_emp_pickup_trig", "targetname" );

    foreach ( trig in _id_58553518A66CEBE9 )
        _id_288D5564A47D230A[_id_288D5564A47D230A.size] = trig.origin;

    level._id_288D5564A47D230A = _id_288D5564A47D230A;
    _id_2C677CECD807F43E = undefined;

    if ( getdvarint( "dvar_23E676668434D769", 0 ) == 1 && _id_288D5564A47D230A.size > 0 )
    {
        _id_2C677CECD807F43E = 1;
        _id_22CE7236B68B2334 = scripts\engine\utility::array_combine( _id_22CE7236B68B2334, _id_288D5564A47D230A );
        _id_22CE7236B68B2334 = scripts\engine\utility::array_randomize( _id_22CE7236B68B2334 );
        spawnpos = _id_22CE7236B68B2334[0];
    }

    level thread _id_EC48A99C32F94620( spawnpos, 1 );
}

_id_EC48A99C32F94620( spawnpos, waittime )
{
    if ( isdefined( waittime ) )
        wait( waittime );

    tracestart = spawnpos + ( 0, 0, 64 );
    _id_8B39E5984DA1FFAF = spawnpos + ( 0, 0, -64 );
    trace = scripts\engine\trace::ray_trace( tracestart, _id_8B39E5984DA1FFAF, undefined, scripts\engine\trace::create_default_contents( 1 ) );
    spawnpos = trace["position"] + ( 0, 0, 30 );
    _id_5D055C219E88A1CB = spawnstruct();
    _id_5D055C219E88A1CB.angles = ( 0, 0, 0 );
    _id_5D055C219E88A1CB.visuals = spawn( "script_model", spawnpos );
    _id_5D055C219E88A1CB.visuals setmodel( "art_stadium_ball" );
    _id_5D055C219E88A1CB.visuals dontinterpolate();
    _id_5D055C219E88A1CB.resetposition = spawnpos;
    _id_5D055C219E88A1CB._id_2BBF24623E85009B = 1;
    _id_5D055C219E88A1CB.onreset = ::onsoccerballreset;
    _id_5D055C219E88A1CB._id_7AB15A1BE4CB821B = ::_id_7AB15A1BE4CB821B;
    _id_5D055C219E88A1CB._id_5C83A6B4C46D2FF5 = ::_id_AD9983F20F50CF14;
    angles = ( 0, 30, 0 );
    up = anglestoup( angles );
    forward = anglestoforward( angles );

    if ( getdvar( "dvar_EF237DA69BB64EF6" ) == "mp_m_stadium" )
        _id_F8048727716242B0 = up * 500 + ( 0, 0, 80 );
    else
        _id_F8048727716242B0 = up * 50 + ( 0, 0, 80 );

    waittillframeend;
    scripts\mp\flags::gameflagwait( "prematch_done" );
    _id_5D055C219E88A1CB.visuals physicslaunchserver( _id_5D055C219E88A1CB.visuals.origin, _id_F8048727716242B0 );
    _id_5D055C219E88A1CB thread outofboundswatcher();
    _id_5D055C219E88A1CB thread _id_5E8D33789DD33052();

    if ( getdvarint( "dvar_C8724EBC0F08EC3E", 1 ) == 1 )
        _id_5D055C219E88A1CB thread _id_A21AD1174231D156();

    if ( isdefined( _id_5D055C219E88A1CB._id_5C83A6B4C46D2FF5 ) )
        _id_5D055C219E88A1CB [[ _id_5D055C219E88A1CB._id_5C83A6B4C46D2FF5 ]]();

    level._id_1B6B55EFA67BA7A8[level._id_1B6B55EFA67BA7A8.size] = _id_5D055C219E88A1CB;
}

_id_AD9983F20F50CF14()
{
    self.visuals thread scripts\mp\utility\entity::register_physics_collisions();
    self.visuals physics_registerforcollisioncallback();
    scripts\mp\utility\entity::register_physics_collision_func( self.visuals, ::ball_impact_sounds );
}

ball_impact_sounds( _id_C92EF281C1D335FC, body0, body1, flag0, flag1, position, normal, _id_D71630B8BAF84FA8, _id_0B941BAEEBCA428D )
{
    _id_212A44A5393C3B34 = _id_C92EF281C1D335FC physics_getbodyid( 0 );
    vel = physics_getbodylinvel( _id_212A44A5393C3B34 );
    _id_324845ADC7297688 = length( vel );

    if ( isdefined( _id_C92EF281C1D335FC.playing_sound ) || _id_324845ADC7297688 < 70 )
        return;

    _id_C92EF281C1D335FC endon( "death" );
    _id_C92EF281C1D335FC.playing_sound = 1;
    _id_895F3C282BC9FC68 = physics_getsurfacetypefromflags( flag1 );
    surfacetype = getsubstr( _id_895F3C282BC9FC68["name"], 9 );

    if ( surfacetype == "user_terrain1" )
        _id_C92EF281C1D335FC playsound( "soc_ball_bounce_small" );
    else if ( _id_324845ADC7297688 < 180 )
        _id_C92EF281C1D335FC playsurfacesound( "soc_ball_bounce_small", surfacetype );
    else if ( _id_324845ADC7297688 < 260 )
        _id_C92EF281C1D335FC playsurfacesound( "soc_ball_bounce_med", surfacetype );
    else
        _id_C92EF281C1D335FC playsurfacesound( "soc_ball_bounce_large", surfacetype );

    wait 0.1;
    _id_C92EF281C1D335FC.playing_sound = undefined;
}

onsoccerballreset( _id_8FA61D7D6CED991D )
{
    self.ignorereset = 1;

    if ( !istrue( _id_8FA61D7D6CED991D ) )
    {
        wait 0.5;
        self.visuals playsound( "soc_ball_vanish" );
        playfx( level._id_F851D61F84F9A7B9["vanish"], self.visuals.origin );
    }
    else
    {
        wait 0.1;
        playfx( level._id_F851D61F84F9A7B9["vanish"], self.visuals.origin );
    }

    self.visuals hide();
    wait 1;
    self.visuals.origin = self.resetposition;
    angles = ( 0, 30, 0 );
    up = anglestoup( angles );
    forward = anglestoforward( angles );

    if ( level.mapname == "mp_m_stadium" )
        _id_F8048727716242B0 = up * 500 + ( 0, 0, 80 );
    else
        _id_F8048727716242B0 = up * 50 + ( 0, 0, 80 );

    self.visuals show();
    self.visuals physicslaunchserver( self.visuals.origin, _id_F8048727716242B0 );
    self.ignorereset = 0;

    if ( isdefined( self._id_5C83A6B4C46D2FF5 ) )
        self [[ self._id_5C83A6B4C46D2FF5 ]]();
}

_id_7AB15A1BE4CB821B( goal )
{
    if ( istrue( self.ignorereset ) )
    {
        self.ignorereset = 0;
        return;
    }

    if ( game["switchedsides"] )
    {
        _id_200A113A1E7807EB = scripts\mp\utility\game::getotherteam( goal.team )[0];

        if ( _id_200A113A1E7807EB == "allies" )
        {
            game["axisGoals"]++;
            _id_2724EA192F3E906D = "goal_1";
        }
        else
        {
            game["alliesGoals"]++;
            _id_2724EA192F3E906D = "goal_2";
        }
    }
    else
    {
        _id_200A113A1E7807EB = goal.team;

        if ( _id_200A113A1E7807EB == "allies" )
        {
            game["alliesGoals"]++;
            _id_2724EA192F3E906D = "goal_2";
        }
        else
        {
            game["axisGoals"]++;
            _id_2724EA192F3E906D = "goal_1";
        }
    }

    if ( isdefined( _id_2724EA192F3E906D ) )
        scripts\engine\utility::exploder( _id_2724EA192F3E906D );

    _id_CD96AFF84BCC3247 = "tv_goal";

    if ( isdefined( _id_CD96AFF84BCC3247 ) )
        scripts\engine\utility::exploder( _id_CD96AFF84BCC3247 );

    goal._id_4F853E8E6740B229++;
    level _id_2CEFFEF2D682C49E( goal );
    goal thread _id_F0B4B85FD224BCE2();

    if ( scripts\mp\utility\game::getgametype() == "arena" )
    {
        foreach ( player in level.players )
        {
            if ( player.team == _id_200A113A1E7807EB )
            {
                if ( player.team == "allies" )
                    player thread _id_B6B6CAB8242EB686( "dx_mpa_rutl_summer_game_goal" + scripts\engine\utility::random( level._id_17B1839CA513E9BA ), "summer_game_goal", 2, "soccer_goal_them" );
                else
                    player thread _id_B6B6CAB8242EB686( "dx_mpa_uktl_summer_game_goal" + scripts\engine\utility::random( level._id_17B1839CA513E9BA ), "summer_game_goal", 2, "soccer_goal_them" );

                continue;
            }

            if ( player.team == "allies" )
            {
                player thread _id_B6B6CAB8242EB686( "dx_mpa_uktl_summer_game_goal" + scripts\engine\utility::random( level._id_17B1839CA513E9BA ), "summer_game_goal", 2, "soccer_goal_us" );
                continue;
            }

            player thread _id_B6B6CAB8242EB686( "dx_mpa_rutl_summer_game_goal" + scripts\engine\utility::random( level._id_17B1839CA513E9BA ), "summer_game_goal", 2, "soccer_goal_us" );
        }
    }
    else
    {
        foreach ( player in level.players )
        {
            if ( player.team == "allies" )
            {
                player thread _id_B6B6CAB8242EB686( "dx_mpa_uktl_summer_game_goal" + scripts\engine\utility::random( level._id_17B1839CA513E9BA ), "summer_game_goal", 2, "soccer_goal_us" );
                continue;
            }

            player thread _id_B6B6CAB8242EB686( "dx_mpa_rutl_summer_game_goal" + scripts\engine\utility::random( level._id_17B1839CA513E9BA ), "summer_game_goal", 2, "soccer_goal_us" );
        }
    }

    self.visuals thread _id_F0F8E34F2D693727();
    _id_915E8FB432A95DFB = self.visuals getlinkedchildren();

    foreach ( item in _id_915E8FB432A95DFB )
    {
        if ( isdefined( item ) )
            item unlink( 1 );
    }

    if ( isdefined( self.onreset ) )
        self thread [[ self.onreset ]]( 1 );

    if ( goal._id_4F853E8E6740B229 >= 10 && isdefined( game["multiBall"] ) && !game["multiBall"] || getdvarint( "dvar_9FC6CEDB80CFD5F7", 0 ) == 1 && isdefined( game["multiBall"] ) && !game["multiBall"] )
    {
        game["multiBall"] = 1;

        foreach ( player in level.players )
            player thread scripts\mp\hud_message::showsplash( "soccer_multiball" );

        if ( level._id_288D5564A47D230A.size > 0 )
        {
            _id_5523D1E44F1BEB9C = getdvarint( "dvar_71C708CA0182656B", 3 );

            for ( _id_AC0E594AC96AA3A8 = 0; _id_AC0E594AC96AA3A8 < _id_5523D1E44F1BEB9C; _id_AC0E594AC96AA3A8++ )
                _id_EC48A99C32F94620( level._id_288D5564A47D230A[_id_AC0E594AC96AA3A8] );
        }
    }
}

_id_F0F8E34F2D693727()
{
    self playsound( "soc_ball_explode" );
    wait 1.5;
    self playsound( "soc_ball_goal_music" );
}

_id_F0B4B85FD224BCE2( _id_578A7FA223BECDE2, waittime )
{
    for ( _id_AC0E594AC96AA3A8 = 0; _id_AC0E594AC96AA3A8 < min( self._id_4F853E8E6740B229, 10 ); _id_AC0E594AC96AA3A8++ )
    {
        playfx( level._id_B6E1C0B3C715B0DF["gos_fireworks"], self.trigger.origin + ( randomintrange( -100, 100 ), randomintrange( -100, 100 ), randomintrange( -25, 60 ) ), anglestoforward( self.trigger.angles + ( randomintrange( int( max( clamp( 0 - _id_AC0E594AC96AA3A8 * 5, -19, 0 ), -20 ) ), int( min( 20, 1 + _id_AC0E594AC96AA3A8 * 5 ) ) ), randomintrange( int( max( clamp( 0 - _id_AC0E594AC96AA3A8 * 5, -19, 0 ), -20 ) ), int( min( 20, 1 + _id_AC0E594AC96AA3A8 * 5 ) ) ), 0 ) ), anglestoup( self.trigger.angles + ( randomintrange( int( max( clamp( 0 - _id_AC0E594AC96AA3A8 * 5, -19, 0 ), -20 ) ), int( min( 20, 1 + _id_AC0E594AC96AA3A8 * 5 ) ) ), randomintrange( int( max( clamp( 0 - _id_AC0E594AC96AA3A8 * 5, -19, 0 ), -20 ) ), int( min( 20, 1 + _id_AC0E594AC96AA3A8 * 5 ) ) ), 0 ) ) );

        if ( istrue( _id_578A7FA223BECDE2 ) )
            level thread _id_2C3362A9F434FD8D( self.trigger.origin );

        if ( isdefined( waittime ) )
            wait( waittime );
    }
}

_id_2CEFFEF2D682C49E( goal )
{
    foreach ( struct in level._id_8BA3A46D0F5089A4 )
    {
        if ( struct._id_A160EB484AC5E768 == goal.team )
        {
            if ( goal._id_4F853E8E6740B229 >= 10 )
            {
                struct.scriptable setscriptablepartstate( "score", "10" );
                continue;
            }

            struct.scriptable setscriptablepartstate( "score", "0" + scripts\engine\utility::string( goal._id_4F853E8E6740B229 ) );
        }
    }
}

outofboundswatcher()
{
    level endon( "game_ended" );

    for (;;)
    {
        wait 0.5;

        if ( istrue( self.ignorereset ) )
            continue;

        if ( isdefined( self.resetnow ) )
        {
            self.resetnow = undefined;

            if ( isdefined( self.onreset ) )
                self thread [[ self.onreset ]]();

            continue;
        }

        for ( index = 0; index < level.radtriggers.size; index++ )
        {
            if ( !self.visuals istouching( level.radtriggers[index] ) )
                continue;

            if ( isdefined( self.onreset ) )
                self thread [[ self.onreset ]]();

            continue;
        }

        for ( index = 0; index < level.minetriggers.size; index++ )
        {
            if ( !self.visuals istouching( level.minetriggers[index] ) )
                continue;

            if ( isdefined( self.onreset ) )
                self thread [[ self.onreset ]]();

            continue;
        }

        for ( index = 0; index < level.hurttriggers.size; index++ )
        {
            if ( !self.visuals istouching( level.hurttriggers[index] ) )
                continue;

            if ( isdefined( self.onreset ) )
                self thread [[ self.onreset ]]();

            continue;
        }

        if ( istrue( level.ballallowedtriggers.size ) )
        {
            self.allowedintrigger = 0;

            foreach ( trigger in level.ballallowedtriggers )
            {
                if ( self.visuals istouching( trigger ) )
                {
                    self.allowedintrigger = 1;
                    break;
                }
            }
        }

        if ( isdefined( level.outofboundstriggers ) )
        {
            foreach ( trigger in level.outofboundstriggers )
            {
                if ( istrue( self.allowedintrigger ) )
                    break;

                if ( !self.visuals istouching( trigger ) )
                    continue;

                if ( isdefined( self.onreset ) )
                    self thread [[ self.onreset ]]();

                continue;
            }
        }

        if ( isdefined( self.autoresettime ) )
        {
            wait( self.autoresettime );

            if ( !isdefined( self.carrier ) )
            {
                if ( isdefined( self.onreset ) )
                    self thread [[ self.onreset ]]();
            }
        }
    }
}

_id_5E8D33789DD33052()
{
    level endon( "game_ended" );

    for (;;)
    {
        wait 0.25;

        if ( istrue( self.ignorereset ) )
            continue;

        if ( distancesquared( self.visuals.origin, self.resetposition ) > 9000000 )
        {
            if ( isdefined( self.onreset ) )
                self thread [[ self.onreset ]]();
        }
    }
}

_id_08F38B7A29DAD82F()
{
    _id_1D564BE0354953B0 = getentarray( "allies_goal", "targetname" );
    _id_9F9CBF678FD4238D = getentarray( "axis_goal", "targetname" );

    if ( _id_1D564BE0354953B0.size > 0 && _id_9F9CBF678FD4238D.size > 0 )
    {
        level._id_758EA12ADC8B098C = spawnstruct();
        level._id_758EA12ADC8B098C.team = "allies";
        level._id_758EA12ADC8B098C.trigger = _id_1D564BE0354953B0[0];
        level._id_758EA12ADC8B098C.entsinside = [];
        level._id_FE3A223CE9F0DC43 = spawnstruct();
        level._id_FE3A223CE9F0DC43.team = "axis";
        level._id_FE3A223CE9F0DC43.trigger = _id_9F9CBF678FD4238D[0];
        level._id_FE3A223CE9F0DC43.entsinside = [];
        level._id_FE3A223CE9F0DC43._id_4F853E8E6740B229 = 0;

        if ( !isdefined( game["roundsPlayed"] ) || isdefined( game["roundsPlayed"] ) && game["roundsPlayed"] == 0 )
        {
            game["alliesGoals"] = 0;
            level._id_758EA12ADC8B098C._id_4F853E8E6740B229 = 0;
            game["axisGoals"] = 0;
            level._id_FE3A223CE9F0DC43._id_4F853E8E6740B229 = 0;
        }
        else if ( game["switchedsides"] )
        {
            level._id_FE3A223CE9F0DC43._id_4F853E8E6740B229 = game["alliesGoals"];
            level._id_758EA12ADC8B098C._id_4F853E8E6740B229 = game["axisGoals"];
        }
        else
        {
            level._id_758EA12ADC8B098C._id_4F853E8E6740B229 = game["alliesGoals"];
            level._id_FE3A223CE9F0DC43._id_4F853E8E6740B229 = game["axisGoals"];
        }

        level._id_6FFD40B85F9BDC80 = [ level._id_FE3A223CE9F0DC43, level._id_758EA12ADC8B098C ];
        level thread _id_C3DE6082AD64DC54();
    }
    else
        level notify( "stop_soccer_goal" );
}

_id_C3DE6082AD64DC54()
{
    wait 1;
    level._id_3FF95947A34D0317 = scripts\engine\utility::getstructarray( "home", "targetname" );
    level._id_F8C5A6F236996C7C = scripts\engine\utility::getstructarray( "away", "targetname" );
    level._id_8BA3A46D0F5089A4 = scripts\engine\utility::array_combine( level._id_3FF95947A34D0317, level._id_F8C5A6F236996C7C );

    foreach ( struct in level._id_3FF95947A34D0317 )
    {
        struct.scriptable = spawn( "script_model", struct.origin );
        struct.scriptable.angles = struct.angles;
        struct.scriptable setmodel( "vfx_stadium_scoreboard_scriptable" );
        struct._id_A160EB484AC5E768 = "allies";
    }

    foreach ( struct in level._id_F8C5A6F236996C7C )
    {
        struct.scriptable = spawn( "script_model", struct.origin );
        struct.scriptable.angles = struct.angles;
        struct.scriptable setmodel( "vfx_stadium_scoreboard_scriptable" );
        struct._id_A160EB484AC5E768 = "axis";
    }

    level _id_2CEFFEF2D682C49E( level._id_758EA12ADC8B098C );
    level _id_2CEFFEF2D682C49E( level._id_FE3A223CE9F0DC43 );
}

_id_A21AD1174231D156( _id_633ED0D009B54036 )
{
    level endon( "game_ended" );
    level endon( "stop_soccer_goal" );

    while ( !isdefined( level._id_6FFD40B85F9BDC80 ) )
        waitframe();

    for (;;)
    {
        wait 0.05;

        if ( istrue( self.ignorereset ) )
            continue;

        for ( index = 0; index < level._id_6FFD40B85F9BDC80.size; index++ )
        {
            if ( !_id_6A55687E0AC4A408( level._id_6FFD40B85F9BDC80[index], self.visuals ) )
                continue;

            if ( !_id_4D41453B43A4E638( level._id_6FFD40B85F9BDC80[index], self.visuals ) )
                continue;

            entnum = self.visuals getentitynumber();
            level._id_6FFD40B85F9BDC80[index].entsinside[entnum] = self.visuals;
            self.visuals._id_D98176DB59CCA89A = level._id_6FFD40B85F9BDC80[index];

            if ( isdefined( self._id_7AB15A1BE4CB821B ) )
                [[ self._id_7AB15A1BE4CB821B ]]( level._id_6FFD40B85F9BDC80[index] );

            continue;
        }
    }
}

_id_4D41453B43A4E638( _id_633ED0D009B54036, ent )
{
    entnum = ent getentitynumber();

    if ( isdefined( _id_633ED0D009B54036.entsinside[entnum] ) )
        return 0;

    return 1;
}

_id_6A55687E0AC4A408( _id_633ED0D009B54036, ent )
{
    if ( !ent istouching( _id_633ED0D009B54036.trigger ) )
    {
        entnum = ent getentitynumber();
        _id_633ED0D009B54036.entsinside[entnum] = undefined;

        if ( isdefined( ent._id_D98176DB59CCA89A ) && ent._id_D98176DB59CCA89A == _id_633ED0D009B54036 )
            ent._id_D98176DB59CCA89A = undefined;

        return 0;
    }

    return 1;
}

_id_2C3362A9F434FD8D( origin )
{
    sound = "gos_firework_scream_sfx";
    playsoundatpos( origin, sound );
    _id_1499E7C2D69E0074 = lookupsoundlength( sound );
    wait 1.5;
    playsoundatpos( origin + ( 0, 0, 600 ), "gos_firework_explo_sfx" );
}

_id_E55C6985B99A0D78()
{
    level._id_B6E1C0B3C715B0DF["gos_fireworks"] = loadfx( "vfx/iw8_mp/gamemode/vfx_gos_firework.vfx" );
    level._id_F851D61F84F9A7B9["vanish"] = loadfx( "vfx/iw8_mp/gamemode/vfx_soccer_ball_burst.vfx" );
    level._id_F851D61F84F9A7B9["score_00"] = loadfx( "vfx/iw8_mp/level/stadium/vfx_stad_score_00.vfx" );
    level._id_F851D61F84F9A7B9["score_01"] = loadfx( "vfx/iw8_mp/level/stadium/vfx_stad_score_01.vfx" );
    level._id_F851D61F84F9A7B9["score_02"] = loadfx( "vfx/iw8_mp/level/stadium/vfx_stad_score_02.vfx" );
    level._id_F851D61F84F9A7B9["score_03"] = loadfx( "vfx/iw8_mp/level/stadium/vfx_stad_score_03.vfx" );
    level._id_F851D61F84F9A7B9["score_04"] = loadfx( "vfx/iw8_mp/level/stadium/vfx_stad_score_04.vfx" );
    level._id_F851D61F84F9A7B9["score_05"] = loadfx( "vfx/iw8_mp/level/stadium/vfx_stad_score_05.vfx" );
    level._id_F851D61F84F9A7B9["score_06"] = loadfx( "vfx/iw8_mp/level/stadium/vfx_stad_score_06.vfx" );
    level._id_F851D61F84F9A7B9["score_07"] = loadfx( "vfx/iw8_mp/level/stadium/vfx_stad_score_07.vfx" );
    level._id_F851D61F84F9A7B9["score_08"] = loadfx( "vfx/iw8_mp/level/stadium/vfx_stad_score_08.vfx" );
    level._id_F851D61F84F9A7B9["score_09"] = loadfx( "vfx/iw8_mp/level/stadium/vfx_stad_score_09.vfx" );
    level._id_F851D61F84F9A7B9["score_10"] = loadfx( "vfx/iw8_mp/level/stadium/vfx_stad_score_10.vfx" );
}

_id_DAED1651833FB1A2()
{
    game["dialog"]["summer_game_goal_1"] = "summer_game_goal_1";
    game["dialog"]["summer_game_goal_2"] = "summer_game_goal_2";
    game["dialog"]["summer_game_goal_3"] = "summer_game_goal_3";
    level._id_17B1839CA513E9BA = [ "_1", "_2", "_3" ];
}

_id_B6B6CAB8242EB686( dialog, _id_D653377138D5EFF2, time, _id_1B4ADA49A21B51CA )
{
    self notify( "goal_scored" );
    self endon( "goal_scored" );

    if ( !isdefined( level.lastteamstatustime["allies"][_id_D653377138D5EFF2] ) )
        level.lastteamstatustime["allies"][_id_D653377138D5EFF2] = 0;

    if ( gettime() < level.lastteamstatustime["allies"][_id_D653377138D5EFF2] + time * 1000 )
        return;

    self queuedialogforplayer( dialog, _id_D653377138D5EFF2, time );
    level.lastteamstatustime["allies"][_id_D653377138D5EFF2] = gettime();
    thread scripts\mp\hud_message::showsplash( _id_1B4ADA49A21B51CA );
}

snowballfighthint()
{
    self endon( "death" );

    if ( !scripts\mp\flags::gameflag( "prematch_done" ) )
    {
        thread scripts\mp\utility\print::tutorialprint( "MP_INGAME_ONLY/PRACTICE_ROUND", 5 );
        wait 6;
        scripts\mp\flags::gameflagwait( "prematch_done" );
        thread scripts\mp\utility\print::tutorialprint( "MP_INGAME_ONLY/SNOWBALL_FIGHT", 5 );
    }
    else
        thread scripts\mp\utility\print::tutorialprint( "MP_INGAME_ONLY/SNOWBALL_FIGHT", 5 );
}

_id_030DD74B21BFFFE6()
{
    if ( getdvarint( "dvar_A88F1329561BC6E1", 0 ) > 0 )
    {
        level._id_8CE8010175FB9787 = getdvarint( "dvar_A88F1329561BC6E1", 0 );
        level thread randomcarepackagedrops();
    }
}

randomcarepackagedrops()
{
    level endon( "game_ended" );
    level._id_E1619C97E3FD8A87 = [];
    level thread _id_49E45907B10122E4();
    waitframe();
    scripts\mp\flags::gameflagwait( "prematch_done" );
    wait( level._id_8CE8010175FB9787 );
    level.grnd_previouscratetypes = [];

    for (;;)
    {
        owner = undefined;
        _id_4440147083ABAF0A = 1;

        if ( scripts\mp\utility\killstreak::currentactivevehiclecount() < scripts\mp\utility\killstreak::maxvehiclesallowed() && level.fauxvehiclecount + _id_4440147083ABAF0A < scripts\mp\utility\killstreak::maxvehiclesallowed() && scripts\cp_mp\killstreaks\airdrop::getnumdroppedcrates() < 8 )
        {
            cratetype = getdropzonecratetype();
            position = _id_043C1D665B215618();

            if ( !isdefined( position ) )
                return;

            if ( cratetype == "mega" )
            {
                streakinfo = spawnstruct();
                streakinfo.cratetype = undefined;
                streakinfo.numcrates = undefined;
                streakinfo.usephysics = undefined;
                streakinfo.streakname = "airdrop_multiple";
                scripts\cp_mp\killstreaks\airdrop_multiple::airdrop_multiple_dropcrates( owner, undefined, position, randomfloat( 360 ), position, 1, streakinfo );
            }
            else
            {
                scripts\cp_mp\vehicles\vehicle_tracking::reservevehicle();
                scripts\cp_mp\killstreaks\airdrop::dropkillstreakcratefromscriptedheli( owner, undefined, cratetype, position, randomfloat( 360 ), position, 1 );
            }

            waittime = level._id_8CE8010175FB9787;
        }
        else
            waittime = 0.5;

        scripts\mp\hostmigration::waitlongdurationwithhostmigrationpause( waittime );
    }
}

getdropzonecratetype()
{
    cratetype = undefined;

    if ( !isdefined( level.grnd_previouscratetypes["mega"] ) && randomintrange( 0, 100 ) < 5 )
        cratetype = "mega";
    else
    {
        if ( level.grnd_previouscratetypes.size )
        {
            for ( _id_2C28BA9A9A351DC6 = 200; _id_2C28BA9A9A351DC6; _id_2C28BA9A9A351DC6-- )
            {
                cratetype = scripts\cp_mp\killstreaks\airdrop::getrandomkillstreak();

                if ( isdefined( level.grnd_previouscratetypes[cratetype] ) )
                {
                    cratetype = undefined;
                    continue;
                }

                break;
            }
        }

        if ( !isdefined( cratetype ) )
            cratetype = scripts\cp_mp\killstreaks\airdrop::getrandomkillstreak();
    }

    level.grnd_previouscratetypes[cratetype] = 1;

    if ( level.grnd_previouscratetypes.size == 15 )
        level.grnd_previouscratetypes = [];

    return cratetype;
}

_id_043C1D665B215618()
{
    dropposition = level._id_E1619C97E3FD8A87[0];
    level._id_E1619C97E3FD8A87[level._id_E1619C97E3FD8A87.size] = level._id_E1619C97E3FD8A87[0];
    level._id_E1619C97E3FD8A87[0] = undefined;
    level._id_E1619C97E3FD8A87 = scripts\engine\utility::array_removeundefined( level._id_E1619C97E3FD8A87 );
    return dropposition;
}

_id_49E45907B10122E4()
{
    switch ( level.mapname )
    {
        case "mp_downtown_gw":
            level._id_E1619C97E3FD8A87 = [ ( 21298, -15989, 1970 ), ( 22131, -18582, 690 ), ( 17264, -17920, 1066 ), ( 16682, -23069, 230 ), ( 21664, -23061, -108 ), ( 16208, -13686, -158 ), ( 19920, -18069, 157 ), ( 25150, -17449, -150 ), ( 27173, -14625, -200 ), ( 22696, -12784, -158 ), ( 22115, -12162, -106 ), ( 22278, -10595, 1610 ), ( 19963, -14131, 149 ), ( 20019, -11243, -194 ), ( 16711, -8999, -326 ), ( 15772, -5966, -390 ), ( 15501, -1873, -446 ), ( 19760, -1172, -449 ), ( 20464, -2047, -450 ), ( 23814, -5888, -382 ), ( 26210, -9404, -318 ), ( 30288, -8981, -358 ), ( 20781, -7208, -366 ), ( 18773, -13037, 9 ), ( 20091, -21421, -78 ), ( 23574, -14769, -134 ) ];
            break;
        case "mp_quarry2":
            level._id_E1619C97E3FD8A87 = [ ( 25008, 32313, 826 ), ( 29171, 32156, 659 ), ( 25021, 37011, 841 ), ( 30305, 35572, 526 ), ( 30779, 33427, 1009 ), ( 28913, 38886, 888 ), ( 25888, 40248, 1680 ), ( 27533, 43285, 1792 ), ( 31199, 37768, 722 ), ( 33534, 35968, 1103 ), ( 34872, 33255, 664 ), ( 33704, 39718, 1395 ), ( 35903, 39512, 879 ), ( 32265, 46424, 1450 ), ( 35084, 43008, 960 ), ( 38700, 43064, 1087 ), ( 36348, 44694, 481 ), ( 34805, 48469, 1317 ), ( 32313, 39712, 767 ) ];
            break;
        case "mp_farms2":
        case "mp_farms2_gw":
            level._id_E1619C97E3FD8A87 = [ ( 51478, -24749, -55 ), ( 50222, -21762, -335 ), ( 46165, -20091, -409 ), ( 49089, -18057, -359 ), ( 54074, -16693, -307 ), ( 52289, -14523, -335 ), ( 48361, -13952, -1 ), ( 43445, -16524, -405 ), ( 43634, -13100, -51 ), ( 47714, -14136, 141 ), ( 50498, -12784, -199 ), ( 53744, -11930, -510 ), ( 52284, -7268, -672 ), ( 49723, -7122, 438 ), ( 47540, -10295, 266 ), ( 48403, -7548, 291 ), ( 53225, -3832, -456 ), ( 49419, -4336, 141 ), ( 49419, -4336, 141 ), ( 47101, -1784, 116 ), ( 43600, -3193, 340 ), ( 42522, -6972, 30 ), ( 45959, -5516, 328 ), ( 46058, -8625, 136 ) ];
            break;
        case "mp_port2_gw":
            level._id_E1619C97E3FD8A87 = [ ( 40724, -13376, -58 ), ( 37115, -14577, -152 ), ( 35766, -19268, -508 ), ( 38572, -18749, -508 ), ( 42023, -19947, -500 ), ( 40116, -25824, -247 ), ( 38056, -23083, 240 ), ( 35024, -24401, -508 ), ( 36958, -26270, -112 ), ( 36264, -28611, -36 ), ( 38229, -28438, -452 ), ( 38304, -30376, -172 ), ( 33276, -26940, -116 ), ( 30526, -27712, -508 ), ( 29810, -29730, -508 ), ( 33689, -28898, -507 ), ( 36498, -33452, -508 ), ( 37219, -37142, -506 ), ( 34863, -34724, -318 ), ( 34304, -36576, -506 ), ( 31116, -35074, -508 ), ( 32797, -32582, -372 ) ];
            break;
        case "mp_boneyard_gw":
            level._id_E1619C97E3FD8A87 = [ ( -28661, -17966, -177 ), ( -30406, -15324, -159 ), ( -26858, -14816, 3 ), ( -26567, -8261, 17 ), ( -23466, -14624, -12 ), ( -24687, -11527, 238 ), ( -24492, -10369, 148 ), ( -25965, -11096, 27 ), ( -29884, -12919, -43 ), ( -30458, -10020, -136 ), ( -28564, -9301, 248 ), ( -29994, -6709, -208 ), ( -28156, -5883, -119 ), ( -30522, -3889, -247 ), ( -28220, -3171, -255 ), ( -25333, -4300, -242 ), ( -28106, -1937, -255 ), ( -30823, -2351, -248 ), ( -29121, -11011, -61 ) ];
            break;
        case "mp_aniyah":
            level._id_E1619C97E3FD8A87 = [ ( 2716, -158, 708 ), ( 8215, 874, 342 ), ( 6524, 1561, 316 ), ( 5827, -860, 357 ), ( 4268, -47, 452 ), ( 2305, -1994, 386 ), ( 5172, 2587, 231 ), ( 2691, 3096, 302 ), ( -910, 3497, 318 ), ( -3579, -544, 320 ), ( 2591, 1659, 545 ), ( 1033, -514, 447 ), ( -93, -2789, 169 ), ( -1301, 924, 315 ), ( -2843, 2779, 316 ) ];
            break;
        default:
            level._id_E1619C97E3FD8A87 = getcoremapdropzones();
            break;
    }

    level._id_E1619C97E3FD8A87 = scripts\engine\utility::array_randomize( level._id_E1619C97E3FD8A87 );
}

getcoremapdropzones()
{
    _id_BC115BC1BAC87A51 = [];
    _id_261D73DEE9F7F35C = getentarray( "grnd", "targetname" );

    if ( level.mapname == "mp_shipment" )
    {
        _id_49E04F87F5702F8C = [];

        foreach ( trig in _id_261D73DEE9F7F35C )
        {
            if ( trig.script_label == "1" && distance( trig.origin, ( -333, 1999, 119 ) ) < 5 )
            {
                _id_49E04F87F5702F8C[_id_49E04F87F5702F8C.size] = trig;
                continue;
            }

            if ( trig.script_label == "2" && distance( trig.origin, ( 189, 1564, 75 ) ) < 5 )
            {
                _id_49E04F87F5702F8C[_id_49E04F87F5702F8C.size] = trig;
                continue;
            }

            if ( trig.script_label == "3" && distance( trig.origin, ( -751, 2416, 81 ) ) < 5 )
            {
                _id_49E04F87F5702F8C[_id_49E04F87F5702F8C.size] = trig;
                continue;
            }

            if ( trig.script_label == "4" && distance( trig.origin, ( 165, 2420, 79 ) ) < 5 )
            {
                _id_49E04F87F5702F8C[_id_49E04F87F5702F8C.size] = trig;
                continue;
            }

            if ( trig.script_label == "5" && distance( trig.origin, ( -823, 1536, 68 ) ) < 5 )
                _id_49E04F87F5702F8C[_id_49E04F87F5702F8C.size] = trig;
        }

        _id_261D73DEE9F7F35C = scripts\engine\utility::array_remove_array( _id_261D73DEE9F7F35C, _id_49E04F87F5702F8C );
    }

    if ( _id_261D73DEE9F7F35C.size > 0 )
    {
        foreach ( trig in _id_261D73DEE9F7F35C )
            _id_BC115BC1BAC87A51[_id_BC115BC1BAC87A51.size] = trig.origin;
    }

    return _id_BC115BC1BAC87A51;
}

_id_89D441B8CCA6251D()
{
    return isdefined( level._id_8CE8010175FB9787 ) && level._id_8CE8010175FB9787 > 0;
}

_id_52343D5C1B190CF0()
{
    level._id_12226443217B5474 = getdvarint( "dvar_127490A7577F169F", 0 );
    level._id_EE05489A095DF4D1 = getdvarint( "dvar_509B01D1370107AF", 0 ) == 1;
    level._id_11D8636343EAE20C = getdvarint( "dvar_E05A6970966D8552", 0 );
    level._id_0ACCB27010DAA82D = getdvarint( "dvar_4A592B7D1EFA862D", 0 );
    level._id_1921CB8DD51A8F73 = getdvarint( "dvar_4C748C9425636394", 1 );
    level.testrandomrealismclients = getdvarint( "dvar_596700A25033A832", 0 ) == 1;
    setomnvar( "ui_realism_mode", scripts\cp_mp\utility\game_utility::_id_0B2C4B42F9236924() );

    if ( scripts\cp_mp\utility\game_utility::_id_0B2C4B42F9236924() )
    {
        if ( !scripts\cp_mp\utility\game_utility::_id_0BEFF479639E6508() )
            level.modifyplayerdamage = scripts\mp\damage::gamemodemodifyplayerdamage;

        setdvar( "dvar_3AB0313F7E723FA1", 1 );
        setdvar( "dvar_50416DF1CBB3C99A", 0 );

        if ( !scripts\mp\spawnselection::_id_167619FE3D0CFF00() )
            level.disablespawncamera = 1;

        if ( istrue( level._id_1921CB8DD51A8F73 ) )
        {
            level._id_26109C02A53CEA84 = [];
            level._id_26109C02A53CEA84["rocketlauncher"] = getdvarfloat( "dvar_02B6CEEF99F7C775", 0.75 );
            level._id_26109C02A53CEA84["sniper"] = getdvarfloat( "dvar_02B2AAEF99F38272", 0.8 );
            level._id_26109C02A53CEA84["mg"] = getdvarfloat( "dvar_0263C3EF999D0B4F", 0.85 );
            level._id_26109C02A53CEA84["rifle"] = getdvarfloat( "dvar_0274C6EF99AF1C44", 0.9 );
            level._id_26109C02A53CEA84["smg"] = getdvarfloat( "dvar_02B2A9EF99F3803F", 0.95 );
            level._id_26109C02A53CEA84["spread"] = getdvarfloat( "dvar_02B2B3EF99F3963D", 0.95 );
            level._id_26109C02A53CEA84["grenade"] = getdvarfloat( "dvar_027DB6EF99B917C2", 1.0 );
            level._id_26109C02A53CEA84["melee"] = getdvarfloat( "dvar_0263C5EF999D0FB5", 1.0 );
            level._id_26109C02A53CEA84["pistol"] = getdvarfloat( "dvar_02BFA5EF9A018BF8", 1.0 );
        }

        if ( scripts\cp_mp\utility\game_utility::_id_0BEFF479639E6508() )
        {
            if ( scripts\cp_mp\utility\game_utility::_id_6C1FCE6F6B8779D5() == "dmz" )
                setdvar( "dvar_7645E012D3BDEB5E", 11 );
            else
                setdvar( "dvar_7645E012D3BDEB5E", 10 );
        }
        else if ( scripts\mp\utility\game::getgametype() == "arm" || scripts\mp\utility\game::getgametype() == "risk" || scripts\mp\utility\game::getgametype() == "gwbomb" || scripts\mp\utility\game::getgametype() == "gwtdm" || scripts\mp\utility\game::isgroundwarcoremode() )
            setdvar( "dvar_7645E012D3BDEB5E", 9 );
        else
            setdvar( "dvar_7645E012D3BDEB5E", 8 );

        if ( !isusingmatchrulesdata() )
        {
            setdvar( "dvar_2A4EFFCAF5954D38", 0 );
            setdvar( "dvar_B1D561F9A9241E09", 30 );
            setdvar( "dvar_2922210021914DD7", 0 );
            setdvar( "dvar_E5A33D679C26221F", 4 );
            setdvar( "dvar_399F13D1217738FE", 0 );
            setdvar( "dvar_A4D532F42D919827", 0 );
            setdvar( "dvar_D75D5638785F3B09", 0 );
            setdvar( "dvar_08AD1AB9436BCCCA", 0 );
            setdvar( "dvar_28D450F7F28644B7", 0 );
            setdvar( "dvar_8A1945C94D5092C2", 0 );
        }

        _id_451A1A9BD9613164::_id_8ECE37593311858A( ::_id_3708850EAB3864C2 );
        scripts\mp\utility\spawn_event_aggregator::registeronplayerspawncallback( ::_id_3708850EAB3864C2 );
    }
}

_id_3708850EAB3864C2()
{
    if ( istrue( level.testrandomrealismclients ) )
    {
        if ( !isdefined( self.isrealismenabled ) )
        {
            if ( scripts\engine\utility::cointoss() )
            {
                self setclientomnvar( "ui_realism_hud", 1 );
                self.isrealismenabled = 1;
            }
            else
            {
                self setclientomnvar( "ui_realism_hud", 0 );
                self.isrealismenabled = 0;
            }
        }
    }
    else
        self setclientomnvar( "ui_realism_hud", scripts\cp_mp\utility\game_utility::_id_0B2C4B42F9236924() );
}

_id_7BAC8EE72285298E()
{
    _id_76A22C18960F72AF = self.origin;
    startpos = _id_76A22C18960F72AF + ( 0, 0, 14 );
    stance = self getstance();
    zoffset = 35;

    if ( stance == "prone" )
        zoffset = 14;

    if ( stance == "crouch" )
        zoffset = 25;

    _id_9C19496CE8106E6B = _id_76A22C18960F72AF + ( 0, 0, zoffset );
    randomangle = ( 0, randomfloat( 360 ), 0 );
    _id_A76189155F382805 = anglestoforward( randomangle );
    _id_A73587155F07BD39 = randomfloatrange( 30, 150 );
    _id_90128D0639A1315D = startpos + _id_A73587155F07BD39 * _id_A76189155F382805;
    _id_B809B8F732448A84 = playerphysicstrace( startpos, _id_90128D0639A1315D );

    if ( !isdefined( self._id_A25375A5AB23EACB ) )
    {
        visuals = [];
        visuals[0] = spawn( "script_model", _id_9C19496CE8106E6B );
        visuals[0] setmodel( "equipment_scavenger_bag" );
        trigger = spawn( "trigger_radius", _id_9C19496CE8106E6B, 0, 32, 32 );
        pickup = scripts\mp\gameobjects::createuseobject( "neutral", trigger, visuals, undefined, undefined, 1 );
        pickup.onuse = ::_id_75C517D33CD52B54;
        pickup.usetime = 0;
        pickup scripts\mp\gameobjects::allowuse( "any" );
        pickup.owner = self;
        self._id_A25375A5AB23EACB = pickup;
        self._id_A25375A5AB23EACB thread monitordisconnect();
    }
    else
    {
        self._id_A25375A5AB23EACB.curorigin = _id_9C19496CE8106E6B;
        self._id_A25375A5AB23EACB.visuals[0].origin = _id_9C19496CE8106E6B;
        self._id_A25375A5AB23EACB.trigger.origin = _id_9C19496CE8106E6B;
    }

    self._id_A25375A5AB23EACB thread _id_5C5358EF41543DA6( _id_9C19496CE8106E6B, _id_B809B8F732448A84 );

    if ( level._id_0ACCB27010DAA82D > 0 )
        self._id_A25375A5AB23EACB thread monitortimeout();
}

_id_5C5358EF41543DA6( startpos, endpos )
{
    self endon( "death" );
    _id_C9DFC53C7CC5876A = ( endpos - startpos ) * 25;
    self.visuals[0] physicslaunchserver( self.visuals[0].origin, _id_C9DFC53C7CC5876A );
    wait 1.0;

    if ( isdefined( self.trigger ) && isdefined( self.visuals[0] ) )
    {
        self.trigger.origin = self.visuals[0].origin;
        self.curorigin = self.visuals[0].origin;
        self.visuals[0] physicsstopserver();
    }
}

_id_75C517D33CD52B54( player, team )
{
    if ( player.health == player.maxhealth )
        return;

    player playsoundtoplayer( "br_pickup_generic", player );
    player thread _id_427B6F3ADC1B7A7D();

    if ( level._id_EE05489A095DF4D1 )
    {
        if ( level._id_11D8636343EAE20C == 0 )
            player.health = player.maxhealth;
        else
            player.health = min( player.health + level._id_11D8636343EAE20C, player.maxhealth );
    }
    else
        player notify( "force_regeneration" );

    _id_5DC0C80460E6C6BB();
}

_id_427B6F3ADC1B7A7D()
{
    self endon( "death_or_disconnect" );
    _id_EBEC497FF8B18A45 = scripts\mp\supers::getcurrentsuperref();
    _id_F344626B0E399E64 = scripts\mp\supers::issuperinuse() && isdefined( _id_EBEC497FF8B18A45 ) && _id_EBEC497FF8B18A45 == "super_deadsilence";

    if ( !_id_F344626B0E399E64 )
        self lerpfovbypreset( "zombiedefault" );

    wait 0.5;
    _id_EBEC497FF8B18A45 = scripts\mp\supers::getcurrentsuperref();
    _id_F344626B0E399E64 = scripts\mp\supers::issuperinuse() && isdefined( _id_EBEC497FF8B18A45 ) && _id_EBEC497FF8B18A45 == "super_deadsilence";

    if ( !_id_F344626B0E399E64 )
        self lerpfovbypreset( "default_2seconds" );
}

monitordisconnect()
{
    self waittill( "disconnect" );
    _id_5DC0C80460E6C6BB();
}

monitortimeout()
{
    self endon( "death" );
    self notify( "monitorTimeOut" );
    self endon( "monitorTimeOut" );
    wait( level._id_0ACCB27010DAA82D );
    _id_5DC0C80460E6C6BB();
}

_id_5DC0C80460E6C6BB()
{
    if ( isdefined( self.owner ) )
        self.owner._id_A25375A5AB23EACB = undefined;

    self.visuals[0] delete();
    scripts\mp\gameobjects::deleteuseobject();
}
