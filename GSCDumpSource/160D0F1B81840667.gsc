// IW9 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

_id_FB7271D5EE18B98D( data )
{
    level._id_9462BDE338826062 = spawnstruct();
    level._id_9462BDE338826062.time = getdvarint( "dvar_857923DD420FCA71", 180 );
    level._id_9462BDE338826062._id_89C35EB8C5FACCED = getdvarint( "dvar_1C2F5C6B8B707647", 5000 );
    level._id_9462BDE338826062._id_82CDD9A952D2158F = getdvarfloat( "dvar_AE31AB19DC1F419F", 2.0 );
    level._id_9462BDE338826062._id_F7DD2C06F9C5E900 = getdvarvector( "dvar_BCF9637617EBFF0F", ( 0, 0, 100 ) );
    level._id_1AB43167AEA344DE = [];
    game["dialog"]["hvt_accept"] = "contract_hvt_accept";
    game["dialog"]["mission_hvt_accept_first_person"] = "mission_mission_hvt_accept_first_person";
    game["dialog"]["mission_hvt_success_third_person"] = "mission_mission_hvt_success_third_person";
    game["dialog"]["mission_hvt_success_first_person"] = "mission_mission_hvt_success_first_person";
    game["dialog"]["mission_hvt_failure"] = "mission_mission_hvt_failure";
    game["dialog"]["mission_hvt_eliminated"] = "mission_mission_hvt_eliminated";
    data.funcs["onInit"] = ::_id_56EFD5B49CF193C6;
    data.funcs["onTeamAssigned"] = ::_id_91DD8857CC89DC9D;
}

_id_56EFD5B49CF193C6()
{
    return 1;
}

_id_91DD8857CC89DC9D()
{
    self.vip = self._id_0D154AC2657C5F44;
    self.vip _id_2CEDCC356F1B9FC8::setplayermostwantedextrainfo( 1 );
    level._id_1AB43167AEA344DE[level._id_1AB43167AEA344DE.size] = self.vip;
    _id_64ACB6CE534155B7::createquestobjicon( "ui_mp_br_mapmenu_icon_assassin_objective_enemy", "active", self.vip.origin + level._id_9462BDE338826062._id_F7DD2C06F9C5E900 );
    _func_D76CC64B205084A3( self.objectiveiconid, 1 );
    viphud_setupvisibility();
    time = level._id_9462BDE338826062.time;
    time = _id_64ACB6CE534155B7::_id_9B6275085FBCB8F4( time );
    _id_64ACB6CE534155B7::_id_5A15174D34F0670C( time );
    thread _id_3766066EF89F53F5( time );
    thread _id_F7538622F87D4D6C();
    thread _id_A4907641A754C6A8();
    _id_6D5ED003AF1F9612 = scripts\engine\utility::array_remove( scripts\mp\utility\teams::getteamdata( self.vip.team, "players" ), self.vip );
    _id_64ACB6CE534155B7::displaysplashtoplayers( _id_6D5ED003AF1F9612, "br_vip_quest_start_vip_team" );
    _id_64ACB6CE534155B7::displayplayersplash( self.vip, "br_vip_quest_start_tablet_finder" );
    _id_AC4C51BF033F6323 = [];

    foreach ( player in level.players )
    {
        if ( !player _id_2CEDCC356F1B9FC8::isplayeringulag() && scripts\mp\utility\player::isreallyalive( player ) && player.team != self.vip.team && distance2d( player.origin, self.vip.origin ) <= level._id_9462BDE338826062._id_89C35EB8C5FACCED )
            _id_AC4C51BF033F6323[_id_AC4C51BF033F6323.size] = player;
    }

    _id_64ACB6CE534155B7::displaysplashtoplayers( _id_AC4C51BF033F6323, "br_vip_quest_vip_spawn_alert" );
    level thread _id_2CEDCC356F1B9FC8::brleaderdialog( "hvt_accept", 1, _id_6D5ED003AF1F9612, 0, 0.5 );
    level thread _id_2CEDCC356F1B9FC8::brleaderdialogplayer( "mission_hvt_accept_first_person", self.vip, 1, 0, 0.5 );
}

_id_761664D012E7F359( success )
{
    self notify( "task_ended" );
    level notify( "calloutmarkerping_warzoneKillQuestIconGlobal_" + self.objectiveiconid );
    level._id_1AB43167AEA344DE = scripts\engine\utility::array_remove( level._id_1AB43167AEA344DE, self.vip );
    wait 1.0;
    viphud_deletehud();
    _id_64ACB6CE534155B7::_id_93663FE58D95F174( scripts\engine\utility::ter_op( istrue( success ), self.teams[0], undefined ) );
}

_id_3766066EF89F53F5( time )
{
    self endon( "task_ended" );
    level endon( "game_ended" );
    wait( time );
    params = spawnstruct();
    params.intvar = 0;
    rewards = _id_64ACB6CE534155B7::_id_D212A5E7A40D7C8D( "vip", self.teams[0], self.vip );

    if ( isdefined( rewards ) && isdefined( rewards["plunder"] ) )
        _id_64ACB6CE534155B7::_id_878EBCC241B54505( "br_vip_quest_complete", _id_64ACB6CE534155B7::_id_3D262D56274BD22E( "vip" ), rewards["plunder"], self.teams[0] );

    level thread _id_2CEDCC356F1B9FC8::brleaderdialogteamexcludeplayer( "mission_hvt_success_third_person", self.teams[0], self.vip, 1, 0, 0.5 );
    level thread _id_2CEDCC356F1B9FC8::brleaderdialogplayer( "mission_hvt_success_first_person", self.vip, 1, 0, 0.5 );
    self.vip _id_2CEDCC356F1B9FC8::setplayermostwantedextrainfo( 0 );

    foreach ( player in scripts\mp\utility\teams::getteamdata( self.teams[0], "players" ) )
        vip_respawnplayer( player, self.vip, "vip" );

    thread _id_761664D012E7F359( 1 );
}

_id_A4907641A754C6A8()
{
    self endon( "task_ended" );
    self.vip endon( "death_or_disconnect" );
    level endon( "game_ended" );

    for (;;)
    {
        wait( level._id_9462BDE338826062._id_82CDD9A952D2158F );
        _id_64ACB6CE534155B7::movequestobjicon( self.vip.origin + level._id_9462BDE338826062._id_F7DD2C06F9C5E900 );
    }
}

_id_F7538622F87D4D6C()
{
    self endon( "task_ended" );
    level endon( "game_ended" );
    self.vip waittill( "death_or_disconnect" );

    if ( isdefined( self.vip.lastkilledby ) && isplayer( self.vip.lastkilledby ) && isdefined( self.vip.lastkilledby.team ) && self.vip.lastkilledby.team != self.teams[0] )
    {
        params = spawnstruct();
        _id_501265B5FE210821 = _id_64ACB6CE534155B7::_id_D282041688C032B5( "vip" );
        params.intvar = _id_501265B5FE210821;

        foreach ( player in scripts\mp\utility\teams::getteamdata( self.vip.lastkilledby.team, "players" ) )
            player _id_6AFF3948CF4CCA03::playerplunderpickup( _id_501265B5FE210821 );

        _id_64ACB6CE534155B7::_id_878EBCC241B54505( "br_vip_quest_you_killed_the_vip", _id_64ACB6CE534155B7::_id_3D262D56274BD22E( "vip" ), _id_501265B5FE210821, self.vip.lastkilledby.team );
        level thread _id_2CEDCC356F1B9FC8::brleaderdialogteam( "mission_hvt_eliminated", self.vip.lastkilledby.team, 1, 1 );
    }

    _id_64ACB6CE534155B7::displayteamsplash( self.teams[0], "br_vip_quest_failure" );

    if ( isdefined( self.vip ) )
        self.vip _id_2CEDCC356F1B9FC8::setplayermostwantedextrainfo( 0 );

    level thread _id_2CEDCC356F1B9FC8::brleaderdialogteam( "mission_hvt_failure", self.teams[0], 1, 1 );
    thread _id_761664D012E7F359( 0 );
}

viphud_setupvisibility()
{
    objective_addalltomask( self.objectiveiconid );

    foreach ( player in level.players )
    {
        if ( !player _id_2CEDCC356F1B9FC8::isplayeringulag() && scripts\mp\utility\player::isreallyalive( player ) )
        {
            _id_64ACB6CE534155B7::showquestobjicontoplayer( player );
            continue;
        }

        _id_64ACB6CE534155B7::hidequestobjiconfromplayer( player );
    }

    foreach ( player in scripts\mp\utility\teams::getteamdata( self.teams[0], "players" ) )
    {
        if ( !player _id_2CEDCC356F1B9FC8::isplayeringulag() )
            viphud_showtoplayer( player );

        _id_64ACB6CE534155B7::hidequestobjiconfromplayer( player );
    }
}

vip_onentergulag( player )
{
    viphud_hidefromplayer( player );
}

vip_onrespawn( player )
{
    if ( player.team == self.team )
        viphud_showtoplayer( player );

    _id_64ACB6CE534155B7::showquestobjicontoplayer( player );
}

viphud_showtoplayer( player )
{
    player _id_64ACB6CE534155B7::uiobjectiveshow( "vip" );
    player _id_64ACB6CE534155B7::uiobjectivesetparameter( self.vip getentitynumber() );
    _id_64ACB6CE534155B7::showquestobjicontoplayer( player );
}

viphud_hidefromplayer( player )
{
    player _id_64ACB6CE534155B7::uiobjectivehide();
    _id_64ACB6CE534155B7::hidequestobjiconfromplayer( player );
}

viphud_deletehud()
{
    foreach ( player in scripts\mp\utility\teams::getteamdata( self.teams[0], "players" ) )
        _id_64ACB6CE534155B7::hidequestobjiconfromplayer( player );

    _id_64ACB6CE534155B7::deletequestobjicon();
}

vip_respawnplayer( player, _id_4AC881E2A39322A5, _id_DF2FBB13C226BE75 )
{
    if ( istrue( player.inlaststand ) )
        player scripts\mp\laststand::finishreviveplayer( "use_hold_revive_success", player );

    if ( !isalive( player ) && !player _id_2CEDCC356F1B9FC8::isplayerinorgoingtogulag() )
        player thread _id_67708F418B1FAC79::playergulagautowin( _id_4AC881E2A39322A5 );
    else if ( player _id_2CEDCC356F1B9FC8::isplayerinorgoingtogulag() )
        player thread _id_67708F418B1FAC79::playerpulloutofgulagwin( _id_4AC881E2A39322A5, _id_DF2FBB13C226BE75 );
}

_id_5F352FB76C54705C()
{
    if ( isdefined( level._id_1AB43167AEA344DE ) )
        return scripts\engine\utility::array_contains( level._id_1AB43167AEA344DE, self );

    return undefined;
}
