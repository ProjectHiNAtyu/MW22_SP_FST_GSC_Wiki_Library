// IW9 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

init()
{

}

_id_E3D9D27A30E4D693( bot )
{
    target = getclosestpointonnavmesh( _id_3EC57983D173D1E3() );
    return _id_0D74AE0B4AA21186::_id_FF35A4D756374EDE( "Auto Test Wander", target, "main", "", ::_id_35671B7B1A04BF58, self, ::_id_F4CAAE7E8AF9D32C );
}

_id_35671B7B1A04BF58( bot )
{
    bot._id_EAD3CB8BAB88B2B7 = ::onplayerkilled;
    bot _id_29F5EBED550B09C9( 0 );
    _id_C9E915E56C1B6170 = self._id_EC02147FEE952CE2;
    bot._id_3C59090EE220AB3D._id_EAB7D0E3D6339445 = bot.origin;
    path = undefined;
    _id_CBEF341A3AEEF001 = 32;
    _id_43A44A790145CE26 = undefined;
    _id_99DC4BF78AE2B370 = 2;
    childthread _id_6885BDFE55F8F15D( bot );
    childthread _id_E6C8677B0FB79D74( bot );
    bot botsetdifficultysetting( "slideChance", 0 );
    bot _id_40E63DD222434655::_id_9E400058EF021B03( _id_C9E915E56C1B6170, _id_CBEF341A3AEEF001 );

    for (;;)
    {
        result = _id_66823D3CF36B4A7B::_id_B564050A363F08EC( bot, _id_99DC4BF78AE2B370 );
        _id_A0EEC69077D8135E = bot _meth_B96CEA3BA44FC035();

        if ( isdefined( _id_A0EEC69077D8135E ) )
            path = _id_A0EEC69077D8135E;

        if ( result == "goal" || result == "bad_path_no_path_found" )
            break;
        else if ( result != "timeout" )
        {
            _id_43A44A790145CE26 = _id_183BC29D2DAB9FDF( result, bot, bot.origin, _id_C9E915E56C1B6170, path );

            if ( result == "bad_path_no_tac_point" || result == "off_navmesh" && !bot isskydiving() )
                bot resetposition();
            else if ( result == "bad_path_stuck" )
                bot waittill( "custom_stuck_check_finished" );

            break;
        }
    }

    self._id_0F5E6316C2383F5F = 1;
    return _id_43A44A790145CE26;
}

_id_F4CAAE7E8AF9D32C( action )
{
    if ( !istrue( action._id_0F5E6316C2383F5F ) && isalive( self ) )
        return _id_183BC29D2DAB9FDF( "unexpectly", self, self.origin );
}

onplayerkilled( _id_642470E1ABC1BBF9 )
{
    if ( !isbot( self ) )
        return;

    _id_46565AB40A4E0A85 = [];
    _id_F90358454413407F = spawnstruct();
    _id_F90358454413407F._id_A063232820588C29 = "deathPos";
    _id_F90358454413407F.origin = self.lastdeathpos;
    _id_46565AB40A4E0A85[_id_46565AB40A4E0A85.size] = _id_F90358454413407F;

    if ( isdefined( self._id_3C59090EE220AB3D._id_9A0BBF45EE5BCF80 ) )
    {
        _id_F90358454413407F = spawnstruct();
        _id_F90358454413407F._id_A063232820588C29 = "startFall";
        _id_F90358454413407F.origin = self._id_3C59090EE220AB3D._id_9A0BBF45EE5BCF80;
        _id_46565AB40A4E0A85[_id_46565AB40A4E0A85.size] = _id_F90358454413407F;
    }

    _id_183BC29D2DAB9FDF( "death", self, _id_46565AB40A4E0A85, undefined, undefined, _id_642470E1ABC1BBF9.meansofdeath );
    _id_29F5EBED550B09C9( 1 );
}

_id_6885BDFE55F8F15D( bot )
{
    _id_2530EB2DF770B9F9 = 0.5;
    _id_7B00B13D4490DEB3 = 100;
    _id_23C058E984C5A869 = bot.origin;

    for (;;)
    {
        wait( _id_2530EB2DF770B9F9 );
        _id_850A0F04F8EDABA5 = bot.origin;
        _id_81380D005F20A0EF = ( _id_23C058E984C5A869[2] - _id_850A0F04F8EDABA5[2] ) / _id_2530EB2DF770B9F9;

        if ( _id_81380D005F20A0EF > _id_7B00B13D4490DEB3 )
        {
            if ( !isdefined( bot._id_3C59090EE220AB3D._id_9A0BBF45EE5BCF80 ) )
                bot._id_3C59090EE220AB3D._id_9A0BBF45EE5BCF80 = _id_850A0F04F8EDABA5;
        }
        else
        {
            if ( isdefined( bot._id_3C59090EE220AB3D._id_9A0BBF45EE5BCF80 ) )
                _id_183BC29D2DAB9FDF( "custom_fall", bot, bot._id_3C59090EE220AB3D._id_9A0BBF45EE5BCF80, bot botgetscriptgoal(), undefined, "position->start falling" );

            bot._id_3C59090EE220AB3D._id_9A0BBF45EE5BCF80 = undefined;
        }

        _id_23C058E984C5A869 = _id_850A0F04F8EDABA5;
    }
}

_id_E6C8677B0FB79D74( bot )
{
    _id_45A16C7EDECCB500 = 10;
    _id_68C48F0A02281BE6 = 32;
    _id_B0F645BD38D985CC = 64;
    _id_23C058E984C5A869 = bot.origin;
    path = undefined;

    for (;;)
    {
        wait( _id_45A16C7EDECCB500 );
        _id_850A0F04F8EDABA5 = bot.origin;

        if ( distance( _id_23C058E984C5A869, _id_850A0F04F8EDABA5 ) < _id_68C48F0A02281BE6 )
        {
            _id_A0EEC69077D8135E = bot _meth_B96CEA3BA44FC035();

            if ( isdefined( _id_A0EEC69077D8135E ) )
                path = _id_A0EEC69077D8135E;

            _id_401C3A2E68AAB0FD = _id_C8BD37A8BFBC12AA( bot, _id_B0F645BD38D985CC );

            if ( !isdefined( _id_401C3A2E68AAB0FD ) )
                _id_401C3A2E68AAB0FD = _id_CEB2AC088A92A55E( bot, _id_B0F645BD38D985CC );

            _id_183BC29D2DAB9FDF( "custom_stuck", bot, bot.origin, bot botgetscriptgoal(), path, _id_401C3A2E68AAB0FD );
            bot resetposition();
            bot notify( "custom_stuck_check_finished" );
        }

        _id_23C058E984C5A869 = _id_850A0F04F8EDABA5;
    }
}

_id_183BC29D2DAB9FDF( _id_0889F3D7E1C1EA6B, bot, position, target, path, _id_D478708F077A4A52 )
{
    _id_444A5451F436094A = _id_0889F3D7E1C1EA6B + "; " + "bot:" + bot getentitynumber() + "; ";
    _id_444A5451F436094A = _id_444A5451F436094A + "position:";

    if ( isarray( position ) )
    {
        foreach ( pos in position )
            _id_444A5451F436094A = _id_444A5451F436094A + ( "-" + pos._id_A063232820588C29 + ":" + pos.origin );
    }
    else
        _id_444A5451F436094A = _id_444A5451F436094A + position;

    _id_444A5451F436094A = _id_444A5451F436094A + ( "; start:" + bot._id_3C59090EE220AB3D._id_EAB7D0E3D6339445 + "; " );

    if ( isdefined( target ) )
        _id_444A5451F436094A = _id_444A5451F436094A + ( "target:" + target );

    _id_444A5451F436094A = _id_444A5451F436094A + "; ";

    if ( isdefined( path ) )
    {
        _id_1C8A80E41795621D = "path: ";

        for ( _id_AC0E594AC96AA3A8 = 0; _id_AC0E594AC96AA3A8 < path.size; _id_AC0E594AC96AA3A8++ )
            _id_1C8A80E41795621D = _id_1C8A80E41795621D + path[_id_AC0E594AC96AA3A8];

        _id_444A5451F436094A = _id_444A5451F436094A + _id_1C8A80E41795621D;
    }

    _id_444A5451F436094A = _id_444A5451F436094A + "; ";

    if ( isdefined( _id_D478708F077A4A52 ) )
        _id_444A5451F436094A = _id_444A5451F436094A + ( "comment:" + _id_D478708F077A4A52 );

    _id_ACC026B91A4D7E73( _id_0889F3D7E1C1EA6B, bot, position, target, path, _id_D478708F077A4A52 );
    _id_66823D3CF36B4A7B::_id_9A0A24DE119B078A( "Wander", _id_444A5451F436094A );
    return _id_0889F3D7E1C1EA6B;
}

_id_ACC026B91A4D7E73( _id_0889F3D7E1C1EA6B, bot, position, target, path, _id_D478708F077A4A52 )
{
    _id_444A5451F436094A = "";

    switch ( _id_0889F3D7E1C1EA6B )
    {
        case "death":
            _id_ACC73B9BE635B8BE = isarray( position ) && isdefined( position[1] ) && position[1]._id_A063232820588C29 == "startFall" && position[0].origin[2] < level._id_B23F74146C0E2AD3;

            if ( _id_ACC73B9BE635B8BE )
                _id_444A5451F436094A = _id_444A5451F436094A + ( "death_bot_fell_in_hole, " + position[0]._id_A063232820588C29 + position[0].origin + ", " + position[1]._id_A063232820588C29 + position[1].origin );

            break;
        case "custom_stuck":
            if ( isdefined( _id_D478708F077A4A52 ) )
            {
                _id_444A5451F436094A = _id_444A5451F436094A + ( "custom_stuck_by_" + _id_D478708F077A4A52 );
                _id_444A5451F436094A = _id_444A5451F436094A + ( ", " + position );
            }

            break;
    }

    if ( _id_444A5451F436094A != "" )
        _id_66823D3CF36B4A7B::_id_9A0A24DE119B078A( "Wander_Bug", _id_444A5451F436094A );
}

_id_3EC57983D173D1E3()
{
    _id_3C590D0EE220B409 = min( level.br_level.br_mapbounds[0][0], level.br_level.br_mapbounds[1][0] );
    _id_C978C90E8E5AB1F7 = max( level.br_level.br_mapbounds[0][0], level.br_level.br_mapbounds[1][0] );
    _id_3C590C0EE220B1D6 = min( level.br_level.br_mapbounds[1][1], level.br_level.br_mapbounds[0][1] );
    _id_C978C80E8E5AAFC4 = max( level.br_level.br_mapbounds[1][1], level.br_level.br_mapbounds[0][1] );
    _id_3C590B0EE220AFA3 = level.br_level.c130_sealeveloverride;
    _id_C978CB0E8E5AB65D = level.br_level.c130_heightoverride;
    _id_332BFCF7ECA6F520 = ( randomfloatrange( _id_3C590D0EE220B409, _id_C978C90E8E5AB1F7 ), randomfloatrange( _id_3C590C0EE220B1D6, _id_C978C80E8E5AAFC4 ), randomfloatrange( _id_3C590B0EE220AFA3, _id_C978CB0E8E5AB65D ) );
    return getclosestpointonnavmesh( _id_332BFCF7ECA6F520 );
}

_id_29F5EBED550B09C9( enabled )
{
    self skydive_setdeploymentstatus( enabled );
    self skydive_setbasejumpingstatus( enabled );

    if ( enabled == 1 )
        self skydive_cutautodeployon();
    else
        self skydive_cutautodeployoff();
}

resetposition()
{
    if ( getdvarint( "dvar_6DCE7ACC7BC7F481", 0 ) )
        return;

    _id_332BFCF7ECA6F520 = _id_3EC57983D173D1E3();
    self setorigin( _id_332BFCF7ECA6F520 + ( 0, 0, 100 ) );
}

_id_CEB2AC088A92A55E( bot, dist )
{
    nodes = getnodesinradius( bot.origin, dist, 0 );

    foreach ( node in nodes )
    {
        if ( isdefined( node.animscript ) && issubstr( node.animscript, "ladder" ) )
            return "ladder";
    }

    return undefined;
}

_id_C8BD37A8BFBC12AA( bot, dist )
{
    _id_1F0571D36D0DF95B = navtrace( bot.origin, anglestoforward( bot.angles ) * dist + bot.origin );

    if ( istrue( _id_1F0571D36D0DF95B ) )
    {
        doors = getentitylessscriptablearray( undefined, undefined, bot.origin, dist, "door" );

        foreach ( door in doors )
        {
            _id_B2F6144C1595A8B8 = anglesdelta( door.angles, bot.angles );
            _id_C32162F8D2BF2D4D = _id_B2F6144C1595A8B8 < 100 && _id_B2F6144C1595A8B8 > 80;

            if ( _id_C32162F8D2BF2D4D )
                return scripts\engine\utility::ter_op( door scriptabledoorisclosed(), "closed_door", "opened_door" );
        }
    }

    return undefined;
}
