// IW9 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

validationerror( _id_3B3FC6A41B9C37DD, slot, item )
{
    _id_B00CC25137FA2908 = _id_3B3FC6A41B9C37DD;

    if ( isdefined( slot ) )
        _id_B00CC25137FA2908 = _id_B00CC25137FA2908 + "_" + slot;

    if ( isdefined( item ) )
        _id_B00CC25137FA2908 = _id_B00CC25137FA2908 + " - " + item;

    if ( getdvarint( "dvar_58BBCC3E1FF538D1", 0 ) == 1 )
    {

    }

    if ( getdvarint( "dvar_49F347129C31C40C", 0 ) == 1 )
    {

    }

    if ( getdvarint( "dvar_93C750A2B4A79E93", 0 ) == 1 )
        scripts\mp\class::recordvalidationinfraction();
}

isvalidattachmentunlock( _id_49E6EF3EDADD524E, _id_55F8624E7216D9AA )
{
    _id_338C04A2F19BA8B6 = getdvarint( "dvar_464624F0183DE3D0", 0 ) == 1;

    if ( _id_338C04A2F19BA8B6 )
        return scripts\mp\utility\weapon::attachmentisselectablerootname( _id_49E6EF3EDADD524E, _id_55F8624E7216D9AA );

    return 1;
}

validateloadout( loadout )
{
    if ( getdvarint( "dvar_955CA650F9A9BDEF", 0 ) == 1 )
        return loadout;

    if ( scripts\cp_mp\utility\game_utility::_id_0BEFF479639E6508() && ( scripts\mp\utility\game::getsubgametype() == "dmz" || scripts\mp\utility\game::getsubgametype() == "exgm" ) && getdvarint( "dvar_65F0EA4FF58C3FA0", 0 ) == 1 )
        return loadout;

    _id_35CCABD9AD4E542F = 0;

    if ( !_id_2669878CF5A1B6BC::_id_89497FA763D431C0( loadout.loadoutprimary ) )
        _id_35CCABD9AD4E542F = 1;
    else if ( isweaponuihidden( loadout.loadoutprimary ) )
        _id_35CCABD9AD4E542F = 1;

    _id_D70EBC5CE61F7EBE = "specialty_underkill";
    _id_6940A6D9400F329B = !perkisrestricted( _id_D70EBC5CE61F7EBE ) && scripts\engine\utility::array_contains( loadout.loadoutperks, _id_D70EBC5CE61F7EBE );

    if ( !scripts\mp\utility\weapon::iscacprimaryweapon( loadout.loadoutprimary ) && !_id_6940A6D9400F329B )
        _id_35CCABD9AD4E542F = 1;

    _id_BC72F32B1575D517 = 0;
    _id_E1388376A5BE9B75 = 0;

    if ( weaponisrestricted( loadout.loadoutprimary ) )
    {
        _id_35CCABD9AD4E542F = 1;
        _id_BC72F32B1575D517 = 1;
    }

    if ( _id_35CCABD9AD4E542F )
    {
        loadout.loadoutprimary = "iw9_ar_mike4";
        loadout.loadoutprimaryattachments = [];
        loadout.loadoutprimarycamo = "none";
        loadout.loadoutprimaryreticle = "none";
        loadout.loadoutprimaryvariantid = -1;
        loadout.loadoutprimaryattachmentids = [];
        loadout.loadoutprimarycosmeticattachment = "none";
        loadout.loadoutprimarystickers[0] = "none";
        loadout.loadoutprimarystickers[1] = "none";
        loadout.loadoutprimarystickers[2] = "none";
        loadout.loadoutprimarystickers[3] = "none";
        loadout.loadoutprimarystickers[4] = "none";
    }
    else
    {
        if ( isweaponvariantlocked( loadout.loadoutprimary, loadout.loadoutprimaryvariantid ) )
            loadout.loadoutprimaryvariantid = -1;

        for ( _id_AC0E594AC96AA3A8 = 0; _id_AC0E594AC96AA3A8 < loadout.loadoutprimaryattachments.size; _id_AC0E594AC96AA3A8++ )
        {
            attachment = loadout.loadoutprimaryattachments[_id_AC0E594AC96AA3A8];
            _id_E7BA2038935530DB = loadout.loadoutprimaryattachmentids[_id_AC0E594AC96AA3A8];

            if ( isattachmentvariantinvalid( loadout.loadoutprimary, loadout.loadoutprimaryvariantid, attachment, _id_E7BA2038935530DB ) )
                loadout.loadoutprimaryattachmentids[_id_AC0E594AC96AA3A8] = 0;

            if ( attachment != "none" && ( attachmentisrestricted( attachment, loadout.loadoutprimary ) || !isvalidattachmentunlock( loadout.loadoutprimary, attachment ) ) )
            {
                loadout.loadoutprimaryattachments[_id_AC0E594AC96AA3A8] = "none";
                _id_E1388376A5BE9B75 = 1;
            }
        }
    }

    _id_35CCABD9AD4E542F = 0;

    if ( !_id_2669878CF5A1B6BC::_id_89497FA763D431C0( loadout.loadoutsecondary ) )
        _id_35CCABD9AD4E542F = 1;
    else if ( isweaponuihidden( loadout.loadoutsecondary ) )
        _id_35CCABD9AD4E542F = 1;

    _id_E825245F4893A9A0 = "specialty_munitions_2";
    _id_DF3D6A2FFC2E83C1 = !perkisrestricted( _id_E825245F4893A9A0 ) && scripts\engine\utility::array_contains( loadout.loadoutperks, _id_E825245F4893A9A0 );

    if ( scripts\mp\utility\weapon::iscacprimaryweapon( loadout.loadoutsecondary ) && !_id_DF3D6A2FFC2E83C1 )
        _id_35CCABD9AD4E542F = 1;

    if ( weaponisrestricted( loadout.loadoutsecondary ) )
    {
        _id_35CCABD9AD4E542F = 1;
        _id_BC72F32B1575D517 = 1;
    }

    if ( _id_35CCABD9AD4E542F )
    {
        loadout.loadoutsecondary = "iw9_pi_papa220";
        loadout.loadoutsecondaryattachments = [];
        loadout.loadoutsecondarycamo = "none";
        loadout.loadoutsecondaryreticle = "none";
        loadout.loadoutsecondaryvariantid = -1;
        loadout.loadoutsecondaryattachmentids = [];
        loadout.loadoutsecondarycosmeticattachment = "none";
        loadout.loadoutsecondarystickers[0] = "none";
        loadout.loadoutsecondarystickers[1] = "none";
        loadout.loadoutsecondarystickers[2] = "none";
        loadout.loadoutsecondarystickers[3] = "none";
        loadout.loadoutsecondarystickers[4] = "none";
    }
    else
    {
        if ( isweaponvariantlocked( loadout.loadoutsecondary, loadout.loadoutsecondaryvariantid ) )
            loadout.loadoutsecondaryvariantid = -1;

        for ( _id_AC0E594AC96AA3A8 = 0; _id_AC0E594AC96AA3A8 < loadout.loadoutsecondaryattachments.size; _id_AC0E594AC96AA3A8++ )
        {
            attachment = loadout.loadoutsecondaryattachments[_id_AC0E594AC96AA3A8];
            _id_E7BA2038935530DB = loadout.loadoutsecondaryattachmentids[_id_AC0E594AC96AA3A8];

            if ( isattachmentvariantinvalid( loadout.loadoutsecondary, loadout.loadoutsecondaryvariantid, attachment, _id_E7BA2038935530DB ) )
                loadout.loadoutsecondaryattachmentids[_id_AC0E594AC96AA3A8] = 0;

            if ( attachment != "none" && ( attachmentisrestricted( attachment, loadout.loadoutsecondary ) || !isvalidattachmentunlock( loadout.loadoutsecondary, attachment ) ) )
            {
                loadout.loadoutsecondaryattachments[_id_AC0E594AC96AA3A8] = "none";
                _id_E1388376A5BE9B75 = 1;
            }
        }
    }

    _id_89BA5F57A95D1CE1 = [];
    _id_89BA5F57A95D1CE1[0] = "specialty_hustle";
    _id_89BA5F57A95D1CE1[1] = "specialty_grenade_expert";
    _id_13DB3CA1AD2DB644 = "specialty_restock";
    _id_34FDCA49E62D81EE = "specialty_quick_fix";

    foreach ( perk in loadout.loadoutperks )
    {
        if ( !scripts\mp\perks\perks::_id_F45C19871B412EA5( perk ) )
            continue;

        slot = scripts\mp\perks\perks::getperkslot( perk );

        if ( !isdefined( slot ) || slot != 1 )
        {
            for ( _id_AC0E594AC96AA3A8 = 0; _id_AC0E594AC96AA3A8 < loadout.loadoutperks.size; _id_AC0E594AC96AA3A8++ )
            {
                if ( _id_AC0E594AC96AA3A8 >= _id_89BA5F57A95D1CE1.size )
                    continue;

                loadout.loadoutperks[_id_AC0E594AC96AA3A8] = _id_89BA5F57A95D1CE1[_id_AC0E594AC96AA3A8];
            }

            break;
        }

        if ( perkisrestricted( perk ) )
        {
            for ( _id_AC0E594AC96AA3A8 = 0; _id_AC0E594AC96AA3A8 < loadout.loadoutperks.size; _id_AC0E594AC96AA3A8++ )
            {
                if ( _id_AC0E594AC96AA3A8 >= _id_89BA5F57A95D1CE1.size )
                    continue;

                loadout.loadoutperks[_id_AC0E594AC96AA3A8] = _id_89BA5F57A95D1CE1[_id_AC0E594AC96AA3A8];
            }

            break;
        }
    }

    if ( !isdefined( loadout.loadoutperks ) )
    {
        for ( _id_AC0E594AC96AA3A8 = 0; _id_AC0E594AC96AA3A8 < loadout.loadoutperks.size; _id_AC0E594AC96AA3A8++ )
        {
            if ( _id_AC0E594AC96AA3A8 >= _id_89BA5F57A95D1CE1.size )
                continue;

            loadout.loadoutperks[_id_AC0E594AC96AA3A8] = _id_89BA5F57A95D1CE1[_id_AC0E594AC96AA3A8];
        }
    }

    slot = scripts\mp\perks\perks::getperkslot( loadout._id_15F3E6DF722FB1CF );

    if ( !isdefined( slot ) || slot != 2 )
        loadout._id_15F3E6DF722FB1CF = _id_13DB3CA1AD2DB644;

    if ( perkisrestricted( loadout._id_15F3E6DF722FB1CF ) )
        loadout._id_15F3E6DF722FB1CF = _id_13DB3CA1AD2DB644;

    slot = scripts\mp\perks\perks::getperkslot( loadout._id_15F3E5DF722FAF9C );

    if ( !isdefined( slot ) || slot != 3 )
        loadout._id_15F3E5DF722FAF9C = _id_34FDCA49E62D81EE;

    if ( perkisrestricted( loadout._id_15F3E5DF722FAF9C ) )
        loadout._id_15F3E5DF722FAF9C = _id_34FDCA49E62D81EE;

    if ( killstreakisrestricted( "specialist_perk_1" ) || killstreakisrestricted( "specialist_perk_2" ) || killstreakisrestricted( "specialist_perk_3" ) )
        loadout.loadoutusingspecialist = 0;

    if ( !scripts\mp\equipment::isequipmentprimary( loadout.loadoutequipmentprimary ) || !scripts\mp\equipment::isequipmentselectable( loadout.loadoutequipmentprimary ) )
        loadout.loadoutequipmentprimary = "equip_frag";
    else if ( equipmentisrestricted( loadout.loadoutequipmentprimary ) )
    {
        loadout.loadoutequipmentprimary = "equip_frag";
        _id_BC72F32B1575D517 = 1;
    }

    if ( !scripts\mp\equipment::isequipmentsecondary( loadout.loadoutequipmentsecondary ) || !scripts\mp\equipment::isequipmentselectable( loadout.loadoutequipmentsecondary ) )
        loadout.loadoutequipmentsecondary = "equip_flash";
    else if ( equipmentisrestricted( loadout.loadoutequipmentsecondary ) )
    {
        loadout.loadoutequipmentsecondary = "equip_flash";
        _id_BC72F32B1575D517 = 1;
    }

    _id_DC5F6FAA8BB8FFFE = 0;
    _id_35BD18D6D22E7106 = [];
    _id_35BD18D6D22E7106[0] = "uav";
    _id_35BD18D6D22E7106[1] = "cruise_predator";
    _id_35BD18D6D22E7106[2] = "chopper_gunner";

    for ( _id_AC0E594AC96AA3A8 = 0; _id_AC0E594AC96AA3A8 < 3; _id_AC0E594AC96AA3A8++ )
    {
        if ( killstreakisrestricted( _id_35BD18D6D22E7106[_id_AC0E594AC96AA3A8] ) )
            _id_35BD18D6D22E7106[_id_AC0E594AC96AA3A8] = "none";
    }

    if ( loadout.loadoutkillstreak1 == "none" || loadout.loadoutkillstreak2 == "none" || loadout.loadoutkillstreak3 == "none" )
        _id_DC5F6FAA8BB8FFFE = 1;

    if ( !_id_DC5F6FAA8BB8FFFE )
    {
        _id_D442547D75DFFD09 = level._id_0B23156D776B1D85._id_038F2A11237246AC[loadout.loadoutkillstreak1];

        if ( !isdefined( _id_D442547D75DFFD09 ) || !isdefined( _id_D442547D75DFFD09._id_594AF43597023062 ) || !_id_D442547D75DFFD09._id_594AF43597023062 )
            _id_DC5F6FAA8BB8FFFE = 1;

        _id_D442547D75DFFD09 = level._id_0B23156D776B1D85._id_038F2A11237246AC[loadout.loadoutkillstreak2];

        if ( !isdefined( _id_D442547D75DFFD09 ) || !isdefined( _id_D442547D75DFFD09._id_594AF43597023062 ) || !_id_D442547D75DFFD09._id_594AF43597023062 )
            _id_DC5F6FAA8BB8FFFE = 1;

        _id_D442547D75DFFD09 = level._id_0B23156D776B1D85._id_038F2A11237246AC[loadout.loadoutkillstreak3];

        if ( !isdefined( _id_D442547D75DFFD09 ) || !isdefined( _id_D442547D75DFFD09._id_594AF43597023062 ) || !_id_D442547D75DFFD09._id_594AF43597023062 )
            _id_DC5F6FAA8BB8FFFE = 1;
    }

    if ( !_id_DC5F6FAA8BB8FFFE )
    {
        if ( killstreakisrestricted( loadout.loadoutkillstreak1 ) )
        {
            loadout.loadoutkillstreak1 = _id_35BD18D6D22E7106[0];
            _id_BC72F32B1575D517 = 1;
        }

        if ( killstreakisrestricted( loadout.loadoutkillstreak2 ) )
        {
            loadout.loadoutkillstreak2 = _id_35BD18D6D22E7106[1];
            _id_BC72F32B1575D517 = 1;
        }

        if ( killstreakisrestricted( loadout.loadoutkillstreak3 ) )
        {
            loadout.loadoutkillstreak3 = _id_35BD18D6D22E7106[2];
            _id_BC72F32B1575D517 = 1;
        }
    }

    if ( !_id_DC5F6FAA8BB8FFFE )
    {
        if ( loadout.loadoutkillstreak1 == loadout.loadoutkillstreak2 )
            _id_DC5F6FAA8BB8FFFE = 1;
        else if ( loadout.loadoutkillstreak1 == loadout.loadoutkillstreak3 )
            _id_DC5F6FAA8BB8FFFE = 1;
        else if ( loadout.loadoutkillstreak2 == loadout.loadoutkillstreak3 )
            _id_DC5F6FAA8BB8FFFE = 1;
    }

    if ( !_id_DC5F6FAA8BB8FFFE )
    {
        _id_D442547D75DFFD09 = level._id_0B23156D776B1D85._id_038F2A11237246AC[loadout.loadoutkillstreak1];

        if ( isdefined( _id_D442547D75DFFD09 ) && isdefined( _id_D442547D75DFFD09.kills ) )
            _id_C3B445B88848B00F = _id_D442547D75DFFD09.kills;
        else
            _id_C3B445B88848B00F = 0;

        _id_D442547D75DFFD09 = level._id_0B23156D776B1D85._id_038F2A11237246AC[loadout.loadoutkillstreak2];

        if ( isdefined( _id_D442547D75DFFD09 ) && isdefined( _id_D442547D75DFFD09.kills ) )
            _id_C3B446B88848B242 = _id_D442547D75DFFD09.kills;
        else
            _id_C3B446B88848B242 = 0;

        _id_D442547D75DFFD09 = level._id_0B23156D776B1D85._id_038F2A11237246AC[loadout.loadoutkillstreak3];

        if ( isdefined( _id_D442547D75DFFD09 ) && isdefined( _id_D442547D75DFFD09.kills ) )
            _id_C3B447B88848B475 = _id_D442547D75DFFD09.kills;
        else
            _id_C3B447B88848B475 = 0;

        if ( _id_C3B445B88848B00F != 0 && _id_C3B445B88848B00F == _id_C3B446B88848B242 )
            _id_DC5F6FAA8BB8FFFE = 1;
        else if ( _id_C3B445B88848B00F != 0 && _id_C3B445B88848B00F == _id_C3B447B88848B475 )
            _id_DC5F6FAA8BB8FFFE = 1;
        else if ( _id_C3B446B88848B242 != 0 && _id_C3B446B88848B242 == _id_C3B447B88848B475 )
            _id_DC5F6FAA8BB8FFFE = 1;
    }

    if ( _id_DC5F6FAA8BB8FFFE )
    {
        loadout.loadoutkillstreak1 = _id_35BD18D6D22E7106[0];
        loadout.loadoutkillstreak2 = _id_35BD18D6D22E7106[1];
        loadout.loadoutkillstreak3 = _id_35BD18D6D22E7106[2];
    }

    return loadout;
}

validateweapon( _id_7BD653180204FCA6, weapon, attachments, camo, reticle, _id_358E8D9068997399, variantid, _id_681BA90FF25200C5 )
{
    _id_CD13663AEE778DB6 = _id_2669878CF5A1B6BC::getweaponrootname( weapon );
    _id_099C561069F2EB71 = scripts\mp\utility\weapon::iscacsecondaryweapon( weapon );
    weaponslot = scripts\engine\utility::ter_op( _id_681BA90FF25200C5, "secondary", "primary" );
    _id_BDDD73591D13804E = scripts\engine\utility::ter_op( _id_681BA90FF25200C5, 4, 1 );

    if ( isdefined( weapon ) && weapon != "none" && weapon != "iw9_me_fists" )
    {
        _id_7BD653180204FCA6.pointcost++;

        if ( _id_681BA90FF25200C5 )
        {
            if ( !_id_099C561069F2EB71 )
            {
                _id_7BD653180204FCA6.pointcost++;
                _id_7BD653180204FCA6.wildcards["overkill"] = 1;
            }
        }
        else if ( _id_099C561069F2EB71 )
        {
            validationerror( "secondaryAsPrimary", undefined, weapon );
            _id_7BD653180204FCA6.invaliditems[_id_BDDD73591D13804E] = 1;
        }

        if ( !_id_2669878CF5A1B6BC::_id_89497FA763D431C0( _id_CD13663AEE778DB6 ) )
        {
            validationerror( "unknownWeapon", weaponslot, weapon );
            _id_7BD653180204FCA6.invaliditems[_id_BDDD73591D13804E] = 1;
        }
        else if ( istrue( level.weaponmapdata[_id_CD13663AEE778DB6].uihidden ) )
        {
            validationerror( "unreleasedWeapon", weaponslot, weapon );
            _id_7BD653180204FCA6.invaliditems[_id_BDDD73591D13804E] = 1;
        }

        if ( !self isitemunlocked( _id_CD13663AEE778DB6, "weapon" ) && !weaponunlocksvialoot( _id_CD13663AEE778DB6 ) )
        {
            validationerror( "lockedWeapon", weaponslot, weapon );
            _id_7BD653180204FCA6.invaliditems[_id_BDDD73591D13804E] = 1;
        }

        if ( _id_358E8D9068997399 == 0 )
        {
            if ( variantid != -1 )
            {
                validationerror( "emptyItemIDMismatch", weaponslot, weapon );
                _id_7BD653180204FCA6.invaliditems[_id_BDDD73591D13804E] = 1;
            }
        }
        else if ( variantid == -1 )
        {
            validationerror( "emptyVariantIDMismatch", weaponslot, weapon );
            _id_7BD653180204FCA6.invaliditems[_id_BDDD73591D13804E] = 1;
        }
        else
        {
            if ( !scripts\mp\loot::isweaponitem( _id_358E8D9068997399 ) )
            {
                validationerror( "nonWeaponLootItemID", weaponslot, weapon );
                _id_7BD653180204FCA6.invaliditems[_id_BDDD73591D13804E] = 1;
            }

            _id_157C94951634CBC9 = scripts\mp\loot::getlootweaponref( _id_358E8D9068997399 );

            if ( !isdefined( _id_157C94951634CBC9 ) )
            {
                validationerror( "badLootItemID", weaponslot, weapon );
                _id_7BD653180204FCA6.invaliditems[_id_BDDD73591D13804E] = 1;
            }
            else
            {
                _id_093B3002EBEF628B = scripts\mp\loot::lookupvariantref( weapon, variantid );

                if ( !isdefined( _id_093B3002EBEF628B ) )
                {
                    validationerror( "badVariantRef", weaponslot, weapon );
                    _id_7BD653180204FCA6.invaliditems[_id_BDDD73591D13804E] = 1;
                }
                else if ( _id_093B3002EBEF628B != _id_157C94951634CBC9 )
                {
                    validationerror( "lootDataMismatch", weaponslot, weapon );
                    _id_7BD653180204FCA6.invaliditems[_id_BDDD73591D13804E] = 1;
                }
            }
        }

        validateattachments( _id_7BD653180204FCA6, attachments, weapon, _id_CD13663AEE778DB6, weaponslot );
    }
}

validateattachments( _id_7BD653180204FCA6, attachments, weapon, _id_CD13663AEE778DB6, weaponslot )
{
    _id_CF4209C200F8BBF4 = _id_2669878CF5A1B6BC::weapongroupmap( weapon );
    _id_3B66374A358E4A8D = getsubstr( _id_CF4209C200F8BBF4, 7 ) + "Attach";
    _id_BDDD73591D13804E = scripts\engine\utility::ter_op( weaponslot == "primary", 2, 5 );
    _id_80553B9EE292C3E6 = 0;
    _id_38CE0EE62103D3FB = 0;
    _id_2501CA5A023E0655 = scripts\engine\utility::ter_op( weaponslot == "primary", 2, 2 );

    foreach ( _id_DF6D8E005B4B8020, attachment in attachments )
    {
        _id_3807BD1F5D9DD252 = 0;

        if ( isdefined( attachment ) && attachment != "none" )
        {
            _id_F98BAFD67872A38C = scripts\mp\utility\weapon::getattachmenttype( attachment );

            if ( isdefined( _id_F98BAFD67872A38C ) && _id_F98BAFD67872A38C != "" )
            {
                if ( isdefined( attachment ) )
                {
                    if ( _id_F98BAFD67872A38C == "rail" )
                        _id_3807BD1F5D9DD252 = 1;
                }
            }

            _id_4F4DD9B2C0BC606A = _id_CD13663AEE778DB6 + "+" + attachment;

            if ( !self isitemunlocked( _id_4F4DD9B2C0BC606A, _id_3B66374A358E4A8D ) )
            {
                validationerror( "lockedAttachment", weaponslot, attachment );
                _id_7BD653180204FCA6.invaliditems[_id_BDDD73591D13804E][_id_7BD653180204FCA6.invaliditems[_id_BDDD73591D13804E].size] = _id_DF6D8E005B4B8020;
            }

            if ( !scripts\mp\utility\weapon::attachmentisselectable( _id_CD13663AEE778DB6, attachment ) )
            {
                validationerror( "nonSelectableAttachment", weaponslot, attachment );
                _id_7BD653180204FCA6.invaliditems[_id_BDDD73591D13804E][_id_7BD653180204FCA6.invaliditems[_id_BDDD73591D13804E].size] = _id_DF6D8E005B4B8020;
            }

            if ( _id_3807BD1F5D9DD252 )
            {
                _id_80553B9EE292C3E6++;
                _id_7BD653180204FCA6.pointcost++;
            }
            else
            {
                _id_38CE0EE62103D3FB++;

                if ( _id_38CE0EE62103D3FB <= _id_2501CA5A023E0655 )
                    _id_7BD653180204FCA6.pointcost++;
                else
                {
                    _id_7BD653180204FCA6.wildcards[weaponslot + "_attachment_" + ( _id_38CE0EE62103D3FB + 1 )] = 1;
                    _id_7BD653180204FCA6.pointcost = _id_7BD653180204FCA6.pointcost + 2;
                }
            }
        }
    }

    if ( _id_38CE0EE62103D3FB > 5 )
    {
        validationerror( "tooManyAttachments", weaponslot, _id_38CE0EE62103D3FB );
        _id_7BD653180204FCA6.invaliditems[scripts\engine\utility::ter_op( weaponslot == "primary", 3, 6 )] = 1;
    }

    if ( _id_80553B9EE292C3E6 > 1 )
    {
        validationerror( "tooManyOpticAttachments", weaponslot, _id_80553B9EE292C3E6 );
        _id_7BD653180204FCA6.invaliditems[scripts\engine\utility::ter_op( weaponslot == "primary", 3, 6 )] = 1;
    }
}

validatepower( _id_7BD653180204FCA6, power, _id_17BD8FA17EE68BD6, _id_2B8EAD494644680B )
{
    _id_BDDD73591D13804E = scripts\engine\utility::ter_op( _id_17BD8FA17EE68BD6 == "primary", 7, 8 );

    if ( isdefined( power ) && power != "none" )
    {
        if ( !isdefined( level.powers[power] ) )
        {
            validationerror( "unknownPower", _id_17BD8FA17EE68BD6, power );
            _id_7BD653180204FCA6.invaliditems[_id_BDDD73591D13804E] = 1;
        }

        if ( !self isitemunlocked( power, "power" ) )
        {
            validationerror( "lockedPower", _id_17BD8FA17EE68BD6, power );
            _id_7BD653180204FCA6.invaliditems[_id_BDDD73591D13804E] = 1;
        }

        _id_A9F5EF46BA07C23F = lookuppowerslot( power );

        if ( !isdefined( _id_A9F5EF46BA07C23F ) )
        {
            validationerror( "unknownMenuPower", _id_17BD8FA17EE68BD6, power );
            _id_7BD653180204FCA6.invaliditems[_id_BDDD73591D13804E] = 1;
        }
        else if ( _id_A9F5EF46BA07C23F != _id_17BD8FA17EE68BD6 )
        {
            validationerror( "powerInWrongSlot", _id_17BD8FA17EE68BD6, power );
            _id_7BD653180204FCA6.invaliditems[_id_BDDD73591D13804E] = 1;
        }

        _id_7BD653180204FCA6.pointcost++;
    }

    if ( istrue( _id_2B8EAD494644680B ) )
    {
        _id_7BD653180204FCA6.pointcost = _id_7BD653180204FCA6.pointcost + 2;
        _id_34989FF734E79A50 = scripts\engine\utility::ter_op( _id_17BD8FA17EE68BD6 == "primary", "extra_lethal", "extra_tactical" );
        _id_7BD653180204FCA6.wildcards[_id_34989FF734E79A50] = 1;
    }
}

validateperks( _id_7BD653180204FCA6, perks, archetype )
{
    _id_BE7E0B9208F63C11 = [];
    _id_BE7E0B9208F63C11[1] = 0;
    _id_BE7E0B9208F63C11[2] = 0;
    _id_BE7E0B9208F63C11[3] = 0;

    foreach ( perk in perks )
    {
        if ( isdefined( perk ) && perk != "none" )
        {
            if ( !scripts\mp\perks\perks::_id_F45C19871B412EA5( perk ) )
            {
                validationerror( "invalidPerk", undefined, perk );
                _id_7BD653180204FCA6.invaliditems[9][_id_7BD653180204FCA6.invaliditems[9].size] = perk;
            }

            slot = scripts\mp\perks\perks::getperkslot( perk );

            if ( isdefined( slot ) )
            {
                _id_BE7E0B9208F63C11[slot]++;

                if ( _id_BE7E0B9208F63C11[slot] > 2 )
                {
                    validationerror( "tooManyPerks", slot, perk );
                    _id_7BD653180204FCA6.invaliditems[9][_id_7BD653180204FCA6.invaliditems[9].size] = perk;
                }

                if ( !self isitemunlocked( perk, "perk" ) )
                {
                    validationerror( "lockedPerk", slot, perk );
                    _id_7BD653180204FCA6.invaliditems[9][_id_7BD653180204FCA6.invaliditems[9].size] = perk;
                }

                if ( _id_BE7E0B9208F63C11[slot] == 1 )
                    _id_7BD653180204FCA6.pointcost++;
                else
                {
                    _id_7BD653180204FCA6.wildcards["extra_perk_" + slot] = 1;
                    _id_7BD653180204FCA6.pointcost = _id_7BD653180204FCA6.pointcost + 2;
                }
            }
            else if ( isdefined( level.menurigperks[perk] ) )
            {
                if ( level.menurigperks[perk].archetype != archetype )
                {
                    validationerror( "rigPerkOnWrongRig", undefined, perk );
                    _id_7BD653180204FCA6.invaliditems[9][_id_7BD653180204FCA6.invaliditems[9].size] = perk;
                }

                if ( !self isitemunlocked( perk, "trait" ) )
                {
                    validationerror( "lockedRigPerk", slot, perk );
                    _id_7BD653180204FCA6.invaliditems[9][_id_7BD653180204FCA6.invaliditems[9].size] = perk;
                }
            }
            else
            {
                validationerror( "unknownPerkType", undefined, perk );
                _id_7BD653180204FCA6.invaliditems[9][_id_7BD653180204FCA6.invaliditems[9].size] = perk;
            }
        }
    }
}

validatestreaks( _id_7BD653180204FCA6, _id_9C67970F41B09EBA, _id_9C67960F41B09C87, _id_9C67950F41B09A54 )
{
    streaks = [ _id_9C67970F41B09EBA, _id_9C67960F41B09C87, _id_9C67950F41B09A54 ];

    foreach ( _id_153FDEE861E0F06F in streaks )
    {
        if ( _id_153FDEE861E0F06F == "none" )
            continue;

        _id_159EC9A052E1EFDA = scripts\mp\killstreaks\killstreaks::getkillstreaksetupinfo( _id_153FDEE861E0F06F );

        if ( !isdefined( _id_159EC9A052E1EFDA ) )
        {
            validationerror( "unknownStreak", undefined, _id_153FDEE861E0F06F );
            _id_7BD653180204FCA6.invaliditems[12] = 1;
        }

        if ( !self isitemunlocked( _id_153FDEE861E0F06F, "killstreak" ) )
        {
            validationerror( "lockedStreak", undefined, _id_153FDEE861E0F06F );
            _id_7BD653180204FCA6.invaliditems[12] = 1;
        }
    }

    if ( _id_9C67970F41B09EBA == _id_9C67960F41B09C87 && _id_9C67970F41B09EBA != "none" )
    {
        validationerror( "duplicateStreak", undefined, _id_9C67970F41B09EBA );
        _id_7BD653180204FCA6.invaliditems[12] = 1;
    }
    else if ( _id_9C67970F41B09EBA == _id_9C67950F41B09A54 && _id_9C67970F41B09EBA != "none" )
    {
        validationerror( "duplicateStreak", undefined, _id_9C67970F41B09EBA );
        _id_7BD653180204FCA6.invaliditems[12] = 1;
    }
    else if ( _id_9C67960F41B09C87 == _id_9C67950F41B09A54 && _id_9C67960F41B09C87 != "none" )
    {
        validationerror( "duplicateStreak", undefined, _id_9C67960F41B09C87 );
        _id_7BD653180204FCA6.invaliditems[12] = 1;
    }
}

validatearchetype( _id_7BD653180204FCA6, archetype )
{
    if ( !isdefined( level.archetypeids[archetype] ) )
    {
        validationerror( "unknownArchetype", undefined, archetype );
        _id_7BD653180204FCA6.invaliditems[10] = 1;
    }

    if ( !self isitemunlocked( archetype, "rig" ) )
    {
        validationerror( "lockedArchetype", undefined, archetype );
        _id_7BD653180204FCA6.invaliditems[10] = 1;
    }
}

validatesuper( _id_7BD653180204FCA6, super )
{
    if ( !isdefined( super ) || super == "none" )
        return;

    _id_FBBB3212817D1D40 = level.superglobals.staticsuperdata[super];

    if ( !isdefined( _id_FBBB3212817D1D40 ) )
    {
        validationerror( "unknownSuper", undefined, super );
        _id_7BD653180204FCA6.invaliditems[11] = 1;
    }

    if ( !self isitemunlocked( super, "super" ) )
    {
        validationerror( "lockedSuper", undefined, super );
        _id_7BD653180204FCA6.invaliditems[11] = 1;
    }
}

validatewildcards( _id_7BD653180204FCA6 )
{

}

fixloadout( loadout )
{
    _id_B9C1CB17EE62925B = scripts\mp\class::loadout_getclassstruct();
    _id_B9C1CB17EE62925B.loadoutarchetype = "archetype_assault";
    _id_B9C1CB17EE62925B.loadoutprimary = "iw9_ar_mike4";
    return _id_B9C1CB17EE62925B;
}

fixweapon( loadout, weaponslot )
{
    if ( weaponslot == "primary" )
    {
        loadout.loadoutprimary = "iw9_ar_mike4";
        loadout.loadoutprimarycamo = "none";
        loadout.loadoutprimaryreticle = "none";
        loadout.loadoutprimarylootitemid = 0;
        loadout.loadoutprimaryvariantid = -1;

        for ( _id_40E4B9C48B36C9EC = 0; _id_40E4B9C48B36C9EC < scripts\mp\class::getmaxprimaryattachments(); _id_40E4B9C48B36C9EC++ )
            loadout.loadoutprimaryattachments[_id_40E4B9C48B36C9EC] = "none";
    }
    else
    {
        loadout.loadoutsecondary = "none";
        loadout.loadoutsecondarycamo = "none";
        loadout.loadoutsecondaryreticle = "none";
        loadout.loadoutsecondarylootitemid = 0;
        loadout.loadoutsecondaryvariantid = -1;

        for ( _id_40E4B9C48B36C9EC = 0; _id_40E4B9C48B36C9EC < scripts\mp\class::getmaxsecondaryattachments(); _id_40E4B9C48B36C9EC++ )
            loadout.loadoutsecondaryattachments[_id_40E4B9C48B36C9EC] = "none";
    }
}

fixattachment( loadout, weaponslot, _id_DF6D8E005B4B8020 )
{
    if ( weaponslot == "primary" )
        loadout.loadoutprimaryattachments[_id_DF6D8E005B4B8020] = "none";
    else
        loadout.loadoutsecondaryattachments[_id_DF6D8E005B4B8020] = "none";
}

fixpower( loadout, _id_17BD8FA17EE68BD6 )
{
    if ( _id_17BD8FA17EE68BD6 == "primary" )
    {
        loadout.loadoutpowerprimary = "none";
        loadout.loadoutextrapowerprimary = 0;
    }
    else
    {
        loadout.loadoutpowersecondary = "none";
        loadout.loadoutextrapowersecondary = 0;
    }
}

fixperk( loadout, perk )
{
    loadout.loadoutperks = scripts\engine\utility::array_remove( loadout.loadoutperks, perk );
}

fixkillstreaks( loadout )
{
    loadout.loadoutkillstreak1 = "none";
    loadout.loadoutkillstreak2 = "none";
    loadout.loadoutkillstreak3 = "none";
}

fixarchetype( loadout )
{
    loadout.loadoutarchetype = "archetype_assault";
    fixsuper( loadout );

    foreach ( perk in loadout.loadoutperks )
    {
        if ( isdefined( level.menurigperks[perk] ) )
        {
            fixperk( loadout, perk );
            break;
        }
    }
}

fixsuper( loadout )
{
    loadout.loadoutsuper = "none";
}

fixinvaliditems( loadout, invaliditems )
{
    if ( isdefined( invaliditems[0] ) )
    {
        loadout = fixloadout( loadout );
        return loadout;
    }

    if ( isdefined( invaliditems[1] ) )
        fixweapon( loadout, "primary" );
    else if ( isdefined( invaliditems[3] ) )
    {
        for ( _id_40E4B9C48B36C9EC = 0; _id_40E4B9C48B36C9EC < scripts\mp\class::getmaxprimaryattachments(); _id_40E4B9C48B36C9EC++ )
            fixattachment( loadout, "primary", _id_40E4B9C48B36C9EC );
    }
    else
    {
        foreach ( _id_40E4B9C48B36C9EC in invaliditems[2] )
            fixattachment( loadout, "primary", _id_40E4B9C48B36C9EC );
    }

    if ( isdefined( invaliditems[4] ) )
        fixweapon( loadout, "secondary" );
    else if ( isdefined( invaliditems[6] ) )
    {
        for ( _id_40E4B9C48B36C9EC = 0; _id_40E4B9C48B36C9EC < scripts\mp\class::getmaxsecondaryattachments(); _id_40E4B9C48B36C9EC++ )
            fixattachment( loadout, "secondary", _id_40E4B9C48B36C9EC );
    }
    else
    {
        foreach ( _id_40E4B9C48B36C9EC in invaliditems[5] )
            fixattachment( loadout, "secondary", _id_40E4B9C48B36C9EC );
    }

    if ( isdefined( invaliditems[7] ) )
        fixpower( loadout, "primary" );

    if ( isdefined( invaliditems[8] ) )
        fixpower( loadout, "secondary" );

    foreach ( perk in invaliditems[9] )
        fixperk( loadout, perk );

    if ( isdefined( invaliditems[10] ) )
        fixarchetype( loadout );
    else if ( isdefined( invaliditems[11] ) )
        fixarchetype( loadout );

    if ( isdefined( invaliditems[12] ) )
        fixkillstreaks( loadout );

    return loadout;
}

lookuppowerslot( _id_EF7579BE51267BDB )
{
    _id_DADAE42DC766A7F7 = tablelookup( "mp/menuPowers.csv", 3, _id_EF7579BE51267BDB, 2 );

    if ( !isdefined( _id_DADAE42DC766A7F7 ) || _id_DADAE42DC766A7F7 != "1" && _id_DADAE42DC766A7F7 != "2" )
        return undefined;

    return scripts\engine\utility::ter_op( _id_DADAE42DC766A7F7 == "1", "primary", "secondary" );
}

weaponunlocksvialoot( weaponref )
{
    return 0;
}

isweaponuihidden( _id_49E6EF3EDADD524E )
{
    return isdefined( level.weaponmapdata[_id_49E6EF3EDADD524E] ) && istrue( level.weaponmapdata[_id_49E6EF3EDADD524E].uihidden );
}

isweaponvariantlocked( _id_49E6EF3EDADD524E, variantid )
{
    if ( scripts\mp\utility\game::isanymlgmatch() )
        return 1;

    if ( !isdefined( variantid ) || variantid <= 0 )
        return 0;

    _id_A6ED1602A5107749 = _id_49E6EF3EDADD524E + "|" + variantid;
    return isdefined( level.weaponlootmapdata[_id_A6ED1602A5107749] ) && istrue( level.weaponlootmapdata[_id_A6ED1602A5107749].islocked );
}

isattachmentvariantinvalid( _id_49E6EF3EDADD524E, _id_FEDB77AAD2340743, attachment, _id_1708B873A34EEB50 )
{
    if ( scripts\mp\utility\game::isanymlgmatch() )
        return 1;

    _id_C0123FB0FCE151E5 = isdefined( _id_1708B873A34EEB50 ) && _id_1708B873A34EEB50 > 0 && attachment != "none";

    if ( !_id_C0123FB0FCE151E5 )
        return 0;

    _id_D54114842C617892 = getdvarint( "dvar_14E87EA13737CDBB", 1 );
    _id_851E7FE2EC9ADBCE = isdefined( _id_FEDB77AAD2340743 ) && _id_FEDB77AAD2340743 > 0;

    if ( !_id_D54114842C617892 && !_id_851E7FE2EC9ADBCE )
        return 1;

    _id_E88B89F1334A1506 = _id_49E6EF3EDADD524E + "|" + _id_FEDB77AAD2340743;
    _id_FFE43E0D1655060E = 0;
    _id_ABF526089D208196 = 1;

    for (;;)
    {
        _id_A6ED1602A5107749 = _id_49E6EF3EDADD524E + "|" + _id_ABF526089D208196;

        if ( !isdefined( level.weaponlootmapdata[_id_A6ED1602A5107749] ) )
            break;

        if ( _id_D54114842C617892 || _id_A6ED1602A5107749 == _id_E88B89F1334A1506 )
        {
            if ( !istrue( level.weaponlootmapdata[_id_A6ED1602A5107749].islocked ) )
            {
                if ( isdefined( level.weaponlootmapdata[_id_A6ED1602A5107749].attachcustomtoidmap ) )
                {
                    foreach ( key, id in level.weaponlootmapdata[_id_A6ED1602A5107749].attachcustomtoidmap )
                    {
                        if ( _id_1708B873A34EEB50 == id && attachment == key )
                        {
                            _id_FFE43E0D1655060E = 1;
                            break;
                        }
                    }
                }

                if ( _id_FFE43E0D1655060E )
                    break;
            }
        }

        _id_ABF526089D208196++;
    }

    return !_id_FFE43E0D1655060E;
}
