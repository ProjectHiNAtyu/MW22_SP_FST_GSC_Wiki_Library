// IW9 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

init()
{
    level._id_ADAAED38371FA15B = spawnstruct();
    level._id_ADAAED38371FA15B.currentvalue = 0;
    level._id_ADAAED38371FA15B._id_361441FD51D2BD4E = 0;
    level._id_ADAAED38371FA15B.state = 0;
    level._id_ADAAED38371FA15B._id_47EF1080427D4D3A = 255;
    level._id_ADAAED38371FA15B.targets = _id_76E26AFF7DCF2A6A();
    level._id_ADAAED38371FA15B._id_47EF1080427D4D3A = level._id_ADAAED38371FA15B.targets[0];
    _id_10A8E5C8EE552F64();
    thread publiceventsmanager();
}

_id_4AD287E0971672A6()
{
    return getdvarint( "dvar_4558ABF9D259B284", 0 ) > 0;
}

_id_76E26AFF7DCF2A6A()
{
    _id_24ABC960B59E06D0 = getdvar( "dvar_BC9D24D7D03581E3", "10 15 20" );
    _id_4FEAE575CE34EFA0 = [];

    if ( _id_24ABC960B59E06D0 != "" )
    {
        _id_394D57A3C2AE52AF = strtok( _id_24ABC960B59E06D0, " " );

        foreach ( target in _id_394D57A3C2AE52AF )
        {
            _id_063A7BA4C102C8FD = int( target );
            _id_4FEAE575CE34EFA0[_id_4FEAE575CE34EFA0.size] = _id_063A7BA4C102C8FD;
        }
    }

    return _id_4FEAE575CE34EFA0;
}

_id_8BE9BAE8228A91F7( eventname )
{
    _id_AE18D736D9768B9A = getdvar( _func_2EF675C13CA1C4AF( "dvar_ABB46656D4B7E51C", eventname, "_pe_meter_event_weights" ), "0 0 0 0 0 0 0 0" );
    _id_B9B56551E1ACFEE2 = [];

    if ( _id_AE18D736D9768B9A != "" )
    {
        _id_DDCEA577BBDD75B0 = strtok( _id_AE18D736D9768B9A, " " );

        foreach ( weight in _id_DDCEA577BBDD75B0 )
            _id_B9B56551E1ACFEE2[_id_B9B56551E1ACFEE2.size] = float( weight );
    }

    return _id_B9B56551E1ACFEE2;
}

_id_C6B950C21813B5CD()
{
    _id_C8693EECDD0B3E54 = level._id_ADAAED38371FA15B._id_361441FD51D2BD4E;
    _id_C8693EECDD0B3E54 = clamp( _id_C8693EECDD0B3E54, 0, level._id_ADAAED38371FA15B.targets.size - 1 );
    return int( _id_C8693EECDD0B3E54 );
}

publiceventsmanager()
{
    level endon( "cancel_public_event" );
    scripts\mp\flags::gameflagwait( "prematch_done" );
    _id_D7D7F403A8D91F44( 1 );
}

_id_2D3BA92B45FB796E()
{
    level thread _id_337BD370F7C5E6F9::choosepubliceventtype( 1, _id_C6B950C21813B5CD(), 1 );
    level._id_ADAAED38371FA15B._id_361441FD51D2BD4E = level._id_ADAAED38371FA15B._id_361441FD51D2BD4E + 1;
}

_id_0EA6052D442D444D( amount )
{
    if ( !_id_4AD287E0971672A6() )
        return;

    if ( level._id_ADAAED38371FA15B.state == 0 )
        return;

    if ( level._id_ADAAED38371FA15B.currentvalue >= level._id_ADAAED38371FA15B._id_47EF1080427D4D3A )
        return;

    if ( !isdefined( amount ) || amount <= 0 )
        scripts\mp\utility\script::demoforcesre( "PE Meter increase amount is undefined or <= 0." );
    else
    {
        _id_8F617FFD000EB682 = level._id_ADAAED38371FA15B.currentvalue + amount;
        _id_8F617FFD000EB682 = clamp( _id_8F617FFD000EB682, 0, level._id_ADAAED38371FA15B._id_47EF1080427D4D3A );

        if ( _id_8F617FFD000EB682 >= level._id_ADAAED38371FA15B._id_47EF1080427D4D3A )
        {
            _id_2D3BA92B45FB796E();
            _id_10A8E5C8EE552F64( _id_8F617FFD000EB682, undefined, 0 );
            _id_A7825C1B954E452E = getdvarint( "dvar_8BA88F3DDFD5E041", 1 );
            thread _id_4E0BEAA2B69F89D8( _id_A7825C1B954E452E );
            return;
        }

        _id_10A8E5C8EE552F64( _id_8F617FFD000EB682, undefined, undefined );
    }
}

_id_4E0BEAA2B69F89D8( waitdelay )
{
    if ( isdefined( waitdelay ) )
        wait( waitdelay );

    currentvalue = 0;
    _id_47EF1080427D4D3A = level._id_ADAAED38371FA15B.targets[_id_C6B950C21813B5CD()];
    _id_10A8E5C8EE552F64( currentvalue, _id_47EF1080427D4D3A, 1 );
}

_id_D7D7F403A8D91F44( _id_9B1941CB7354665E )
{
    _id_10A8E5C8EE552F64( undefined, undefined, _id_9B1941CB7354665E );
}

_id_3168DDA92F94DE9C()
{
    return level._id_ADAAED38371FA15B.currentvalue / level._id_ADAAED38371FA15B._id_47EF1080427D4D3A;
}

_id_10A8E5C8EE552F64( currentvalue, _id_47EF1080427D4D3A, state )
{
    if ( isdefined( currentvalue ) )
        level._id_ADAAED38371FA15B.currentvalue = currentvalue;

    if ( isdefined( _id_47EF1080427D4D3A ) )
        level._id_ADAAED38371FA15B._id_47EF1080427D4D3A = _id_47EF1080427D4D3A;

    if ( isdefined( state ) )
        level._id_ADAAED38371FA15B.state = state;

    _id_D1C3572BCA63146A = getomnvar( "ui_br_pe_meter_data" );
    _id_C8A5261A0FCA66D4 = 0;
    _id_C8A5261A0FCA66D4 = _id_C8A5261A0FCA66D4 + ( ( int( level._id_ADAAED38371FA15B.state ) & 3 ) << 16 );
    _id_C8A5261A0FCA66D4 = _id_C8A5261A0FCA66D4 + ( ( int( level._id_ADAAED38371FA15B._id_47EF1080427D4D3A ) & 255 ) << 8 );
    _id_C8A5261A0FCA66D4 = _id_C8A5261A0FCA66D4 + ( ( int( level._id_ADAAED38371FA15B.currentvalue ) & 255 ) << 0 );

    if ( _id_D1C3572BCA63146A != _id_C8A5261A0FCA66D4 )
        setomnvar( "ui_br_pe_meter_data", _id_C8A5261A0FCA66D4 );
}
