// IW9 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

init()
{
    _id_7EC7671A1E0C788F = spawnstruct();
    _id_7EC7671A1E0C788F.weight = getdvarfloat( "dvar_A5F3589998DA80AE", 1.0 );
    _id_7EC7671A1E0C788F.validatefunc = ::validatefunc;
    _id_7EC7671A1E0C788F.waitfunc = ::waitfunc;
    _id_7EC7671A1E0C788F.activatefunc = ::activatefunc;
    _id_7EC7671A1E0C788F._id_0F4FD1F55EC89DED = ::_id_0F4FD1F55EC89DED;
    _id_7EC7671A1E0C788F._id_C9E871D29702E8CF = ::_id_C9E871D29702E8CF;
    _id_7EC7671A1E0C788F._id_D72A1842C5B57D1D = getdvarint( "dvar_64910BCD2CE10275", 2 );
    _id_7EC7671A1E0C788F._id_F0F6529C88A18128 = _id_337BD370F7C5E6F9::_id_4634160166FB7F8B( "restock", "0    5   5   5    0   0   0   0" );
    _id_7EC7671A1E0C788F._id_B9B56551E1ACFEE2 = _id_294DDA4A4B00FFE3::_id_8BE9BAE8228A91F7( "restock" );
    _id_337BD370F7C5E6F9::registerpublicevent( 7, _id_7EC7671A1E0C788F );
}

_id_C9E871D29702E8CF()
{
    game["dialog"]["power_up_field_resupply"] = "power_up_field_resupply";
    level._id_BD006676148E6C40 = [];
}

validatefunc()
{
    return 1;
}

waitfunc()
{
    level endon( "game_ended" );
    level endon( "cancel_public_event" );
}

activatefunc()
{
    level endon( "game_ended" );

    if ( scripts\cp_mp\utility\game_utility::_id_FA7BFCC1D68B7B73() )
    {
        _id_2EFB51922DE20A87();
        return;
    }

    foreach ( instance in level._id_BD006676148E6C40 )
    {
        if ( instance.type == "br_reusable_loot_cache" )
        {
            instance setscriptablepartstate( "body", "vfx9" );
            _id_1E58696CD40D076A = getdvarint( "dvar_DAC996C3F0F8CA02", 3 );
            instance._id_F285AFDDD595B316 = ( instance._id_F285AFDDD595B316 + 1 ) % _id_1E58696CD40D076A;
            instance notify( "closed" );
            _id_5534E9F86D0272DD = "closing";
        }
        else
            _id_5534E9F86D0272DD = "closed_usable";

        instance setscriptablepartstate( "body", _id_5534E9F86D0272DD );
        instance _id_F929DBB719836091();
        instance _id_C23984C8AF54D944();
    }
}

_id_0F4FD1F55EC89DED()
{

}

_id_F929DBB719836091()
{
    level endon( "game_ended" );
    self endon( "death" );

    switch ( self.type )
    {
        case "br_loot_cache_lege":
        case "br_loot_cache":
            if ( isdefined( self._id_9632642B41DAD704 ) )
                self.contents = self._id_9632642B41DAD704;

            break;
        default:
            return;
    }
}

_id_A5CBF2004CED4597()
{
    return istrue( level._id_B06BB395C37B7AB8 ) && getdvarfloat( "dvar_A5F3589998DA80AE", 0 ) || istrue( level._id_337628AE96A92FF2 );
}

_id_C23984C8AF54D944()
{
    if ( scripts\engine\utility::array_contains( level._id_BD006676148E6C40, self ) )
        level._id_BD006676148E6C40 = scripts\engine\utility::array_remove( level._id_BD006676148E6C40, self );
}

_id_2EFB51922DE20A87()
{
    if ( !isdefined( level._id_BD006676148E6C40 ) )
        level._id_BD006676148E6C40 = [];

    foreach ( instance in level._id_BD006676148E6C40 )
    {
        if ( instance.type != "br_reusable_loot_cache" )
            continue;

        instance setscriptablepartstate( "body", "closed_usable" );
        instance.contents = instance._id_9632642B41DAD704;
        instance _id_C23984C8AF54D944();
    }
}
