// IW9 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

outlineenableforall( _id_F20913FEC7561C5F, hudoutlineassetname, prioritygroup )
{
    playersvisibleto = level.players;
    priority = scripts\mp\outline::outlineprioritygroupmap( prioritygroup );
    return scripts\mp\outline::outlineenableinternal( _id_F20913FEC7561C5F, playersvisibleto, hudoutlineassetname, priority, "ALL" );
}

outlineenableforteam( _id_F20913FEC7561C5F, _id_00FA3B23D51C2DC7, hudoutlineassetname, prioritygroup, _id_6B0EE97314AED333 )
{
    if ( scripts\mp\utility\teams::isgameplayteam( _id_00FA3B23D51C2DC7 ) )
        playersvisibleto = scripts\mp\utility\teams::getteamdata( _id_00FA3B23D51C2DC7, "players" );
    else
        playersvisibleto = [];

    if ( isdefined( _id_6B0EE97314AED333 ) && isdefined( _id_6B0EE97314AED333.team ) && _id_6B0EE97314AED333.team == _id_00FA3B23D51C2DC7 )
        playersvisibleto = scripts\engine\utility::array_remove( playersvisibleto, _id_6B0EE97314AED333 );

    priority = scripts\mp\outline::outlineprioritygroupmap( prioritygroup );
    return scripts\mp\outline::outlineenableinternal( _id_F20913FEC7561C5F, playersvisibleto, hudoutlineassetname, priority, "TEAM", _id_00FA3B23D51C2DC7 );
}

outlineenableforsquad( _id_F20913FEC7561C5F, _id_00FA3B23D51C2DC7, squadindex, hudoutlineassetname, prioritygroup )
{
    playersvisibleto = level.squaddata[_id_00FA3B23D51C2DC7][squadindex].players;
    priority = scripts\mp\outline::outlineprioritygroupmap( prioritygroup );
    return scripts\mp\outline::outlineenableinternal( _id_F20913FEC7561C5F, playersvisibleto, hudoutlineassetname, priority, "SQUAD", _id_00FA3B23D51C2DC7, squadindex );
}

outlineenableforplayer( _id_F20913FEC7561C5F, _id_18EBEB29BB7541E3, hudoutlineassetname, prioritygroup )
{
    priority = scripts\mp\outline::outlineprioritygroupmap( prioritygroup );

    if ( isagent( _id_18EBEB29BB7541E3 ) )
        return scripts\mp\outline::outlinegenerateuniqueid();

    return scripts\mp\outline::outlineenableinternal( _id_F20913FEC7561C5F, [ _id_18EBEB29BB7541E3 ], hudoutlineassetname, priority, "ENTITY" );
}

outlinedisable( id, _id_420A996E67989DC4 )
{
    scripts\mp\outline::outlinedisableinternal( id, _id_420A996E67989DC4 );
}

outlinerefresh( _id_420A996E67989DC4 )
{
    scripts\mp\outline::outlinerefreshinternal( _id_420A996E67989DC4 );
}

initoutlineoccluders()
{
    level.outlineoccluders = [];
    level.outlineoccludersid = 0;
}

addoutlineoccluder( position, radius )
{
    _id_F676533B6410938E = spawnstruct();
    _id_F676533B6410938E.position = position;
    _id_F676533B6410938E.radius = radius;
    id = level.outlineoccludersid;
    level.outlineoccluders[id] = _id_F676533B6410938E;
    level.outlineoccludersid++;
    return id;
}

removeoutlineoccluder( id )
{
    level.outlineoccluders[id] = undefined;
}

outlineoccluded( startpoint, endpoint )
{
    foreach ( occluder in level.outlineoccluders )
    {
        if ( !isdefined( occluder ) || !isdefined( occluder.position ) || !isdefined( occluder.radius ) )
            continue;

        if ( scripts\engine\math::segmentvssphere( startpoint, endpoint, occluder.position, occluder.radius ) )
            return 1;
    }

    return 0;
}

_id_6B8603FF55F4ED2C( _id_FD3CFE676991B240, attacker, _id_9CC7D33E2E2EBFEF, duration, _id_F106E72340798FFC, prioritygroup )
{
    if ( !isdefined( _id_9CC7D33E2E2EBFEF ) )
        _id_9CC7D33E2E2EBFEF = [ attacker ];

    if ( !isdefined( duration ) )
        duration = 1000;
    else
        duration = duration * 1000;

    if ( !isdefined( _id_F106E72340798FFC ) )
        _id_F106E72340798FFC = "snapshotgrenade";

    if ( !isdefined( prioritygroup ) )
        prioritygroup = "equipment";

    _id_7AA1FF687CFC30D1 = undefined;
    _id_7AA1FF687CFC30D1 = spawnstruct();
    _id_7AA1FF687CFC30D1.owner = attacker;
    _id_7AA1FF687CFC30D1.isalive = 1;
    _id_7AA1FF687CFC30D1.targets = [];
    _id_7AA1FF687CFC30D1.endtimes = [];
    _id_7AA1FF687CFC30D1.outlineids = [];

    foreach ( victim in _id_FD3CFE676991B240 )
    {
        entnum = victim getentitynumber();
        _id_7AA1FF687CFC30D1.targets[entnum] = victim;
        _id_7AA1FF687CFC30D1.endtimes[entnum] = gettime() + duration;
        priority = scripts\mp\outline::outlineprioritygroupmap( prioritygroup );
        _id_7AA1FF687CFC30D1.outlineids[entnum] = scripts\mp\outline::outlineenableinternal( victim, _id_9CC7D33E2E2EBFEF, _id_F106E72340798FFC, priority, "ENTITY" );
    }

    _id_7AA1FF687CFC30D1 thread _id_2F7892FD0B6B8251();
}

_id_2F7892FD0B6B8251()
{
    self endon( "death" );
    self.owner endon( "death_or_disconnect" );
    self.owner endon( "joined_team" );
    self.owner endon( "joined_spectators" );
    level endon( "game_ended" );

    if ( !istrue( self.isalive ) )
        return;

    while ( self.targets.size > 0 )
    {
        foreach ( id, target in self.targets )
        {
            target = self.targets[id];
            endtime = self.endtimes[id];
            outlineid = self.outlineids[id];

            if ( !isdefined( target ) || !scripts\mp\utility\player::isreallyalive( target ) || gettime() >= endtime )
            {
                outlinedisable( outlineid, target );

                if ( isdefined( target ) && ( isplayer( target ) || isbot( target ) ) )
                    target _hudoutlineviewmodeldisable();

                self.targets[id] = undefined;
                self.endtimes[id] = undefined;
                self.outlineids[id] = undefined;
            }
        }

        waitframe();
    }

    _id_357B6DF5A3D41E9C();
}

_id_357B6DF5A3D41E9C()
{
    self notify( "death" );
    self.isalive = 0;

    foreach ( id, target in self.targets )
    {
        target = self.targets[id];
        outlineid = self.outlineids[id];
        outlinedisable( outlineid, target );

        if ( isdefined( target ) && ( isplayer( target ) || isbot( target ) ) )
            target _hudoutlineviewmodeldisable();
    }
}

_hudoutlineviewmodeldisable()
{
    if ( !scripts\cp_mp\utility\player_utility::_isalive() )
        return;

    self hudoutlineviewmodeldisable();
}

_hudoutlineviewmodelenable( hudoutlineassetname, _id_DAFD99B070FB282A )
{
    if ( !isdefined( _id_DAFD99B070FB282A ) )
        _id_DAFD99B070FB282A = 0;

    if ( !isplayer( self ) )
    {

    }

    if ( !_id_DAFD99B070FB282A && !scripts\cp_mp\utility\player_utility::_isalive() )
    {

    }

    if ( _id_DAFD99B070FB282A && !scripts\cp_mp\utility\player_utility::_isalive() )
    {
        thread hudoutlineviewmodelenableonnextspawn( hudoutlineassetname );
        return;
    }

    self hudoutlineviewmodelenable( hudoutlineassetname );
}

hudoutlineviewmodelenableonnextspawn( hudoutlineassetname )
{
    level endon( "game_ended" );
    self waittill( "spawned" );

    if ( !isdefined( self ) )
        return;

    if ( !scripts\cp_mp\utility\player_utility::_isalive() )
        return;

    if ( !isplayer( self ) )
        return;

    self hudoutlineviewmodelenable( hudoutlineassetname );
}
