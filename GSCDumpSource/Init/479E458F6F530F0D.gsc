// IW9 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

_id_58BF160252F94E21()
{
    if ( isdefined( level._id_216A5E72460DE468 ) )
        return;

    level._id_216A5E72460DE468 = 1;
    level._id_BCB3E1F6F7CD3CB7 = spawnstruct();
    level._id_BCB3E1F6F7CD3CB7._id_2B6807C7DF9A2B2D = scripts\engine\utility::_id_21A6A1C613B50A28( [], 4000 );
}

_id_60CBA38635FD35CB( equipmentref, _id_CBB2B3D05E48BD27 )
{
    if ( equipmentref != "equip_geigercounter" )
        return;

    _id_58BF160252F94E21();
    self notifyonplayercommand( "pullout_gc", "+smoke" );
    self notify( "geigercounter_take" );
    thread _id_7E40241842784520();
    _id_C8B79F6694C62EE8( -1.0 );
}

_id_BDD02627BCAFE359( equipmentref, _id_CBB2B3D05E48BD27 )
{
    if ( equipmentref != "equip_geigercounter" )
        return;

    self notifyonplayercommandremove( "pullout_gc", "+smoke" );
    self notify( "geigercounter_take" );
    _id_C8B79F6694C62EE8( -1.0 );
}

_id_3D5C1674387C936E( grenade )
{
    waitframe();

    if ( isdefined( grenade ) )
        grenade delete();

    self notify( "geigercounter_putaway" );
    _id_CE0FEF2F2C7F1717();
}

_id_7E40241842784520()
{
    self endon( "disconnect" );
    self notify( "geigercounter_watchForDevicePullout" );
    self endon( "geigercounter_watchForDevicePullout" );
    _id_C05958D616DDF1C5 = spawnstruct();
    childthread _id_9B3C029182BF2647( _id_C05958D616DDF1C5 );
    childthread _id_F668EED31B686B60( _id_C05958D616DDF1C5 );

    for (;;)
    {
        death = istrue( _id_C05958D616DDF1C5.death );
        take = istrue( _id_C05958D616DDF1C5.take );
        _id_4B47429F8D0D3EE5 = istrue( _id_C05958D616DDF1C5._id_4B47429F8D0D3EE5 );

        if ( death || take )
        {
            self notify( "geigercounter_watchRaceEnd" );
            return;
        }

        if ( istrue( self.inlaststand ) )
        {
            waitframe();
            continue;
        }

        if ( !isdefined( self._id_BCB3E1F6F7CD3CB7 ) )
            self._id_BCB3E1F6F7CD3CB7 = spawnstruct();

        self._id_BCB3E1F6F7CD3CB7._id_E91C9347E638750D = _id_EFF6D6DB587F143D();

        if ( !isdefined( self._id_BCB3E1F6F7CD3CB7._id_E91C9347E638750D ) )
        {
            waitframe();
            continue;
        }

        _id_01E331291FA3BD60 = _id_296CAD0FB60AB083( self._id_BCB3E1F6F7CD3CB7._id_E91C9347E638750D );
        _id_D9E2E25D86106F0F = 0;

        if ( _id_4385C3A2905EEF3B( self, _id_01E331291FA3BD60 ) )
            _id_D9E2E25D86106F0F = 1;

        if ( _id_D9E2E25D86106F0F )
        {
            if ( getweaponbasename( self getheldoffhand() ) == "geiger_counter_mp" )
            {
                self._id_BCB3E1F6F7CD3CB7._id_4B47429F8D0D3EE5 = 1;
                self._id_BCB3E1F6F7CD3CB7._id_F458338F4188859E = _id_F6F6E00677F36E98( _id_01E331291FA3BD60, self._id_BCB3E1F6F7CD3CB7._id_E91C9347E638750D );

                if ( !isdefined( self._id_BCB3E1F6F7CD3CB7._id_7D4AF218F4963C47 ) )
                    self._id_BCB3E1F6F7CD3CB7._id_7D4AF218F4963C47 = 0.0;

                if ( istrue( _id_D9E2E25D86106F0F ) )
                {
                    _id_C8B79F6694C62EE8( clamp( 1.4 - self._id_BCB3E1F6F7CD3CB7._id_F458338F4188859E, 0.0, 1.4 ) );

                    if ( self._id_BCB3E1F6F7CD3CB7._id_7D4AF218F4963C47 >= self._id_BCB3E1F6F7CD3CB7._id_F458338F4188859E )
                    {
                        _id_018AD59D3ABD30F4();
                        self._id_BCB3E1F6F7CD3CB7._id_7D4AF218F4963C47 = 0;
                    }
                }

                self._id_BCB3E1F6F7CD3CB7._id_7D4AF218F4963C47 = self._id_BCB3E1F6F7CD3CB7._id_7D4AF218F4963C47 + level.framedurationseconds;
            }
            else
                _id_C8B79F6694C62EE8( -0.25 );
        }
        else
            _id_C8B79F6694C62EE8( -1.0 );

        waitframe();
    }
}

_id_A9D03825299DD6BF()
{
    if ( getweaponbasename( self getheldoffhand() ) == "geiger_counter_mp" )
        return 1;

    return 0;
}

_id_9B3C029182BF2647( _id_C05958D616DDF1C5 )
{
    self endon( "geigercounter_watchRaceEnd" );
    self waittill( "death" );
    _id_C05958D616DDF1C5.death = 1;
    self notify( "geigercounter_watchRaceStart" );
}

_id_F668EED31B686B60( _id_C05958D616DDF1C5 )
{
    self endon( "geigercounter_watchRaceEnd" );
    self waittill( "geigercounter_take" );
    _id_C05958D616DDF1C5.take = 1;
    self notify( "geigercounter_watchRaceStart" );
}

_id_841D127CB52727A9( _id_C05958D616DDF1C5 )
{
    self endon( "geigercounter_watchRaceEnd" );
    self waittill( "pullout_gc", weapon );

    for (;;)
    {
        if ( getweaponbasename( self getheldoffhand() ) == "geiger_counter_mp" )
            break;
    }

    _id_C05958D616DDF1C5._id_4B47429F8D0D3EE5 = 1;
    self notify( "geigercounter_watchRaceStart" );
}

_id_B33A67426542B0C5( _id_C05958D616DDF1C5 )
{
    self endon( "geigercounter_watchRaceEnd" );

    for (;;)
    {
        if ( getweaponbasename( self getheldoffhand() ) == "geiger_counter_mp" )
            break;
    }

    _id_C05958D616DDF1C5._id_69B82C8E2D0CF148 = 1;
    self notify( "geigercounter_watchRaceEnd" );
}

_id_CE0FEF2F2C7F1717()
{
    self notify( "geigercounter_putaway" );

    if ( isdefined( self._id_BCB3E1F6F7CD3CB7 ) )
    {
        self._id_BCB3E1F6F7CD3CB7._id_4B47429F8D0D3EE5 = undefined;
        self._id_BCB3E1F6F7CD3CB7 = undefined;
        _id_5600972DE1B79706();
        _id_C5211DEB59BC819A();
    }
}

_id_27B913C5A2199F7F()
{
    return isdefined( self._id_BCB3E1F6F7CD3CB7 ) && istrue( self._id_BCB3E1F6F7CD3CB7._id_4B47429F8D0D3EE5 );
}

_id_C5211DEB59BC819A()
{
    self setclientomnvar( "ui_geigercounter_meter", 0 );
}

_id_7842C49C4D21BD5B( data )
{
    self setclientomnvar( "ui_geigercounter_meter", data );
}

_id_018AD59D3ABD30F4()
{
    self playlocalsound( "iw9_geiger_counter_tick" );
}

_id_5600972DE1B79706()
{
    self stoplocalsound( "iw9_geiger_counter_tick" );
}

_id_C8B79F6694C62EE8( _id_17B73AA1820974EE )
{
    if ( isdefined( _id_17B73AA1820974EE ) )
        _id_7842C49C4D21BD5B( _id_17B73AA1820974EE );
    else
        _id_7842C49C4D21BD5B( self._id_BCB3E1F6F7CD3CB7._id_F458338F4188859E );
}

_id_F0D61E14DFDE9CCD( object )
{
    level._id_BCB3E1F6F7CD3CB7._id_2B6807C7DF9A2B2D scripts\engine\utility::_id_24BBEFB4BEDA630D( object );
}

_id_A67007B5AF86FF0B( object )
{
    level._id_BCB3E1F6F7CD3CB7._id_2B6807C7DF9A2B2D scripts\engine\utility::_id_9CD3F5F067AFEA37( object );
}

_id_EFF6D6DB587F143D()
{
    return level._id_BCB3E1F6F7CD3CB7._id_2B6807C7DF9A2B2D scripts\engine\utility::_id_60DBE20F8385F1B0( self.origin );
}

_id_296CAD0FB60AB083( _id_476BA0CAD41D3B92 )
{
    _id_5D1A77C029C6A066 = _id_476BA0CAD41D3B92.origin;
    _id_01E331291FA3BD60 = distancesquared( _id_5D1A77C029C6A066, self.origin );
    return _id_01E331291FA3BD60;
}

_id_4385C3A2905EEF3B( player, _id_01E331291FA3BD60 )
{
    return _id_01E331291FA3BD60 < 16000000;
}

_id_F6F6E00677F36E98( _id_01E331291FA3BD60, object )
{
    self notify( "_geigercounter_calculateGeigerCounterPulseRate" );
    self endon( "_geigercounter_calculateGeigerCounterPulseRate" );
    self endon( "disconnect" );
    _id_9068CB3A62D2CCD4 = 0.1;
    _id_704A30A3B4461E92 = lookupsoundlength( "iw9_geiger_counter_tick" ) / 1000;
    _id_395712E8D9AD1D10 = 1.4;
    _id_636C8575D7A7768B = 0;
    maxdist = 4000;
    dist = sqrt( _id_01E331291FA3BD60 );
    waittime = _id_704A30A3B4461E92;
    _id_ED5F1E37B41969E0 = _id_704A30A3B4461E92;
    _id_406567975EAD0D9A = _id_704A30A3B4461E92;
    _id_488D4C5202017ACD = 0;
    _id_E1A6796D6725E569 = -1.0 * ( ( dist - _id_636C8575D7A7768B ) / ( maxdist - _id_636C8575D7A7768B ) ) + 1.0;
    _id_70222FBC47330166 = anglestoforward( self getplayerangles() );
    _id_4712089F9A28931D = vectornormalize( object.origin - self.origin );
    _id_FCE87949C9B65851 = vectordot( _id_70222FBC47330166, _id_4712089F9A28931D );
    _id_63783FA82077E962 = clamp( 20.0 * _id_E1A6796D6725E569, 0.0, 1.0 ) * ( _id_FCE87949C9B65851 + 1.0 ) / 2.0;
    _id_488D4C5202017ACD = _id_E1A6796D6725E569 * 0.8 + _id_63783FA82077E962 * 0.2;
    waittime = ( -1.0 * _id_488D4C5202017ACD + 1 ) * _id_395712E8D9AD1D10;
    return waittime;
}
