// IW9 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

minefields()
{
    minefields = getentarray( "minefield", "targetname" );

    if ( minefields.size > 0 )
        level._effect["mine_explosion"] = loadfx( "vfx/core/expl/weap/gre/vfx_exp_gre_dirt_cg" );

    for ( _id_AC0E594AC96AA3A8 = 0; _id_AC0E594AC96AA3A8 < minefields.size; _id_AC0E594AC96AA3A8++ )
        minefields[_id_AC0E594AC96AA3A8] thread minefield_think();
}

minefield_think()
{
    scripts\mp\flags::gameflagwait( "prematch_done" );

    for (;;)
    {
        self waittill( "trigger", other );

        if ( isplayer( other ) )
            other thread minefield_kill( self );
    }
}

minefield_kill( trigger )
{
    if ( isdefined( self.minefield ) )
        return;

    self.minefield = 1;
    wait 0.5;
    wait( randomfloat( 0.5 ) );

    if ( isdefined( self ) && self istouching( trigger ) )
    {
        origin = self getorigin();
        range = 300;
        maxdamage = 2000;
        mindamage = 50;
        radiusdamage( origin, range, maxdamage, mindamage );
    }

    self.minefield = undefined;
}
