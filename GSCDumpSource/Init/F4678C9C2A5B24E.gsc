// IW9 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

_id_E04BD99E1BB6430B()
{
    chopperexif_fx_init();
}

chopperexfil_pack( _id_CBFC3BA10CEFC8CE )
{
    if ( !isdefined( _id_CBFC3BA10CEFC8CE ) )
        _id_CBFC3BA10CEFC8CE = ( 0, 0, 0 );

    thread chopperexfil_introsound( 5, _id_CBFC3BA10CEFC8CE );

    if ( !getdvarint( "dvar_19A406E3C51CE52F" ) )
    {
        self.transientname = get_chopperexfil_transient();
        loadinfiltransient( self.transientname );
        setomnvarforallclients( "ui_br_end_game_splash_type", 18 );

        for ( _id_24B79087F3897E94 = 0; !_id_24B79087F3897E94; _id_24B79087F3897E94 = _func_2030CC4AD67D1634( self.transientname ) )
            waitframe();
    }

    chopper = _id_40F4C8F2B94C5CD9::spawn_script_model( "veh8_mil_air_blima_scriptmodel" );
    chopper hidepart( "tag_main_rotor_blade_01" );
    chopper hidepart( "tag_main_rotor_blade_02" );
    chopper hidepart( "tag_main_rotor_blade_03" );
    chopper hidepart( "tag_main_rotor_blade_04" );
    chopper hidepart( "tag_tail_rotor_blade_01" );
    chopper hidepart( "tag_tail_rotor_blade_02" );
    chopper hidepart( "tag_tail_rotor_blade_03" );
    chopper hidepart( "tag_tail_rotor_blade_04" );
    self.exfilchopper = chopper;
    _id_40F4C8F2B94C5CD9::chopperexfil_set_brcircle();
    head = [ "head_mp_helicopter_crew", "j_spine4" ];
    _id_31093158B2292193 = [ head ];
    body = "body_pilot_helicopter_british";
    ropeguy = _id_40F4C8F2B94C5CD9::spawn_script_model( body, undefined, _id_31093158B2292193 );
    self.ropeguy = ropeguy;
    self.winners = scripts\engine\utility::array_removeundefined( self.winners );

    if ( self.winners.size == 0 )
        _id_40F4C8F2B94C5CD9::create_disconnectplayer( self );

    rope = _id_40F4C8F2B94C5CD9::spawn_script_model( "equipment_fast_rope_wm_01_infil_heli_l" );
    self.rope = rope;
    self.cam = _id_40F4C8F2B94C5CD9::create_cam();
    ascenders = [];
    ascenders[0] = _id_40F4C8F2B94C5CD9::spawn_script_model( "misc_wm_ascender", "misc_wm_ascender0" );

    if ( self.winners.size > 1 )
        ascenders[1] = _id_40F4C8F2B94C5CD9::spawn_script_model( "misc_wm_ascender", "misc_wm_ascender1" );

    if ( self.winners.size > 2 )
        ascenders[2] = _id_40F4C8F2B94C5CD9::spawn_script_model( "misc_wm_ascender", "misc_wm_ascender2" );

    if ( self.winners.size > 3 )
        ascenders[3] = _id_40F4C8F2B94C5CD9::spawn_script_model( "misc_wm_ascender", "misc_wm_ascender3" );

    self.ascenders = ascenders;
    self.packs = [];
    n = 0;
    self.packs[n] = _id_40F4C8F2B94C5CD9::create_animpack( "scene1" );
    self.packs[n] _id_40F4C8F2B94C5CD9::add_pack_startfunc( [], ::chopperexfil_sh010_start );
    self.packs[n] _id_40F4C8F2B94C5CD9::add_pack_modelanim( chopper, level._id_1A209BD995A7FA83["br_exfil_blima_sh010"] );
    self.packs[n] _id_40F4C8F2B94C5CD9::add_pack_modelanim( ropeguy, level._id_1A209BD995A7FA83["br_exfil_co_sh010"] );
    self.packs[n] _id_40F4C8F2B94C5CD9::add_pack_modelanim( rope, level._id_1A209BD995A7FA83["br_exfil_rope_sh010"] );
    self.packs[n] _id_40F4C8F2B94C5CD9::add_pack_camanim( level._id_1A209BD995A7FA83["br_exfil_cam_sh010"] );
    self.packs[n] _id_40F4C8F2B94C5CD9::add_pack_fx( "chopperExfil_gas", self.origin, self.angles );
    n++;
    self.packs[n] = _id_40F4C8F2B94C5CD9::create_animpack( "scene2" );
    self.packs[n] _id_40F4C8F2B94C5CD9::add_pack_startfunc( self.winners, ::chopperexfil_sh020_start );
    self.packs[n] _id_40F4C8F2B94C5CD9::add_pack_modelanim( chopper, level._id_1A209BD995A7FA83["br_exfil_blima_sh020"] );

    if ( !isdefined( level.scr_notetrack["veh8_mil_air_blima_scriptmodel"] ) || !isdefined( level.scr_notetrack["veh8_mil_air_blima_scriptmodel"]["any"]["guy0_aboard"] ) )
    {
        scripts\common\anim::addnotetrack_customfunction( "veh8_mil_air_blima_scriptmodel", "guy0_aboard", ::chopperexfil_skip_ascend0 );
        scripts\common\anim::addnotetrack_customfunction( "veh8_mil_air_blima_scriptmodel", "guy1_aboard", ::chopperexfil_skip_ascend1 );
        scripts\common\anim::addnotetrack_customfunction( "veh8_mil_air_blima_scriptmodel", "guy2_aboard", ::chopperexfil_skip_ascend2 );
        scripts\common\anim::addnotetrack_customfunction( "veh8_mil_air_blima_scriptmodel", "slamtoblack", ::chopperexfil_slamtoblack );
    }

    self.packs[n] _id_40F4C8F2B94C5CD9::add_pack_modelanim( ropeguy, level._id_1A209BD995A7FA83["br_exfil_pilot_sh020"] );
    self.packs[n] _id_40F4C8F2B94C5CD9::add_pack_modelanim( rope, level._id_1A209BD995A7FA83["br_exfil_rope_sh020"] );
    self.packs[n] _id_40F4C8F2B94C5CD9::add_pack_modelanim( ascenders[0], level._id_1A209BD995A7FA83["br_exfil_ascender0_sh020"] );

    if ( self.winners.size > 1 )
        self.packs[n] _id_40F4C8F2B94C5CD9::add_pack_modelanim( ascenders[1], level._id_1A209BD995A7FA83["br_exfil_ascender1_sh020"] );

    if ( self.winners.size > 2 )
        self.packs[n] _id_40F4C8F2B94C5CD9::add_pack_modelanim( ascenders[2], level._id_1A209BD995A7FA83["br_exfil_ascender2_sh020"] );

    if ( self.winners.size > 3 )
        self.packs[n] _id_40F4C8F2B94C5CD9::add_pack_modelanim( ascenders[3], level._id_1A209BD995A7FA83["br_exfil_ascender3_sh020"] );

    self.packs[n] _id_40F4C8F2B94C5CD9::add_pack_playeranim( self.winners[0], level._id_1A209BD995A7FA83["br_exfil_guy0_sh020"], level._id_1A209BD995A7FA83["br_exfil_guy0_sh020_fem"] );
    self.packs[n] _id_40F4C8F2B94C5CD9::add_pack_playeranim( self.winners[1], level._id_1A209BD995A7FA83["br_exfil_guy1_sh020"], level._id_1A209BD995A7FA83["br_exfil_guy1_sh020_fem"] );
    self.packs[n] _id_40F4C8F2B94C5CD9::add_pack_playeranim( self.winners[2], level._id_1A209BD995A7FA83["br_exfil_guy2_sh020"], level._id_1A209BD995A7FA83["br_exfil_guy2_sh020_fem"] );
    self.packs[n] _id_40F4C8F2B94C5CD9::add_pack_playeranim( self.winners[3], level._id_1A209BD995A7FA83["br_exfil_guy3_sh020"], level._id_1A209BD995A7FA83["br_exfil_guy3_sh020_fem"] );
    self.packs[n] _id_40F4C8F2B94C5CD9::add_pack_camanim( level._id_1A209BD995A7FA83["br_exfil_cam_sh020"] );
    n++;
    self.packs[n] = _id_40F4C8F2B94C5CD9::create_animpack( "scene2.5" );
    self.packs[n] _id_40F4C8F2B94C5CD9::add_pack_startfunc( self.winners, ::chopperexfil_sh025_start );
    self.packs[n] _id_40F4C8F2B94C5CD9::add_pack_modelanim( chopper, level._id_1A209BD995A7FA83["br_exfil_blima_sh025"] );
    self.packs[n] _id_40F4C8F2B94C5CD9::add_pack_modelanim( ropeguy, level._id_1A209BD995A7FA83["br_exfil_pilot_sh025"] );
    self.packs[n] _id_40F4C8F2B94C5CD9::add_pack_playeranim( self.winners[0], level._id_1A209BD995A7FA83["br_exfil_guy0_sh025"] );
    self.packs[n] _id_40F4C8F2B94C5CD9::add_pack_playeranim( self.winners[1], level._id_1A209BD995A7FA83["br_exfil_guy1_sh025"] );
    self.packs[n] _id_40F4C8F2B94C5CD9::add_pack_playeranim( self.winners[2], level._id_1A209BD995A7FA83["br_exfil_guy2_sh025"] );
    self.packs[n] _id_40F4C8F2B94C5CD9::add_pack_playeranim( self.winners[3], level._id_1A209BD995A7FA83["br_exfil_guy3_sh025"] );
    self.packs[n] _id_40F4C8F2B94C5CD9::add_pack_camanim( level._id_1A209BD995A7FA83["br_exfil_cam_sh025"] );
    n++;
    self.packs[n] = _id_40F4C8F2B94C5CD9::create_animpack( "scene3" );
    self.packs[n] _id_40F4C8F2B94C5CD9::add_pack_startfunc( self.winners, ::chopperexfil_sh030_start );
    self.packs[n] _id_40F4C8F2B94C5CD9::add_pack_modelanim( chopper, level._id_1A209BD995A7FA83["br_exfil_blima_sh030"] );
    self.packs[n] _id_40F4C8F2B94C5CD9::add_pack_modelanim( ropeguy, level._id_1A209BD995A7FA83["br_exfil_pilot_sh030"] );
    self.packs[n] _id_40F4C8F2B94C5CD9::add_pack_playeranim( self.winners[0], level._id_1A209BD995A7FA83["br_exfil_guy0_sh030"], level._id_1A209BD995A7FA83["br_exfil_guy0_sh030_fem"] );
    self.packs[n] _id_40F4C8F2B94C5CD9::add_pack_playeranim( self.winners[1], level._id_1A209BD995A7FA83["br_exfil_guy1_sh030"], level._id_1A209BD995A7FA83["br_exfil_guy1_sh030_fem"] );
    self.packs[n] _id_40F4C8F2B94C5CD9::add_pack_playeranim( self.winners[2], level._id_1A209BD995A7FA83["br_exfil_guy2_sh030"], level._id_1A209BD995A7FA83["br_exfil_guy2_sh030_fem"] );
    self.packs[n] _id_40F4C8F2B94C5CD9::add_pack_playeranim( self.winners[3], level._id_1A209BD995A7FA83["br_exfil_guy3_sh030"], level._id_1A209BD995A7FA83["br_exfil_guy3_sh030_fem"] );
    self.packs[n] _id_40F4C8F2B94C5CD9::add_pack_camanim( level._id_1A209BD995A7FA83["br_exfil_cam_sh030"] );

    if ( self.winners.size >= 2 )
    {
        n++;
        self.packs[n] = _id_40F4C8F2B94C5CD9::create_animpack( "scene4" );
        self.packs[n] _id_40F4C8F2B94C5CD9::add_pack_startfunc( [ ropeguy ], ::chopperexfil_sh040_start );
        self.packs[n] _id_40F4C8F2B94C5CD9::add_pack_modelanim( chopper, level._id_1A209BD995A7FA83["br_exfil_blima_sh040"] );
        self.packs[n] _id_40F4C8F2B94C5CD9::add_pack_playeranim( self.winners[0], level._id_1A209BD995A7FA83["br_exfil_guy0_sh040"], level._id_1A209BD995A7FA83["br_exfil_guy0_sh040_fem"] );
        self.packs[n] _id_40F4C8F2B94C5CD9::add_pack_playeranim( self.winners[1], level._id_1A209BD995A7FA83["br_exfil_guy1_sh040"], level._id_1A209BD995A7FA83["br_exfil_guy1_sh040_fem"] );
        self.packs[n] _id_40F4C8F2B94C5CD9::add_pack_playeranim( self.winners[2], level._id_1A209BD995A7FA83["br_exfil_guy2_sh040"], level._id_1A209BD995A7FA83["br_exfil_guy2_sh040_fem"] );
        self.packs[n] _id_40F4C8F2B94C5CD9::add_pack_playeranim( self.winners[3], level._id_1A209BD995A7FA83["br_exfil_guy3_sh040"], level._id_1A209BD995A7FA83["br_exfil_guy3_sh040_fem"] );
        self.packs[n] _id_40F4C8F2B94C5CD9::add_pack_camanim( level._id_1A209BD995A7FA83["br_exfil_cam_sh040"] );
    }

    if ( self.winners.size >= 3 )
    {
        n++;
        self.packs[n] = _id_40F4C8F2B94C5CD9::create_animpack( "scene5" );
        self.packs[n] _id_40F4C8F2B94C5CD9::add_pack_startfunc( [], ::chopperexfil_sh050_start );
        self.packs[n] _id_40F4C8F2B94C5CD9::add_pack_modelanim( chopper, level._id_1A209BD995A7FA83["br_exfil_blima_sh050"] );
        self.packs[n] _id_40F4C8F2B94C5CD9::add_pack_playeranim( self.winners[0], level._id_1A209BD995A7FA83["br_exfil_guy0_sh050"], level._id_1A209BD995A7FA83["br_exfil_guy0_sh050_fem"] );
        self.packs[n] _id_40F4C8F2B94C5CD9::add_pack_playeranim( self.winners[1], level._id_1A209BD995A7FA83["br_exfil_guy1_sh050"], level._id_1A209BD995A7FA83["br_exfil_guy1_sh050_fem"] );
        self.packs[n] _id_40F4C8F2B94C5CD9::add_pack_playeranim( self.winners[2], level._id_1A209BD995A7FA83["br_exfil_guy2_sh050"], level._id_1A209BD995A7FA83["br_exfil_guy2_sh050_fem"] );
        self.packs[n] _id_40F4C8F2B94C5CD9::add_pack_playeranim( self.winners[3], level._id_1A209BD995A7FA83["br_exfil_guy3_sh050"], level._id_1A209BD995A7FA83["br_exfil_guy3_sh050_fem"] );
        self.packs[n] _id_40F4C8F2B94C5CD9::add_pack_camanim( level._id_1A209BD995A7FA83["br_exfil_cam_sh050"] );
    }

    if ( self.winners.size == 4 )
    {
        n++;
        self.packs[n] = _id_40F4C8F2B94C5CD9::create_animpack( "scene6" );
        self.packs[n] _id_40F4C8F2B94C5CD9::add_pack_startfunc( [], ::chopperexfil_sh060_start );
        self.packs[n] _id_40F4C8F2B94C5CD9::add_pack_modelanim( chopper, level._id_1A209BD995A7FA83["br_exfil_blima_sh060"] );
        self.packs[n] _id_40F4C8F2B94C5CD9::add_pack_playeranim( self.winners[0], level._id_1A209BD995A7FA83["br_exfil_guy0_sh060"], level._id_1A209BD995A7FA83["br_exfil_guy0_sh060_fem"] );
        self.packs[n] _id_40F4C8F2B94C5CD9::add_pack_playeranim( self.winners[1], level._id_1A209BD995A7FA83["br_exfil_guy1_sh060"], level._id_1A209BD995A7FA83["br_exfil_guy1_sh060_fem"] );
        self.packs[n] _id_40F4C8F2B94C5CD9::add_pack_playeranim( self.winners[2], level._id_1A209BD995A7FA83["br_exfil_guy2_sh060"], level._id_1A209BD995A7FA83["br_exfil_guy2_sh060_fem"] );
        self.packs[n] _id_40F4C8F2B94C5CD9::add_pack_playeranim( self.winners[3], level._id_1A209BD995A7FA83["br_exfil_guy3_sh060"], level._id_1A209BD995A7FA83["br_exfil_guy3_sh060_fem"] );
        self.packs[n] _id_40F4C8F2B94C5CD9::add_pack_camanim( level._id_1A209BD995A7FA83["br_exfil_cam_sh060"] );
    }

    n++;
    self.packs[n] = _id_40F4C8F2B94C5CD9::create_animpack( "scene7" );
    self.packs[n] _id_40F4C8F2B94C5CD9::add_pack_startfunc( [], ::chopperexfil_sh070_start );
    self.packs[n] _id_40F4C8F2B94C5CD9::add_pack_modelanim( chopper, level._id_1A209BD995A7FA83["br_exfil_blima_sh070"] );
    self.packs[n] _id_40F4C8F2B94C5CD9::add_pack_playeranim( self.winners[0], level._id_1A209BD995A7FA83["br_exfil_guy0_sh070"] );
    self.packs[n] _id_40F4C8F2B94C5CD9::add_pack_playeranim( self.winners[1], level._id_1A209BD995A7FA83["br_exfil_guy1_sh070"] );
    self.packs[n] _id_40F4C8F2B94C5CD9::add_pack_playeranim( self.winners[2], level._id_1A209BD995A7FA83["br_exfil_guy2_sh070"] );
    self.packs[n] _id_40F4C8F2B94C5CD9::add_pack_playeranim( self.winners[3], level._id_1A209BD995A7FA83["br_exfil_guy3_sh070"] );
    self.packs[n] _id_40F4C8F2B94C5CD9::add_pack_camanim( level._id_1A209BD995A7FA83["br_exfil_cam_sh070"] );
}

_id_A5538B1593309BB0()
{
    _id_79A78F73D2D4925D = [];
    _id_078258CA0B59079A = 30.0;
    _id_E4C66FC441E3F497 = 68.0;
    _id_79A78F73D2D4925D = _id_40F4C8F2B94C5CD9::_id_3F005B301EC7F15B( _id_79A78F73D2D4925D, level._id_1A209BD995A7FA83["br_exfil_guy0_sh020"], 0.0, undefined, _id_078258CA0B59079A, _id_E4C66FC441E3F497 );
    _id_79A78F73D2D4925D = _id_40F4C8F2B94C5CD9::_id_3F005B301EC7F15B( _id_79A78F73D2D4925D, level._id_1A209BD995A7FA83["br_exfil_guy1_sh020"], 0.0, undefined, _id_078258CA0B59079A, _id_E4C66FC441E3F497 );
    _id_79A78F73D2D4925D = _id_40F4C8F2B94C5CD9::_id_3F005B301EC7F15B( _id_79A78F73D2D4925D, level._id_1A209BD995A7FA83["br_exfil_guy2_sh020"], 0.0, undefined, _id_078258CA0B59079A, _id_E4C66FC441E3F497 );
    _id_79A78F73D2D4925D = _id_40F4C8F2B94C5CD9::_id_3F005B301EC7F15B( _id_79A78F73D2D4925D, level._id_1A209BD995A7FA83["br_exfil_guy3_sh020"], 0.0, undefined, _id_078258CA0B59079A, _id_E4C66FC441E3F497 );
    _id_A5C6D4F05FA73949 = "veh8_mil_air_blima_scriptmodel";
    _id_FB88F2D5ECEBB3E1 = ( 0, 0, -70 );
    _id_EA07460C784BE362 = 350.0;
    _id_ABA9DA4BE1CE5CE2 = 10;
    _id_79A78F73D2D4925D = _id_40F4C8F2B94C5CD9::_id_F317A6F0AE25E3D4( _id_79A78F73D2D4925D, _id_A5C6D4F05FA73949, level._id_1A209BD995A7FA83["br_exfil_blima_sh020"], 0.0, _id_FB88F2D5ECEBB3E1, _id_EA07460C784BE362 );
    _id_79A78F73D2D4925D = _id_40F4C8F2B94C5CD9::_id_F317A6F0AE25E3D4( _id_79A78F73D2D4925D, _id_A5C6D4F05FA73949, level._id_1A209BD995A7FA83["br_exfil_blima_sh025"], 0.0, _id_FB88F2D5ECEBB3E1, _id_EA07460C784BE362 );
    _id_79A78F73D2D4925D = _id_40F4C8F2B94C5CD9::_id_F317A6F0AE25E3D4( _id_79A78F73D2D4925D, _id_A5C6D4F05FA73949, level._id_1A209BD995A7FA83["br_exfil_blima_sh030"], 0.0, _id_FB88F2D5ECEBB3E1, _id_EA07460C784BE362 );
    _id_79A78F73D2D4925D = _id_40F4C8F2B94C5CD9::_id_F317A6F0AE25E3D4( _id_79A78F73D2D4925D, _id_A5C6D4F05FA73949, level._id_1A209BD995A7FA83["br_exfil_blima_sh040"], 0.0, _id_FB88F2D5ECEBB3E1, _id_EA07460C784BE362 );
    _id_79A78F73D2D4925D = _id_40F4C8F2B94C5CD9::_id_F317A6F0AE25E3D4( _id_79A78F73D2D4925D, _id_A5C6D4F05FA73949, level._id_1A209BD995A7FA83["br_exfil_blima_sh050"], 0.0, _id_FB88F2D5ECEBB3E1, _id_EA07460C784BE362 );
    _id_79A78F73D2D4925D = _id_40F4C8F2B94C5CD9::_id_F317A6F0AE25E3D4( _id_79A78F73D2D4925D, _id_A5C6D4F05FA73949, level._id_1A209BD995A7FA83["br_exfil_blima_sh060"], 0.0, _id_FB88F2D5ECEBB3E1, _id_EA07460C784BE362 );
    _id_79A78F73D2D4925D = _id_40F4C8F2B94C5CD9::_id_F317A6F0AE25E3D4( _id_79A78F73D2D4925D, _id_A5C6D4F05FA73949, level._id_1A209BD995A7FA83["br_exfil_blima_sh070"], 0.0, _id_FB88F2D5ECEBB3E1, _id_EA07460C784BE362 );
    _id_79A78F73D2D4925D = _id_40F4C8F2B94C5CD9::_id_F317A6F0AE25E3D4( _id_79A78F73D2D4925D, _id_A5C6D4F05FA73949, level._id_1A209BD995A7FA83["br_exfil_blima_sh070"], 0.99, _id_FB88F2D5ECEBB3E1, _id_EA07460C784BE362 );
    _id_79A78F73D2D4925D = _id_40F4C8F2B94C5CD9::_id_19AE50E23FE0625A( _id_79A78F73D2D4925D, _id_A5C6D4F05FA73949, level._id_1A209BD995A7FA83["br_exfil_blima_sh010"], _id_FB88F2D5ECEBB3E1, _id_EA07460C784BE362, _id_ABA9DA4BE1CE5CE2 );
    _id_79A78F73D2D4925D = _id_40F4C8F2B94C5CD9::_id_19AE50E23FE0625A( _id_79A78F73D2D4925D, _id_A5C6D4F05FA73949, level._id_1A209BD995A7FA83["br_exfil_blima_sh020"], _id_FB88F2D5ECEBB3E1, _id_EA07460C784BE362, _id_ABA9DA4BE1CE5CE2 );
    _id_79A78F73D2D4925D = _id_40F4C8F2B94C5CD9::_id_19AE50E23FE0625A( _id_79A78F73D2D4925D, _id_A5C6D4F05FA73949, level._id_1A209BD995A7FA83["br_exfil_blima_sh025"], _id_FB88F2D5ECEBB3E1, _id_EA07460C784BE362, _id_ABA9DA4BE1CE5CE2 );
    _id_79A78F73D2D4925D = _id_40F4C8F2B94C5CD9::_id_19AE50E23FE0625A( _id_79A78F73D2D4925D, _id_A5C6D4F05FA73949, level._id_1A209BD995A7FA83["br_exfil_blima_sh030"], _id_FB88F2D5ECEBB3E1, _id_EA07460C784BE362, _id_ABA9DA4BE1CE5CE2 );
    _id_79A78F73D2D4925D = _id_40F4C8F2B94C5CD9::_id_19AE50E23FE0625A( _id_79A78F73D2D4925D, _id_A5C6D4F05FA73949, level._id_1A209BD995A7FA83["br_exfil_blima_sh040"], _id_FB88F2D5ECEBB3E1, _id_EA07460C784BE362, _id_ABA9DA4BE1CE5CE2 );
    _id_79A78F73D2D4925D = _id_40F4C8F2B94C5CD9::_id_19AE50E23FE0625A( _id_79A78F73D2D4925D, _id_A5C6D4F05FA73949, level._id_1A209BD995A7FA83["br_exfil_blima_sh050"], _id_FB88F2D5ECEBB3E1, _id_EA07460C784BE362, _id_ABA9DA4BE1CE5CE2 );
    _id_79A78F73D2D4925D = _id_40F4C8F2B94C5CD9::_id_19AE50E23FE0625A( _id_79A78F73D2D4925D, _id_A5C6D4F05FA73949, level._id_1A209BD995A7FA83["br_exfil_blima_sh060"], _id_FB88F2D5ECEBB3E1, _id_EA07460C784BE362, _id_ABA9DA4BE1CE5CE2 );
    _id_79A78F73D2D4925D = _id_40F4C8F2B94C5CD9::_id_19AE50E23FE0625A( _id_79A78F73D2D4925D, _id_A5C6D4F05FA73949, level._id_1A209BD995A7FA83["br_exfil_blima_sh070"], _id_FB88F2D5ECEBB3E1, _id_EA07460C784BE362, _id_ABA9DA4BE1CE5CE2 );
    return _id_79A78F73D2D4925D;
}

chopperexif_fx_init()
{
    level._effect["chopperExfil_rotorwash"] = loadfx( "vfx/iw8_br/gameplay/vfx_br_blima_rotor_infil.vfx" );
    level._effect["chopperExfil_gas"] = loadfx( "vfx/iw8_br/gameplay/circle/vfx_br_circle_gas_exfil_01.vfx" );
    level._effect["player_disconnect"] = loadfx( "vfx/iw8_br/gameplay/vfx_br_disconnect_player.vfx" );
}

chopperexfil_introsound( time, _id_CBFC3BA10CEFC8CE )
{
    endorigin = self.origin + ( 0, 0, 1000 );
    forward = vectornormalize( endorigin - _id_CBFC3BA10CEFC8CE );
    startorigin = endorigin + forward * 3000;
    temp = spawn( "script_model", startorigin );
    temp playsound( "br_exfil_incoming_heli_lr" );
    temp moveto( endorigin, time );
    wait( time );
    temp delete();
}

get_chopperexfil_transient()
{
    switch ( level.script )
    {
        case "mp_donetsk":
            return "mp_infil_br_donetsk_ending_chopper_tr";
        case "mp_donetsk2":
            return "mp_infil_br_donetsk2_ending_chopper_tr";
        case "mp_don3_mobile":
        case "mp_don3":
            return "mp_infil_br_don3_ending_chopper_tr";
        case "mp_br_quarry":
            return "mp_infil_br_quarry_ending_chopper_tr";
        case "mp_747_dev":
        case "mp_br_mechanics":
            return "mp_infil_br_mechanics_ending_chopper_tr";
        case "mp_kstenod":
            return "mp_infil_br_kstenod_ending_chopper_tr";
        case "mp_escape2":
            return "mp_infil_br_escape2_ending_chopper_tr";
        case "mp_escape3":
            return "mp_infil_br_escape2_ending_chopper_tr";
        case "mp_saba":
            return "mp_infil_br_saba_ending_chopper_tr";
        case "mp_sealion":
            return "mp_infil_br_saba_ending_chopper_tr";
        case "mp_delta":
            return "mp_infil_br_saba_ending_chopper_tr";
    }

    return "";
}

chopperexfil_music_start()
{
    if ( level.br_ending.winners.size == 0 )
        return;

    _id_134AEA3CDF65B674 = "mus_br_exfil_intro_3player_intro";
    _id_4DE75E7F916838A0 = "br_exfil_part1_3person_lr";

    switch ( level.br_ending.winners.size )
    {
        case 1:
            _id_134AEA3CDF65B674 = "mus_br_exfil_intro_1player_intro";
            _id_4DE75E7F916838A0 = "br_exfil_part1_1person_lr";
            break;
        case 2:
            _id_134AEA3CDF65B674 = "mus_br_exfil_intro_2player_intro";
            _id_4DE75E7F916838A0 = "br_exfil_part1_2person_lr";
            break;
        case 3:
            _id_134AEA3CDF65B674 = "mus_br_exfil_intro_3player_intro";
            _id_4DE75E7F916838A0 = "br_exfil_part1_3person_lr";
            break;
        case 4:
            _id_134AEA3CDF65B674 = "mus_br_exfil_intro_4player_intro";
            _id_4DE75E7F916838A0 = "br_exfil_part1_4person_lr";
            break;
    }

    foreach ( player in level.players )
    {
        player playlocalsound( _id_4DE75E7F916838A0 );
        player playlocalsound( _id_134AEA3CDF65B674 );
    }

    waitframe();
    setmusicstate( "" );

    foreach ( player in level.players )
        player setsoundsubmix( "mp_br_exfil_fade", 4 );
}

chopperexfil_music_sh025()
{
    if ( level.br_ending.winners.size == 0 )
        return;

    _id_51941101270F867D = "br_exfil_main_3player";

    switch ( level.br_ending.winners.size )
    {
        case 1:
            _id_51941101270F867D = "br_exfil_main_1player";
            break;
        case 2:
            _id_51941101270F867D = "br_exfil_main_2player";
            break;
        case 3:
            _id_51941101270F867D = "br_exfil_main_3player";
            break;
        case 4:
            _id_51941101270F867D = "br_exfil_main_4player";
            break;
    }

    setmusicstate( _id_51941101270F867D );
}

chopperexfil_sfx_before_sh070( waittime )
{
    if ( isdefined( waittime ) )
        wait( waittime );

    foreach ( player in level.players )
        player playlocalsound( "br_exfil_end_part_lr" );
}

chopperexfil_sh010_start( array )
{
    level.br_ending.exfilchopper thread chopper_playfx();
    thread chopperexfil_music_start();

    if ( !_id_2CEDCC356F1B9FC8::isanytutorialorbotpracticematch() )
        setomnvarforallclients( "ui_br_end_game_splash_type", 17 );

    if ( isdefined( level.br_ending_debugmode ) )
    {
        level.br_ending.ropeguy show();

        foreach ( player in level.players )
            player.player_rig unlink();
    }

    _id_40F4C8F2B94C5CD9::allplayers_setphysicaldof( 2.8, 200 );
}

chopperexfil_sh020_start( players )
{
    _id_40F4C8F2B94C5CD9::allplayers_setphysicaldof( 2.8, 250 );
    level.br_ending.exfilchopper thread chopper_playfx();

    if ( isdefined( level.br_ending_debugmode ) )
    {
        foreach ( ascender in level.br_ending.ascenders )
            ascender show();
    }

    foreach ( player in players )
    {
        if ( isdefined( player ) )
            player scripts\mp\utility\player::setwind( "60", 1 );
    }
}

chopperexfil_sh025_start( players )
{
    _id_40F4C8F2B94C5CD9::allplayers_setphysicaldof( 2.8, 250 );
    thread chopperexfil_music_sh025();

    if ( !isdefined( level.br_ending_debugmode ) )
    {
        if ( level.br_ending.winners.size < 4 )
        {
            if ( isdefined( level.br_ending.rope ) )
                level.br_ending.rope delete();
        }
    }

    level.br_ending.exfilchopper thread chopper_playfx();

    if ( isdefined( level.br_ending_debugmode ) )
    {
        foreach ( ascender in level.br_ending.ascenders )
            ascender hide();
    }
    else
    {
        foreach ( ascender in level.br_ending.ascenders )
            ascender delete();
    }

    tags = [ "tag_guy0", "tag_guy2", "tag_guy4", "tag_guy5" ];

    foreach ( player in players )
    {
        if ( !isdefined( player ) )
            continue;

        if ( !isdefined( player.winindex ) )
            continue;

        player.player_rig linkto( level.br_ending.exfilchopper, tags[player.winindex], ( 0, 0, 0 ), ( 0, 0, 0 ) );
        player.linkedtoent = level.br_ending.exfilchopper;
        player.linkedtotag = tags[player.winindex];
    }

    foreach ( rig in level.br_ending.player_rigs )
    {
        if ( isdefined( rig.player ) )
            continue;

        if ( !isdefined( rig.winindex ) )
            continue;

        rig linkto( level.br_ending.exfilchopper, tags[rig.winindex], ( 0, 0, 0 ), ( 0, 0, 0 ) );
        rig.linkedtoent = level.br_ending.exfilchopper;
        rig.linkedtotag = tags[rig.winindex];
    }

    chopperexfil_sitting_wind( players );
}

chopperexfil_sh030_start( array )
{
    foreach ( player in level.players )
        player setclienttriggeraudiozone( "br_exfil_heli_int", 0.05 );

    setomnvarforallclients( "ui_br_end_game_splash_type", 13 );
    _id_40F4C8F2B94C5CD9::allplayers_setfov( 45 );
    _id_40F4C8F2B94C5CD9::allplayers_setphysicaldof( 10, 18 );
    level.br_ending.exfilchopper thread chopper_playfx();

    if ( level.br_ending.winners.size == 1 )
        thread chopperexfil_sfx_before_sh070( 1.266 );
}

chopperexfil_sh040_start( _id_1D2BE7531AAF82AF )
{
    setomnvarforallclients( "ui_br_end_game_splash_type", 14 );
    _id_40F4C8F2B94C5CD9::allplayers_setfov( 50 );
    _id_40F4C8F2B94C5CD9::allplayers_setphysicaldof( 11, 30 );
    level.br_ending.exfilchopper thread chopper_playfx();

    if ( isdefined( level.br_ending_debugmode ) )
    {
        foreach ( ent in _id_1D2BE7531AAF82AF )
            ent hide();
    }
    else
        delete_entarray( _id_1D2BE7531AAF82AF );

    if ( level.br_ending.winners.size == 2 )
        thread chopperexfil_sfx_before_sh070( 2.033 );
}

chopperexfil_sh050_start( array )
{
    setomnvarforallclients( "ui_br_end_game_splash_type", 15 );
    _id_40F4C8F2B94C5CD9::allplayers_setfov( 50 );
    _id_40F4C8F2B94C5CD9::allplayers_setphysicaldof( 8, 14.5 );
    level.br_ending.exfilchopper thread chopper_playfx();

    if ( level.br_ending.winners.size == 3 )
        thread chopperexfil_sfx_before_sh070( 2.0 );
}

chopperexfil_sh060_start( array )
{
    setomnvarforallclients( "ui_br_end_game_splash_type", 16 );
    _id_40F4C8F2B94C5CD9::allplayers_setfov( 55 );
    _id_40F4C8F2B94C5CD9::allplayers_setphysicaldof( 3, 29 );
    level.br_ending.exfilchopper thread chopper_playfx();

    if ( level.br_ending.winners.size == 4 )
        thread chopperexfil_sfx_before_sh070( 2.5 );
}

chopperexfil_sh070_start( array )
{
    foreach ( player in level.players )
        player clearclienttriggeraudiozone( 0.1 );

    _id_40F4C8F2B94C5CD9::allplayers_setfov( 65 );
    _id_40F4C8F2B94C5CD9::allplayers_setphysicaldof( 2.8, 500 );
    level.br_ending.exfilchopper thread chopper_playfx();
}

chopperexfil_sitting_wind( players )
{
    foreach ( player in players )
    {
        if ( isdefined( player ) )
            player scripts\mp\utility\player::setwind( "30", 1 );
    }
}

chopperexfil_skip_ascend0( ent )
{
    if ( level.br_ending.winners.size == 1 )
        stop_all_ascend_anims();
}

chopperexfil_skip_ascend1( ent )
{
    if ( level.br_ending.winners.size == 2 )
        stop_all_ascend_anims();
}

chopperexfil_skip_ascend2( ent )
{
    if ( level.br_ending.winners.size == 3 )
        stop_all_ascend_anims();
}

chopperexfil_slamtoblack( ent )
{
    if ( !isdefined( level.br_ending_debugmode ) )
        setomnvarforallclients( "ui_world_fade", 1 );
}

chopper_playfx()
{
    self endon( "death" );
    wait 0.1;
    playfxontag( scripts\engine\utility::getfx( "chopperExfil_rotorwash" ), self, "tag_origin" );
}

delete_entarray( array )
{
    foreach ( ent in array )
    {
        if ( isdefined( ent.linkedents ) )
            scripts\engine\utility::array_delete( ent.linkedents );

        ent delete();
    }
}

stop_all_ascend_anims()
{
    level.br_ending.cam notify( "single anim", "end" );
}
