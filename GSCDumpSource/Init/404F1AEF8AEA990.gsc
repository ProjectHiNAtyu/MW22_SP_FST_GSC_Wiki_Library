// IW9 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

init()
{
    if ( !scripts\cp_mp\utility\game_utility::_id_BA5574C7F287C587() )
        return;

    _id_4A6760982B403BAD::_id_AACBBE63C26687AE( "callback_server_exit_level", ::_id_69DDF7A3E512A18A );
    _id_4A6760982B403BAD::_id_AACBBE63C26687AE( "callback_on_player_disconnect", ::on_player_disconnect );
}

_id_69DDF7A3E512A18A()
{
    foreach ( player in level.players )
    {
        data = spawnstruct();
        data.player = player;
        _id_CE976EE0200475A2( data );
    }
}

_id_CE976EE0200475A2( data )
{
    player = data.player;

    if ( !isdefined( player.pers["telemetry"]._id_C804FA67733B8EF5 ) )
    {
        if ( !_id_4A6760982B403BAD::_id_0892570944F6B6A2( player ) )
            return;

        if ( istrue( player._id_06A91D0E80CC504E ) && !istrue( level.gameended ) )
            return;

        _id_E6D7DE89AE05A160 = -1;
        _id_DCFE556F7026A6FD = 0;

        if ( scripts\cp_mp\utility\game_utility::_id_0BEFF479639E6508() )
        {
            if ( isdefined( player.pers["br_place"] ) )
                _id_E6D7DE89AE05A160 = player.pers["br_place"];

            if ( !isdefined( player.pers["br_survival_time"] ) && isdefined( level.starttime ) )
            {
                gameendtime = level.gameendtime;

                if ( !isdefined( gameendtime ) )
                    gameendtime = gettime();

                player.pers["br_survival_time"] = gameendtime - level.starttime;
                _id_DCFE556F7026A6FD = player.pers["br_survival_time"];
            }
        }

        _id_501F7F9E330F28B6 = "";
        _id_4876357EA766AE0C = "";

        if ( isbot( player ) )
        {
            _id_501F7F9E330F28B6 = player botgetdifficulty();

            if ( isdefined( player._id_E2055BF088954E86 ) )
                _id_4876357EA766AE0C = player._id_E2055BF088954E86;
        }

        player dlog_recordplayerevent( "dlog_event_mobile_player_match_end", [ "place", _id_E6D7DE89AE05A160, "survival_time", _id_DCFE556F7026A6FD, "bot_difficulty", _id_501F7F9E330F28B6, "bot_mind_personality", _id_4876357EA766AE0C ] );
        player.pers["telemetry"]._id_C804FA67733B8EF5 = 1;
    }
}

on_player_disconnect( data )
{
    _id_CE976EE0200475A2( data );
}
