// IW9 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

init()
{
    if ( !isdefined( level.onplayerspawncallbacks ) )
        level.onplayerspawncallbacks = [];

    level thread onplayerconnect();
}

onplayerconnect()
{
    self notify( "spawn_aggregator_onPlayerConnect_singleton" );
    self endon( "spawn_aggregator_onPlayerConnect_singleton" );

    for (;;)
    {
        level waittill( "connected", player );
        player thread onplayerspawned();
    }
}

registeronplayerspawncallback( callback )
{
    if ( !isdefined( level.onplayerspawncallbacks ) )
        init();

    level.onplayerspawncallbacks[level.onplayerspawncallbacks.size] = callback;
}

onplayerspawned()
{
    self endon( "disconnect" );

    for (;;)
    {
        self waittill( "spawned_player" );

        foreach ( callback in level.onplayerspawncallbacks )
            self [[ callback ]]();
    }
}
