// IW9 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

init()
{
    scripts\cp_mp\utility\script_utility::registersharedfunc( "teamAssim", "requestNearbyTeamChange", ::_id_452C678D0120E4B4 );
    scripts\cp_mp\utility\script_utility::registersharedfunc( "teamAssim", "resolveAssimRequest", ::_id_838403168B5AC877 );
    scripts\cp_mp\utility\script_utility::registersharedfunc( "teamAssim", "isWaitingForAssimResponse", ::_id_4335A8EB2D259C81 );
    scripts\cp_mp\utility\script_utility::registersharedfunc( "teamAssim", "isEnabled", ::_id_6934349B7823D888 );
    scripts\cp_mp\utility\script_utility::registersharedfunc( "teamAssim", "disablePlayer", ::_id_BB4125D6847AF349 );
    scripts\cp_mp\utility\script_utility::registersharedfunc( "teamAssim", "enablePlayer", ::_id_59CF08630DD70540 );
    scripts\cp_mp\utility\script_utility::registersharedfunc( "teamAssim", "permanentlyDisableAssim", ::_id_BFD417BD39BD685D );
    scripts\cp_mp\utility\script_utility::registersharedfunc( "teamAssim", "registerTeamAssimilateCallback", ::_id_F3D757808130BAC4 );
    scripts\cp_mp\utility\script_utility::registersharedfunc( "teamAssim", "canAssimilate", ::_id_28AE41A833E83C3F );
    scripts\cp_mp\utility\script_utility::registersharedfunc( "teamAssim", "canTeamAssimilate", ::_id_7DFA4473A3663C96 );
    scripts\cp_mp\utility\script_utility::registersharedfunc( "teamAssim", "assimilatePlayer", ::_id_5822C1EC52C77E6E );
    scripts\cp_mp\utility\script_utility::registersharedfunc( "teamAssim", "shouldAutoAcceptTeamSwitch", ::_id_E2AED369E0BAC150 );
}

_id_F3D757808130BAC4( callback )
{
    if ( !isdefined( level._id_6B08D5E6B7943575 ) )
        level._id_6B08D5E6B7943575 = [];

    level._id_6B08D5E6B7943575[level._id_6B08D5E6B7943575.size] = callback;
}

_id_80139212A4C66A94( player, _id_8A04AA0E0755E7E3, _id_EB06B338608EF354 )
{
    if ( !isdefined( level._id_6B08D5E6B7943575 ) )
        return;

    foreach ( callback in level._id_6B08D5E6B7943575 )
        [[ callback ]]( player, _id_8A04AA0E0755E7E3, _id_EB06B338608EF354 );
}

_id_6934349B7823D888()
{
    if ( !isdefined( level._id_CC0D5A1E8A904E5C ) )
        level._id_CC0D5A1E8A904E5C = getdvarint( "dvar_AF509AC21EC3BD6A", 0 );

    return level._id_CC0D5A1E8A904E5C;
}

_id_9F3B05F2EA701548()
{
    if ( !isdefined( level._id_F759B9E710865CE3 ) )
        level._id_F759B9E710865CE3 = getdvarint( "dvar_1D0D8806C4170519", 0 );

    return level._id_F759B9E710865CE3;
}

_id_17339FA510BD6380()
{
    if ( !isdefined( level._id_5F92F1F4D7FAF5A0 ) )
        level._id_5F92F1F4D7FAF5A0 = getdvarint( "dvar_CF23E6B4C2AE4E63", level.maxteamsize );

    return level._id_5F92F1F4D7FAF5A0;
}

_id_F258CA1FD3C63122()
{
    if ( !isdefined( level._id_4466EC3279C26727 ) )
        level._id_4466EC3279C26727 = getdvarint( "dvar_BB74D762EC936B6D", 1000 );

    return level._id_4466EC3279C26727;
}

_id_7DFA4473A3663C96( team )
{
    if ( !_id_6934349B7823D888() )
        return 0;

    players = scripts\mp\utility\teams::getteamdata( team, "players" );
    _id_0774C9CA5D1D6221 = players.size;
    return _id_0774C9CA5D1D6221 < _id_17339FA510BD6380();
}

_id_28AE41A833E83C3F( _id_3B96D5666000C2E0, _id_784C8ADA1184FF89, _id_E80F1EB2C1910AD4, _id_4ADE2291346E1240 )
{
    if ( istrue( level._id_ED844DB90CB6D370 ) || istrue( _id_3B96D5666000C2E0._id_5B6655655D0F130E ) || istrue( _id_784C8ADA1184FF89._id_5B6655655D0F130E ) )
        return 0;

    _id_1672C24528714D7D = _id_784C8ADA1184FF89.team;

    if ( !_id_04AAECA4295A600D( _id_1672C24528714D7D, _id_3B96D5666000C2E0, _id_E80F1EB2C1910AD4, _id_4ADE2291346E1240 ) )
        return 0;

    return 1;
}

_id_4335A8EB2D259C81( player )
{
    return isdefined( player._id_7F1423DF13BBB144 );
}

_id_E2AED369E0BAC150()
{
    if ( !isdefined( level._id_9CC2A7F8358ECB3B ) )
        level._id_9CC2A7F8358ECB3B = getdvarint( "dvar_A267FF0E64F57760", 0 );

    return level._id_9CC2A7F8358ECB3B;
}

_id_04AAECA4295A600D( _id_1672C24528714D7D, _id_3B96D5666000C2E0, _id_E80F1EB2C1910AD4, _id_72CE9FA792FD31A1 )
{
    if ( _id_9F3B05F2EA701548() && !istrue( _id_3B96D5666000C2E0.inlaststand ) )
    {
        if ( !istrue( _id_72CE9FA792FD31A1 ) )
            _id_E80F1EB2C1910AD4 scripts\mp\hud_message::showerrormessage( "MP_PING_INGAME/ASSIM_FAILED_PLAYER_NOT_DOWNED" );

        return 0;
    }
    else if ( !_id_7DFA4473A3663C96( _id_1672C24528714D7D ) )
    {
        if ( !istrue( _id_72CE9FA792FD31A1 ) )
            _id_E80F1EB2C1910AD4 scripts\mp\hud_message::showerrormessage( "MP_PING_INGAME/ASSIM_FAILED_TEAM_SIZE" );

        return 0;
    }
    else if ( _id_3B96D5666000C2E0 scripts\cp_mp\utility\player_utility::isinvehicle( 1 ) )
    {
        if ( !istrue( _id_72CE9FA792FD31A1 ) )
            _id_E80F1EB2C1910AD4 scripts\mp\hud_message::showerrormessage( "MP_PING_INGAME/ASSIM_FAILED_PLAYER_IN_VEHICLE" );

        return 0;
    }

    return 1;
}

_id_BB4125D6847AF349( player )
{
    player setclientomnvar( "ui_assimilation_disabled", 1 );
    player._id_5B6655655D0F130E = 1;
}

_id_59CF08630DD70540( player )
{
    player setclientomnvar( "ui_assimilation_disabled", 0 );
    player._id_5B6655655D0F130E = 0;
}

_id_BFD417BD39BD685D()
{
    if ( istrue( level._id_ED844DB90CB6D370 ) )
        return;

    level._id_ED844DB90CB6D370 = 1;

    foreach ( player in level.players )
    {
        if ( !istrue( player._id_5B6655655D0F130E ) )
            _id_BB4125D6847AF349( player );
    }
}

_id_452C678D0120E4B4( player, _id_99BCF6BDF31A0E49 )
{
    if ( istrue( level._id_ED844DB90CB6D370 ) || istrue( player._id_5B6655655D0F130E ) )
        return 0;

    if ( !_id_99BCF6BDF31A0E49 && !_id_7DFA4473A3663C96( player.team ) )
    {
        player scripts\mp\hud_message::showerrormessage( "MP_PING_INGAME/ASSIM_FAILED_TEAM_SIZE" );
        return 0;
    }

    if ( scripts\cp_mp\utility\script_utility::issharedfuncdefined( "hud", "showDMZSplash" ) )
        [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "hud", "showDMZSplash" ) ]]( "dmz_team_assimilation_used", [ player ] );

    _id_7FF3973C2AD05964 = _id_F258CA1FD3C63122();
    _id_E965BCE0774276B4 = scripts\mp\utility\player::getplayersinradius( player.origin, _id_7FF3973C2AD05964 );
    _id_C2FDE088E3463C75 = 0;

    foreach ( targetplayer in _id_E965BCE0774276B4 )
    {
        if ( targetplayer == player || targetplayer.team == player.team || !isplayer( targetplayer ) || istrue( targetplayer._id_5B6655655D0F130E ) )
            continue;

        _id_1672C24528714D7D = scripts\engine\utility::ter_op( _id_99BCF6BDF31A0E49, targetplayer.team, player.team );
        _id_3B96D5666000C2E0 = scripts\engine\utility::ter_op( _id_99BCF6BDF31A0E49, player, targetplayer );

        if ( !_id_04AAECA4295A600D( _id_1672C24528714D7D, _id_3B96D5666000C2E0, player, 1 ) )
            continue;

        _id_C2FDE088E3463C75 = 1;
        targetplayer setclientomnvar( "ui_assimilation_clientnum", player getentitynumber() );
        targetplayer._id_7F1423DF13BBB144 = player;
        targetplayer._id_4F8AFA3693E318D4 = _id_99BCF6BDF31A0E49;

        if ( scripts\cp_mp\utility\script_utility::issharedfuncdefined( "hud", "showDMZSplash" ) )
        {
            if ( _id_99BCF6BDF31A0E49 )
                [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "hud", "showDMZSplash" ) ]]( "dmz_team_assimilation_requested_join_on_target", [ targetplayer ] );
            else
                [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "hud", "showDMZSplash" ) ]]( "dmz_team_assimilation_requested", [ targetplayer ] );
        }

        if ( _id_E2AED369E0BAC150() )
            _id_838403168B5AC877( targetplayer, 1 );
    }

    if ( _id_C2FDE088E3463C75 && scripts\cp_mp\utility\script_utility::issharedfuncdefined( "pmc_missions", "onRequestTeamAssimilate" ) )
        [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "pmc_missions", "onRequestTeamAssimilate" ) ]]( player );
}

_id_838403168B5AC877( player, _id_E3F7965361B1E757 )
{
    _id_3B96D5666000C2E0 = scripts\engine\utility::ter_op( istrue( player._id_4F8AFA3693E318D4 ), player._id_7F1423DF13BBB144, player );
    _id_784C8ADA1184FF89 = scripts\engine\utility::ter_op( istrue( player._id_4F8AFA3693E318D4 ), player, player._id_7F1423DF13BBB144 );

    if ( !_id_28AE41A833E83C3F( _id_3B96D5666000C2E0, _id_784C8ADA1184FF89, player, 0 ) )
    {
        player setclientomnvar( "ui_assimilation_clientnum", -1 );
        return;
    }

    if ( _id_E3F7965361B1E757 )
        _id_5822C1EC52C77E6E( _id_3B96D5666000C2E0, _id_784C8ADA1184FF89, 0 );
    else
        [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "hud", "showDMZSplash" ) ]]( "dmz_team_assimilation_request_denied", [ player._id_7F1423DF13BBB144 ] );

    player._id_7F1423DF13BBB144 = undefined;
    player._id_4F8AFA3693E318D4 = undefined;
    player setclientomnvar( "ui_assimilation_clientnum", -1 );
}

_id_5822C1EC52C77E6E( _id_3B96D5666000C2E0, _id_784C8ADA1184FF89, _id_B215274F1A3EB134 )
{
    _id_8A04AA0E0755E7E3 = _id_3B96D5666000C2E0.team;
    _id_EB06B338608EF354 = _id_784C8ADA1184FF89.team;
    _id_43B043539F9C3CCF = _id_784C8ADA1184FF89._id_0FF97225579DE16A;
    _id_67D0631AD9027F83 = !istrue( _id_B215274F1A3EB134 );

    if ( scripts\cp_mp\utility\script_utility::issharedfuncdefined( "hud", "showDMZSplash" ) )
    {
        [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "hud", "showDMZSplash" ) ]]( "player_team_switched", [ _id_3B96D5666000C2E0 ] );
        players = scripts\mp\utility\teams::getteamdata( _id_EB06B338608EF354, "players" );

        foreach ( player in players )
            [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "hud", "showDMZSplash" ) ]]( "player_joined_team", [ player ] );
    }

    _id_3B96D5666000C2E0 thread scripts\mp\menus::addtoteam( _id_EB06B338608EF354, undefined, _id_67D0631AD9027F83, 1 );
    _id_3B96D5666000C2E0 thread _id_76CC264B397DB9CB::setsquad( _id_EB06B338608EF354, _id_43B043539F9C3CCF );
    scripts\cp_mp\calloutmarkerping::_id_5991BC039B1244EC( _id_3B96D5666000C2E0 );
    _id_80139212A4C66A94( _id_3B96D5666000C2E0, _id_8A04AA0E0755E7E3, _id_EB06B338608EF354 );
}
