// IW9 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

vehicle_interact_getleveldataforvehicle( _id_7731ADEF63E19B0C, create, _id_6ECB77FD1F27C667 )
{
    if ( istrue( create ) && ( !scripts\cp_mp\vehicles\vehicle::_id_89DC39DC11F3988C( _id_7731ADEF63E19B0C ) || !isdefined( scripts\cp_mp\vehicles\vehicle::_id_29B4292C92443328( _id_7731ADEF63E19B0C ).interact ) ) )
    {
        data = undefined;

        if ( !scripts\cp_mp\vehicles\vehicle::_id_89DC39DC11F3988C( _id_7731ADEF63E19B0C ) )
            data = spawnstruct();
        else
            data = scripts\cp_mp\vehicles\vehicle::_id_29B4292C92443328( _id_7731ADEF63E19B0C );

        if ( !isdefined( data.interact ) )
            data.interact = spawnstruct();

        data.interact._id_ED5C39E0B1EF815C = [];
        data.interact._id_29F1EA79ED2B40DD = 180;
        data.interact._id_4C6D695D0920DF19 = 130;
        data.interact._id_4C4A7B5D08FABEF7 = 170;
        level._id_A0B2C978CA57FFC5[_id_7731ADEF63E19B0C] = data;
    }

    if ( scripts\cp_mp\vehicles\vehicle::_id_89DC39DC11F3988C( _id_7731ADEF63E19B0C ) )
        return scripts\cp_mp\vehicles\vehicle::_id_29B4292C92443328( _id_7731ADEF63E19B0C ).interact;
}

vehicle_interact_getinstancedataforvehicle( vehicle, create, _id_6ECB77FD1F27C667 )
{
    _id_E2818AD39A3341B4 = vehicle_interact_getleveldataforvehicle( vehicle.vehiclename, create, _id_6ECB77FD1F27C667 );

    if ( !isdefined( _id_E2818AD39A3341B4 ) )
        return undefined;

    if ( !isdefined( vehicle getlinkedscriptableinstance() ) )
        return undefined;

    _id_72141EAB56FB408F = vehicle.interactdata;

    if ( !isdefined( _id_72141EAB56FB408F ) )
    {
        if ( istrue( create ) )
        {
            _id_72141EAB56FB408F = spawnstruct();
            vehicle.interactdata = _id_72141EAB56FB408F;
            _id_72141EAB56FB408F.disabledbyallow = 0;
            _id_72141EAB56FB408F.pointdata = [];

            foreach ( _id_015FCF7D846A9D9A in _id_E2818AD39A3341B4._id_ED5C39E0B1EF815C )
                _id_72141EAB56FB408F.pointdata[_id_015FCF7D846A9D9A] = vehicle_interact_getinstancedataforpoint( vehicle, _id_015FCF7D846A9D9A, create, _id_6ECB77FD1F27C667 );

            _id_72141EAB56FB408F.dirty = 1;
            _id_72141EAB56FB408F.disabled = undefined;
            _id_72141EAB56FB408F.availableteam = undefined;
        }
        else
        {

        }
    }

    return _id_72141EAB56FB408F;
}

_id_3E11A192D07B42EA( _id_7731ADEF63E19B0C, _id_015FCF7D846A9D9A, _id_1226C93AD199F9F1 )
{
    _id_E2818AD39A3341B4 = vehicle_interact_getleveldataforvehicle( _id_7731ADEF63E19B0C, undefined, 1 );

    if ( !isdefined( _id_E2818AD39A3341B4 ) )
        return;

    _id_1B7218958DC3B187 = _id_247FF3BB886C55FF( _id_015FCF7D846A9D9A );
    _id_E2818AD39A3341B4._id_ED5C39E0B1EF815C = scripts\engine\utility::array_add( _id_E2818AD39A3341B4._id_ED5C39E0B1EF815C, _id_015FCF7D846A9D9A );
    _id_CF0F83CC6E448DEB( "activate", _id_015FCF7D846A9D9A, _id_1226C93AD199F9F1, _id_E2818AD39A3341B4 );
}

vehicle_interact_registerinstance( vehicle )
{
    vehicle_interact_getinstancedataforvehicle( vehicle, 1 );
    vehicle_interact_makeusable( vehicle );
    _id_962A30A9BB8C0F09 = vehicle_interact_getleveldata();
    _id_962A30A9BB8C0F09.vehicles[vehicle getentitynumber()] = vehicle;
}

vehicle_interact_deregisterinstance( vehicle )
{
    _id_962A30A9BB8C0F09 = vehicle_interact_getleveldata();

    if ( isdefined( _id_962A30A9BB8C0F09.vehicles[vehicle getentitynumber()] ) )
        vehicle_interact_makeunusable( vehicle );

    _id_962A30A9BB8C0F09.vehicles[vehicle getentitynumber()] = undefined;
    vehicle.interactdata = undefined;
}

vehicle_interact_instanceisregistered( vehicle )
{
    return isdefined( vehicle.interactdata );
}

vehicle_interact_allowvehicleuseglobal( _id_E3108E412AFB3811 )
{
    _id_962A30A9BB8C0F09 = vehicle_interact_getleveldata();

    if ( !isdefined( _id_962A30A9BB8C0F09.vehicles ) )
        return;

    if ( !_id_E3108E412AFB3811 )
    {
        _id_962A30A9BB8C0F09.disabledbyallow++;

        if ( _id_962A30A9BB8C0F09.disabledbyallow == 1 )
        {
            foreach ( vehicle in _id_962A30A9BB8C0F09.vehicles )
            {
                vehicle_interact_setvehicledirty( vehicle );
                vehicle_interact_updateusability( vehicle );
            }
        }
    }
    else
    {
        _id_962A30A9BB8C0F09.disabledbyallow--;

        if ( _id_962A30A9BB8C0F09.disabledbyallow == 0 )
        {
            foreach ( vehicle in _id_962A30A9BB8C0F09.vehicles )
            {
                vehicle_interact_setvehicledirty( vehicle );
                vehicle_interact_updateusability( vehicle );
            }
        }
    }
}

vehicle_interact_allowvehicleuse( vehicle, _id_E3108E412AFB3811 )
{
    _id_72141EAB56FB408F = vehicle_interact_getinstancedataforvehicle( vehicle, undefined, 1 );

    if ( !isdefined( _id_72141EAB56FB408F ) )
        return;

    if ( !_id_E3108E412AFB3811 )
    {
        _id_72141EAB56FB408F.disabledbyallow++;

        if ( _id_72141EAB56FB408F.disabledbyallow == 1 )
        {
            vehicle_interact_setvehicledirty( vehicle );
            vehicle_interact_updateusability( vehicle );
        }
    }
    else
    {
        _id_72141EAB56FB408F.disabledbyallow--;

        if ( _id_72141EAB56FB408F.disabledbyallow == 0 )
        {
            vehicle_interact_setvehicledirty( vehicle );
            vehicle_interact_updateusability( vehicle );
        }
    }
}

vehicle_interact_init()
{
    _id_962A30A9BB8C0F09 = spawnstruct();
    level.vehicle.interact = _id_962A30A9BB8C0F09;
    _id_962A30A9BB8C0F09.vehicledata = [];
    _id_962A30A9BB8C0F09._id_ED5C39E0B1EF815C = [];
    _id_962A30A9BB8C0F09.disabledbyallow = 0;
    _id_BFC085DDF18E1712( "single", ::_id_F1F336C41F281C07, ::_id_CD93C6E46BC00381, ::_id_39C1F2552DCFD9B0, ::_id_C9601FED18D5B11E );
    _id_BFC085DDF18E1712( "upgrade", ::_id_2B58C6EEAEA42C35, ::_id_D2B057155910001B, ::_id_2BC48C2BCC22A4FE, ::_id_BD192331E198BE64 );
    _id_BFC085DDF18E1712( "copyofupgrade", ::_id_2B58C6EEAEA42C35, ::_id_D2B057155910001B, ::_id_2BC48C2BCC22A4FE, ::_id_BD192331E198BE64 );
    level thread _id_F588087BF9D7FEFB();
    scripts\engine\scriptable::scriptable_addusedcallback( ::vehicle_interact_scriptableused );

    if ( scripts\cp_mp\utility\script_utility::issharedfuncdefined( "vehicle_interact", "init", 1 ) )
        [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "vehicle_interact", "init" ) ]]();

    level thread _id_AE4888C247642906();
}

_id_AE4888C247642906()
{
    for (;;)
    {
        waitframe();
        waittillframeend;
        level.vehicle._id_2B6807C7DF9A2B2D = undefined;
    }
}

_id_79E9116EBF7DC551()
{
    if ( isdefined( level.vehicle._id_2B6807C7DF9A2B2D ) )
        return;

    vehicles = vehicle_interact_getleveldata().vehicles;

    if ( isdefined( vehicles ) && vehicles.size > 0 )
    {
        level.vehicle._id_2B6807C7DF9A2B2D = scripts\engine\utility::_id_21A6A1C613B50A28( [], 650 );

        foreach ( vehicle in vehicles )
        {
            if ( isdefined( vehicle ) && isdefined( vehicle.origin ) )
                level.vehicle._id_2B6807C7DF9A2B2D scripts\engine\utility::_id_24BBEFB4BEDA630D( vehicle );
        }
    }
}

_id_BFC085DDF18E1712( _id_015FCD7D846A9934, _id_DA1C69068B772B09, _id_9182C2DD101AE147, activatefunc, _id_B5F98A8061379598 )
{
    _id_962A30A9BB8C0F09 = vehicle_interact_getleveldata();
    _id_277A287AB71BB547 = spawnstruct();
    callbacks = [];
    callbacks["useInstance"] = _id_DA1C69068B772B09;
    callbacks["cleanInstance"] = _id_9182C2DD101AE147;
    callbacks["activate"] = activatefunc;
    callbacks["createInstance"] = _id_B5F98A8061379598;
    _id_277A287AB71BB547.callbacks = callbacks;
    _id_962A30A9BB8C0F09._id_ED5C39E0B1EF815C[_id_015FCD7D846A9934] = _id_277A287AB71BB547;
}

vehicle_interact_scriptableused( instance, part, state, player, _id_A5B2C541413AA895, _id_CC38472E36BE1B61 )
{
    if ( state == "vehicle_use" )
    {
        vehicle = instance.entity;
        _id_015FCF7D846A9D9A = part;

        if ( vehicle_interact_playercanusevehicles( player ) )
        {
            if ( istrue( vehicle_interact_vehiclecanbeused( vehicle ) ) )
            {
                if ( vehicle_interact_playercanusevehicle( player, vehicle ) )
                {
                    if ( vehicle_interact_pointcanbeused( vehicle, _id_015FCF7D846A9D9A ) )
                    {
                        _id_1F4CF79F66927511 = vehicle_interact_getinstancedataforpoint( vehicle, _id_015FCF7D846A9D9A );
                        _id_CF0F83CC6E448DEB( "useInstance", _id_015FCF7D846A9D9A, _id_1F4CF79F66927511, vehicle, player );
                    }
                }
            }
        }
    }
}

vehicle_interact_updateplayerusability( player, vehicles )
{
    _id_962A30A9BB8C0F09 = vehicle_interact_getleveldata();

    if ( !vehicle_interact_playercanusevehicles( player ) )
    {
        foreach ( vehicle in vehicles )
        {
            if ( isdefined( vehicle ) )
                vehicle disablescriptableplayeruse( player );
        }

        return;
    }

    foreach ( vehicle in vehicles )
    {
        if ( !isdefined( vehicle ) )
            continue;

        if ( istrue( vehicle_interact_vehiclecanbeused( vehicle ) ) && vehicle_interact_playercanusevehicle( player, vehicle ) )
        {
            vehicle enablescriptableplayeruse( player );
            continue;
        }

        vehicle disablescriptableplayeruse( player );
    }
}

vehicle_interact_monitorplayerusability( player )
{
    level endon( "game_ended" );
    player endon( "disconnect" );

    for (;;)
    {
        player waittill( "update_vehicle_usability", _id_BD572A35F03CED5B );
        vehicle_interact_updateplayerusability( player, _id_BD572A35F03CED5B );
    }
}

vehicle_interact_getleveldata()
{
    return level.vehicle.interact;
}

_id_247FF3BB886C55FF( _id_015FCF7D846A9D9A )
{
    return level.vehicle.interact._id_ED5C39E0B1EF815C[_id_015FCF7D846A9D9A];
}

_id_CF0F83CC6E448DEB( _id_B1B6487BC37B37FB, _id_015FCF7D846A9D9A, _id_CE4B3AF5B29C05AF, _id_346563F5FDA7D489, _id_72EACC3730EC7823 )
{
    _id_1B7218958DC3B187 = _id_247FF3BB886C55FF( _id_015FCF7D846A9D9A );
    _id_847D2A046CAA4B54 = _id_1B7218958DC3B187.callbacks[_id_B1B6487BC37B37FB];

    if ( isdefined( _id_847D2A046CAA4B54 ) )
        level thread [[ _id_847D2A046CAA4B54 ]]( _id_015FCF7D846A9D9A, _id_CE4B3AF5B29C05AF, _id_346563F5FDA7D489, _id_72EACC3730EC7823 );
}

vehicle_interact_playercanusevehicles( player )
{
    if ( !isdefined( player ) )
        return 0;

    if ( !player scripts\cp_mp\utility\player_utility::_isalive() )
        return 0;

    if ( !player _id_3B64EB40368C1450::_id_E0751B03DFB9EB43( "vehicle_use" ) )
        return 0;

    if ( player isparachuting() || player isskydiving() )
        return 0;

    if ( player isinexecutionattack() || player isinexecutionvictim() )
        return 0;

    if ( istrue( level.infiltransistioning ) )
        return 0;

    return 1;
}

vehicle_interact_vehiclecanbeused( vehicle )
{
    _id_72141EAB56FB408F = vehicle_interact_getinstancedataforvehicle( vehicle, undefined, 1 );

    if ( !isdefined( _id_72141EAB56FB408F ) )
        return undefined;

    if ( _id_72141EAB56FB408F.dirty )
        vehicle_interact_cleanvehicle( vehicle );

    return !_id_72141EAB56FB408F.disabled;
}

vehicle_interact_pointcanbeused( vehicle, _id_015FCF7D846A9D9A )
{
    _id_1F4CF79F66927511 = vehicle_interact_getinstancedataforpoint( vehicle, _id_015FCF7D846A9D9A, undefined, 1 );

    if ( !isdefined( _id_1F4CF79F66927511 ) )
        return undefined;

    if ( _id_1F4CF79F66927511.dirty )
        vehicle_interact_cleanpoint( vehicle, _id_015FCF7D846A9D9A );

    return !_id_1F4CF79F66927511.disabled;
}

vehicle_interact_playercanusevehicle( player, vehicle )
{
    if ( level.teambased )
    {
        team = vehicle_interact_getvehicleavailableteam( vehicle );

        if ( isdefined( team ) && team != player.team )
            return 0;
    }
    else
    {
        playerfriendlyto = scripts\cp_mp\vehicles\vehicle_occupancy::vehicle_occupancy_getplayerfriendlyto( vehicle );

        if ( isdefined( playerfriendlyto ) && playerfriendlyto != player )
            return 0;
    }

    return 1;
}

vehicle_interact_getvehicleavailableteam( vehicle )
{
    _id_72141EAB56FB408F = vehicle_interact_getinstancedataforvehicle( vehicle, undefined, 1 );

    if ( !isdefined( _id_72141EAB56FB408F ) )
        return undefined;

    if ( _id_72141EAB56FB408F.dirty )
        vehicle_interact_cleanvehicle( vehicle );

    return _id_72141EAB56FB408F.availableteam;
}

vehicle_interact_setvehicledirty( vehicle )
{
    _id_72141EAB56FB408F = vehicle_interact_getinstancedataforvehicle( vehicle, undefined, 1 );

    if ( !isdefined( _id_72141EAB56FB408F ) )
        return;

    _id_72141EAB56FB408F.dirty = 1;
}

_id_5C097A8F16A227D5( show )
{
    if ( isdefined( self ) && self isscriptable() && self getscriptablehaspart( "visibility" ) )
        self setscriptablepartstate( "visibility", scripts\engine\utility::ter_op( istrue( show ), "show", "hide" ) );
}

vehicle_interact_cleanvehicle( vehicle )
{
    _id_962A30A9BB8C0F09 = vehicle_interact_getleveldata();
    _id_72141EAB56FB408F = vehicle_interact_getinstancedataforvehicle( vehicle, undefined, 1 );

    if ( !isdefined( _id_72141EAB56FB408F ) )
        return;

    if ( level.teambased )
    {
        teamfriendlyto = scripts\cp_mp\vehicles\vehicle_occupancy::vehicle_occupancy_getteamfriendlyto( vehicle );

        if ( isdefined( teamfriendlyto ) )
            _id_72141EAB56FB408F.availableteam = teamfriendlyto;
        else
        {
            availableteam = undefined;
            _id_DB47E5CED41F6CA8 = scripts\cp_mp\vehicles\vehicle_occupancy::vehicle_occupancy_getreserving( vehicle );

            foreach ( player in _id_DB47E5CED41F6CA8 )
            {
                if ( isdefined( player ) )
                {
                    availableteam = player.team;
                    break;
                }
            }

            _id_72141EAB56FB408F.availableteam = availableteam;
        }
    }

    if ( _id_962A30A9BB8C0F09.disabledbyallow > 0 )
        _id_72141EAB56FB408F.disabled = 1;
    else if ( _id_72141EAB56FB408F.disabledbyallow > 0 )
        _id_72141EAB56FB408F.disabled = 1;
    else
        _id_72141EAB56FB408F.disabled = 0;

    _id_72141EAB56FB408F.dirty = 0;
}

vehicle_interact_getinstancedataforpoint( vehicle, _id_015FCF7D846A9D9A, create, _id_6ECB77FD1F27C667 )
{
    _id_72141EAB56FB408F = vehicle_interact_getinstancedataforvehicle( vehicle, create, _id_6ECB77FD1F27C667 );

    if ( !isdefined( _id_72141EAB56FB408F ) )
        return undefined;

    _id_1F4CF79F66927511 = _id_72141EAB56FB408F.pointdata[_id_015FCF7D846A9D9A];

    if ( !isdefined( _id_1F4CF79F66927511 ) && isdefined( create ) )
    {
        if ( istrue( create ) )
        {
            _id_1F4CF79F66927511 = spawnstruct();
            _id_72141EAB56FB408F.pointdata[_id_015FCF7D846A9D9A] = _id_1F4CF79F66927511;
            _id_1F4CF79F66927511.dirty = 1;
            _id_1F4CF79F66927511.disabled = undefined;
            _id_CF0F83CC6E448DEB( "createInstance", _id_015FCF7D846A9D9A, _id_1F4CF79F66927511, vehicle );
        }
        else
        {

        }
    }

    return _id_1F4CF79F66927511;
}

vehicle_interact_pointisdisabled( vehicle, _id_015FCF7D846A9D9A )
{
    _id_1F4CF79F66927511 = vehicle_interact_getinstancedataforpoint( vehicle, _id_015FCF7D846A9D9A, undefined, 1 );

    if ( !isdefined( _id_1F4CF79F66927511 ) )
        return undefined;

    if ( _id_1F4CF79F66927511.dirty )
        vehicle_interact_cleanpoint( vehicle, _id_015FCF7D846A9D9A );

    return _id_1F4CF79F66927511.disabled;
}

vehicle_interact_pointavailableseat( vehicle, _id_015FCF7D846A9D9A )
{
    _id_1F4CF79F66927511 = vehicle_interact_getinstancedataforpoint( vehicle, _id_015FCF7D846A9D9A, undefined, 1 );

    if ( !isdefined( _id_1F4CF79F66927511 ) )
        return undefined;

    if ( _id_1F4CF79F66927511.dirty )
        vehicle_interact_cleanpoint( vehicle, _id_015FCF7D846A9D9A );

    return _id_1F4CF79F66927511.availableseatid;
}

vehicle_interact_setpointdirty( vehicle, _id_015FCF7D846A9D9A )
{
    _id_1F4CF79F66927511 = vehicle_interact_getinstancedataforpoint( vehicle, _id_015FCF7D846A9D9A, undefined, 1 );

    if ( !isdefined( _id_1F4CF79F66927511 ) )
        return;

    _id_1F4CF79F66927511.dirty = 1;
}

vehicle_interact_setpointsdirty( vehicle )
{
    _id_72141EAB56FB408F = vehicle_interact_getinstancedataforvehicle( vehicle, undefined, 1 );

    if ( !isdefined( _id_72141EAB56FB408F ) )
        return;

    foreach ( pointdata in _id_72141EAB56FB408F.pointdata )
        pointdata.dirty = 1;

    _id_72141EAB56FB408F.dirty = 1;
}

vehicle_interact_cleanpoint( vehicle, _id_015FCF7D846A9D9A )
{
    _id_1F4CF79F66927511 = vehicle_interact_getinstancedataforpoint( vehicle, _id_015FCF7D846A9D9A, undefined, 1 );

    if ( !isdefined( _id_1F4CF79F66927511 ) )
        return;

    _id_CF0F83CC6E448DEB( "cleanInstance", _id_015FCF7D846A9D9A, _id_1F4CF79F66927511, vehicle );
    _id_1F4CF79F66927511.dirty = 0;
}

vehicle_interact_makeusable( vehicle )
{
    if ( istrue( vehicle_interact_getleveldataforvehicle( vehicle scripts\cp_mp\vehicles\vehicle::_id_D93EC4635290FEBD() )._id_6BE1425A9EA8586D ) )
        return;

    vehicle_interact_updateusability( vehicle );
}

vehicle_interact_makeunusable( vehicle )
{
    _id_72141EAB56FB408F = vehicle_interact_getinstancedataforvehicle( vehicle, undefined, 1 );

    if ( !isdefined( _id_72141EAB56FB408F ) )
        return;

    if ( istrue( vehicle_interact_getleveldataforvehicle( vehicle scripts\cp_mp\vehicles\vehicle::_id_D93EC4635290FEBD() )._id_6BE1425A9EA8586D ) )
        return;

    _id_70533A0A3679476B = getarraykeys( _id_72141EAB56FB408F.pointdata );

    foreach ( _id_015FCF7D846A9D9A in _id_70533A0A3679476B )
        vehicle setscriptablepartstate( _id_015FCF7D846A9D9A, "vehicle_unusable" );
}

vehicle_interact_updateusability( vehicle )
{
    _id_72141EAB56FB408F = vehicle_interact_getinstancedataforvehicle( vehicle, undefined, 1 );

    if ( !isdefined( _id_72141EAB56FB408F ) )
        return;

    if ( istrue( vehicle_interact_getleveldataforvehicle( vehicle scripts\cp_mp\vehicles\vehicle::_id_D93EC4635290FEBD() )._id_6BE1425A9EA8586D ) )
        return;

    if ( _id_72141EAB56FB408F.dirty )
        vehicle_interact_cleanvehicle( vehicle );

    if ( _id_72141EAB56FB408F.disabled )
    {
        vehicle_interact_makeunusable( vehicle );
        return;
    }

    foreach ( _id_015FCF7D846A9D9A, pointdata in _id_72141EAB56FB408F.pointdata )
    {
        if ( pointdata.dirty )
            vehicle_interact_cleanpoint( vehicle, _id_015FCF7D846A9D9A );

        if ( pointdata.disabled )
        {
            vehicle setscriptablepartstate( _id_015FCF7D846A9D9A, "vehicle_unusable" );
            continue;
        }

        vehicle setscriptablepartstate( _id_015FCF7D846A9D9A, "vehicle_use" );
    }
}

_id_F1F336C41F281C07( _id_015FCF7D846A9D9A, _id_1F4CF79F66927511, vehicle, player )
{
    seatid = _id_1F4CF79F66927511.availableseatid;

    if ( seatid != "driver" && seatid != "gunner" )
        seatid = _id_91B9E7FB0F262529( player, vehicle, seatid );

    thread scripts\cp_mp\vehicles\vehicle_occupancy::vehicle_occupancy_enter( vehicle, seatid, player );
}

_id_91B9E7FB0F262529( player, vehicle, _id_812C17D89F729506 )
{
    _id_E813FA37F0C5A3C1 = _id_812C17D89F729506;
    _id_E9B865F84C8EAA6B = undefined;

    foreach ( seatid, seatdata in scripts\cp_mp\vehicles\vehicle::_id_29B4292C92443328( vehicle scripts\cp_mp\vehicles\vehicle::_id_D93EC4635290FEBD() ).occupancy.seatdata )
    {
        if ( scripts\cp_mp\vehicles\vehicle_occupancy::vehicle_occupancy_seatisavailable( vehicle, seatid ) && isdefined( seatdata.animtag ) )
        {
            _id_50F1AC2AFF931B50 = distancesquared( player.origin, vehicle gettagorigin( seatdata.animtag ) );

            if ( !isdefined( _id_E9B865F84C8EAA6B ) || _id_50F1AC2AFF931B50 < _id_E9B865F84C8EAA6B )
            {
                _id_E813FA37F0C5A3C1 = seatid;
                _id_E9B865F84C8EAA6B = _id_50F1AC2AFF931B50;
            }
        }
    }

    return _id_E813FA37F0C5A3C1;
}

_id_CD93C6E46BC00381( _id_015FCF7D846A9D9A, _id_1F4CF79F66927511, vehicle, _id_E01D015FC5C02677 )
{
    _id_9D0537BE150542B3 = _id_1F4CF79F66927511._id_9D0537BE150542B3;
    availableseatid = undefined;

    foreach ( seatid in _id_9D0537BE150542B3 )
    {
        if ( scripts\cp_mp\vehicles\vehicle_occupancy::vehicle_occupancy_seatisavailable( vehicle, seatid ) )
        {
            availableseatid = seatid;
            break;
        }
    }

    _id_1F4CF79F66927511.disabled = !isdefined( availableseatid );
    _id_1F4CF79F66927511.availableseatid = availableseatid;
}

_id_39C1F2552DCFD9B0( _id_015FCF7D846A9D9A, _id_9D0537BE150542B3, _id_E2818AD39A3341B4, _id_5721B85EA5381B5D )
{
    _id_E2818AD39A3341B4._id_9D0537BE150542B3 = _id_9D0537BE150542B3;
}

_id_C9601FED18D5B11E( _id_015FCF7D846A9D9A, _id_1F4CF79F66927511, vehicle, _id_5721B85EA5381B5D )
{
    _id_E2818AD39A3341B4 = vehicle_interact_getleveldataforvehicle( vehicle.vehiclename, undefined, 1 );
    _id_1F4CF79F66927511.availableseatid = undefined;
    _id_1F4CF79F66927511._id_9D0537BE150542B3 = _id_E2818AD39A3341B4._id_9D0537BE150542B3;
}

_id_E1F37F2BD447AB19( vehicle, player )
{
    if ( isdefined( vehicle ) )
    {
        if ( !isdefined( vehicle._id_9AEB5660C6DF86E1 ) )
            vehicle._id_9AEB5660C6DF86E1 = [];

        vehicle._id_9AEB5660C6DF86E1 = scripts\engine\utility::array_add( vehicle._id_9AEB5660C6DF86E1, player );
    }
}

_id_FED77CD5C54EFE19( vehicle, player )
{
    if ( isdefined( vehicle ) && isdefined( vehicle._id_9AEB5660C6DF86E1 ) )
        vehicle._id_9AEB5660C6DF86E1 = scripts\engine\utility::array_remove( vehicle._id_9AEB5660C6DF86E1, player );
}

_id_2B58C6EEAEA42C35( _id_015FCF7D846A9D9A, _id_1F4CF79F66927511, vehicle, player )
{
    if ( scripts\cp_mp\utility\script_utility::issharedfuncdefined( "vehicle_upgrade", "init" ) )
    {
        if ( !isdefined( level.br_pe_data ) )
        {
            player iprintlnbold( "BR Kiosk station is not activated in this game mode" );
            return;
        }

        [[ _id_1F4CF79F66927511._id_4DC9E517025A78B6 ]]( vehicle, player );
        player setclientomnvar( "ui_buystation_override", _id_1F4CF79F66927511._id_0420BBDE8D99EC0A );
        player._id_E5B7A6A0EC2B440E = 1;
        player._id_C77002478CDFD85F = vehicle;
        _id_E1F37F2BD447AB19( vehicle, player );
        _id_08CE0CDDAAD539B3 = scripts\cp_mp\utility\script_utility::getsharedfunc( "vehicle_upgrade", "init" );
        _id_15B89FF206500554 = _id_D9750CBA41DE6A13( vehicle, _id_015FCF7D846A9D9A );
        player thread [[ _id_08CE0CDDAAD539B3 ]]( _id_15B89FF206500554 );
    }
}

_id_D2B057155910001B( _id_015FCF7D846A9D9A, _id_1F4CF79F66927511, vehicle, _id_E01D015FC5C02677 )
{
    _id_1F4CF79F66927511.disabled = 0;
}

_id_2BC48C2BCC22A4FE( _id_015FCF7D846A9D9A, _id_1226C93AD199F9F1, _id_E2818AD39A3341B4, _id_5721B85EA5381B5D )
{
    if ( !isdefined( _id_E2818AD39A3341B4._id_EE340F5CD8FF86A6 ) )
        _id_E2818AD39A3341B4._id_EE340F5CD8FF86A6 = [];

    if ( !isdefined( _id_E2818AD39A3341B4._id_CCA5FC4158FD7CEB ) )
        _id_E2818AD39A3341B4._id_CCA5FC4158FD7CEB = [];

    if ( !isdefined( _id_E2818AD39A3341B4._id_4DC9E517025A78B6 ) )
        _id_E2818AD39A3341B4._id_4DC9E517025A78B6 = [];

    _id_E2818AD39A3341B4._id_EE340F5CD8FF86A6[_id_015FCF7D846A9D9A] = _id_1226C93AD199F9F1[0];
    _id_E2818AD39A3341B4._id_CCA5FC4158FD7CEB[_id_015FCF7D846A9D9A] = _id_1226C93AD199F9F1[1];
    _id_E2818AD39A3341B4._id_4DC9E517025A78B6[_id_015FCF7D846A9D9A] = _id_1226C93AD199F9F1[2];
}

_id_BD192331E198BE64( _id_015FCF7D846A9D9A, _id_1F4CF79F66927511, vehicle, _id_5721B85EA5381B5D )
{
    _id_E2818AD39A3341B4 = vehicle_interact_getleveldataforvehicle( vehicle.vehiclename, undefined, 1 );
    _id_1F4CF79F66927511._id_0420BBDE8D99EC0A = _id_E2818AD39A3341B4._id_CCA5FC4158FD7CEB[_id_015FCF7D846A9D9A];
    _id_1F4CF79F66927511._id_4DC9E517025A78B6 = _id_E2818AD39A3341B4._id_4DC9E517025A78B6[_id_015FCF7D846A9D9A];
    _id_D9F0E1B450F12BBC = _id_E2818AD39A3341B4._id_EE340F5CD8FF86A6[_id_015FCF7D846A9D9A];
    _id_16AB0DCEFAA4C681( vehicle, _id_015FCF7D846A9D9A, _id_D9F0E1B450F12BBC );
}

_id_D9750CBA41DE6A13( vehicle, _id_47187249FC261259 )
{
    return vehicle._id_62F37D3CD23E2D82[_id_47187249FC261259];
}

_id_16AB0DCEFAA4C681( vehicle, _id_47187249FC261259, _id_D9F0E1B450F12BBC )
{
    if ( !isdefined( vehicle._id_62F37D3CD23E2D82 ) )
        vehicle._id_62F37D3CD23E2D82 = [];

    _id_15B89FF206500554 = spawnstruct();
    _id_15B89FF206500554 thread _id_12D9B5736427FA79( vehicle, _id_D9F0E1B450F12BBC );
    vehicle._id_62F37D3CD23E2D82[_id_47187249FC261259] = _id_15B89FF206500554;
}

_id_12D9B5736427FA79( vehicle, _id_D9F0E1B450F12BBC )
{
    vehicle endon( "death" );

    for (;;)
    {
        self.origin = vehicle gettagorigin( _id_D9F0E1B450F12BBC );
        wait 0.5;
    }
}

_id_969511C7E34A4434( vehicle, _id_5473A133B9D77893 )
{
    _id_900D33B17A759E33( vehicle );
    return isdefined( vehicle._id_00DF77EACC566F76 ) && istrue( vehicle._id_00DF77EACC566F76[_id_5473A133B9D77893] );
}

_id_900D33B17A759E33( vehicle )
{
    if ( !isdefined( vehicle._id_00DF77EACC566F76 ) )
        vehicle._id_00DF77EACC566F76 = [];
}

_id_C4B9D8E33849435E( vehicle, _id_5473A133B9D77893, player )
{
    _id_80BF1A72DD12AFE2( vehicle, _id_5473A133B9D77893 );
    vehicle notify( "give_upgrade", _id_5473A133B9D77893, player );
}

_id_80BF1A72DD12AFE2( vehicle, _id_5473A133B9D77893 )
{
    _id_900D33B17A759E33( vehicle );
    vehicle._id_00DF77EACC566F76[_id_5473A133B9D77893] = 1;
}

_id_A717A31AE35BA01C()
{
    return getdvarint( "dvar_548A5A7DCB6BDE02", 0 ) == 1;
}

_id_F588087BF9D7FEFB()
{
    level endon( "game_ended" );
    waitframe();

    if ( !_id_A717A31AE35BA01C() )
        return;

    _id_354F6E3EEBCE5123 = [];

    foreach ( _id_C75620CA74D2E522 in scripts\engine\utility::getstructarray( "gas_station", "targetname" ) )
    {
        radius = scripts\engine\utility::ter_op( scripts\engine\utility::is_equal( _id_C75620CA74D2E522.script_noteworthy, "large" ), 600.0, 400 );
        scriptable = _id_52BA5A6617B2C059( _id_C75620CA74D2E522.origin, radius, 0 );

        if ( isdefined( scriptable ) )
        {
            scriptable._id_F3BC44571C85D5E1 = _id_C75620CA74D2E522.target;
            _id_354F6E3EEBCE5123[_id_354F6E3EEBCE5123.size] = scriptable;
        }
    }

    foreach ( _id_C75620CA74D2E522 in scripts\engine\utility::getstructarray( "gas_station_marine", "targetname" ) )
    {
        scriptable = _id_52BA5A6617B2C059( _id_C75620CA74D2E522.origin, 650, 1 );

        if ( isdefined( scriptable ) )
        {
            scriptable._id_F3BC44571C85D5E1 = _id_C75620CA74D2E522.target;
            _id_354F6E3EEBCE5123[_id_354F6E3EEBCE5123.size] = scriptable;
        }
    }

    _id_ECE1CE8D6ABCD4AE = [];

    foreach ( _id_C75620CA74D2E522 in _id_354F6E3EEBCE5123 )
    {
        if ( !isdefined( _id_C75620CA74D2E522._id_F3BC44571C85D5E1 ) )
        {
            _id_ECE1CE8D6ABCD4AE[_id_ECE1CE8D6ABCD4AE.size] = _id_C75620CA74D2E522;
            continue;
        }

        triggers = _func_F159C10D5CF8F0B4( _id_C75620CA74D2E522._id_F3BC44571C85D5E1, "targetname" );
        _id_C75620CA74D2E522._id_F3BC44571C85D5E1 = undefined;

        if ( !isdefined( triggers ) || triggers.size == 0 )
        {
            _id_ECE1CE8D6ABCD4AE[_id_ECE1CE8D6ABCD4AE.size] = _id_C75620CA74D2E522;
            continue;
        }

        if ( triggers.size == 1 )
            _id_C75620CA74D2E522.trigger = triggers[0];
        else
            _id_C75620CA74D2E522.trigger = sortbydistance( triggers, _id_C75620CA74D2E522.origin )[0];

        _id_C75620CA74D2E522 thread _id_8C5BE15142453A9B();
    }

    foreach ( _id_C75620CA74D2E522 in _id_ECE1CE8D6ABCD4AE )
    {
        radius = int( sqrt( _id_C75620CA74D2E522._id_8FA87D2C8780E014 ) );
        _id_C75620CA74D2E522.trigger = spawn( "noent_volume_trigger_radius", _id_C75620CA74D2E522.origin - ( 0, 0, 200 ), 0, radius, 1000 );
        _id_C75620CA74D2E522 thread _id_8C5BE15142453A9B();
    }

    level._id_354F6E3EEBCE5123 = _id_354F6E3EEBCE5123;
}

_id_8C5BE15142453A9B()
{
    for (;;)
    {
        self.trigger waittill( "trigger", vehicle );

        if ( !isdefined( vehicle ) || !vehicle scripts\cp_mp\vehicles\vehicle::isvehicle() || !isdefined( vehicle.origin ) )
            continue;

        if ( !isdefined( vehicle._id_CF9BA498AF4E41E9 ) )
            continue;

        if ( isdefined( vehicle._id_90C69F8BA6618910 ) )
            continue;

        if ( distance2dsquared( vehicle.origin, self.origin ) > self._id_8FA87D2C8780E014 )
            continue;

        driver = scripts\cp_mp\vehicles\vehicle_occupancy::vehicle_occupancy_getdriver( vehicle );
        thread _id_518F884FC150D957( vehicle, self.origin, self._id_8FA87D2C8780E014, driver );
    }
}

_id_52BA5A6617B2C059( origin, radius, _id_AC2EF851AEE7A4AB )
{
    level endon( "game_ended" );

    if ( scripts\cp_mp\utility\script_utility::issharedfuncdefined( "poi", "isSystemActive" ) && [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "poi", "isSystemActive" ) ]]() && scripts\cp_mp\utility\script_utility::issharedfuncdefined( "poi", "isInActivePOI" ) && ![[ scripts\cp_mp\utility\script_utility::getsharedfunc( "poi", "isInActivePOI" ) ]]( origin ) )
        return;

    _id_C75620CA74D2E522 = spawnscriptable( scripts\engine\utility::ter_op( _id_AC2EF851AEE7A4AB, "dmz_gas_station_marine", "dmz_gas_station" ), origin );
    _id_C75620CA74D2E522._id_8FA87D2C8780E014 = radius * radius;
    _id_C75620CA74D2E522._id_F3F4EB55AED6E784 = origin[2] - 200;
    _id_C75620CA74D2E522.maxheight = origin[2] + 1000 - 200;
    return _id_C75620CA74D2E522;
}

_id_518F884FC150D957( vehicle, point, _id_8FA87D2C8780E014, driver )
{
    level endon( "game_ended" );
    playsoundatpos( self.origin, "veh_fuel_gas_station_service_bell" );
    _id_7731ADEF63E19B0C = vehicle scripts\cp_mp\vehicles\vehicle::_id_D93EC4635290FEBD();
    _id_B7898AEE43BB07EF = vehicle_interact_getleveldataforvehicle( _id_7731ADEF63E19B0C );
    _id_29F1EA79ED2B40DD = _id_B7898AEE43BB07EF._id_29F1EA79ED2B40DD;
    vehicle._id_90C69F8BA6618910 = 0.5 * vehicle._id_CF9BA498AF4E41E9 / _id_29F1EA79ED2B40DD + 0.5 * vehicle.health / vehicle.maxhealth;
    wait 1;

    if ( !isdefined( vehicle ) || !isdefined( vehicle.origin ) || !isdefined( vehicle.maxhealth ) )
    {
        if ( isdefined( vehicle ) )
            vehicle._id_90C69F8BA6618910 = undefined;

        return;
    }

    if ( distancesquared( vehicle.origin, point ) >= _id_8FA87D2C8780E014 * 2.25 )
    {
        vehicle._id_90C69F8BA6618910 = undefined;
        return;
    }

    _id_CFB86C8EC12B2D6C = scripts\engine\utility::_id_53C4C53197386572( _id_B7898AEE43BB07EF._id_23F37E83B1CAFB10, 30 );
    _id_A1153D5FC785FBE1 = _id_29F1EA79ED2B40DD / _id_CFB86C8EC12B2D6C * 0.25;
    _id_63EEC8CC9E4260E4 = vehicle.maxhealth / _id_CFB86C8EC12B2D6C * 0.25;
    objidnum = undefined;
    _id_E78B08D58673CB9F = gettime() + 2000;

    if ( scripts\cp_mp\utility\script_utility::issharedfuncdefined( "game", "requestObjectiveID" ) )
    {
        vehicle.curorigin = ( 0, 0, 0 );
        vehicle.offset3d = ( 0, 0, 0 );
        vehicle.objidnum = [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "game", "requestObjectiveID" ) ]]( 99 );
        objidnum = vehicle.objidnum;
    }

    if ( isdefined( vehicle.objidnum ) && vehicle.objidnum != -1 )
    {
        objective_delete( vehicle.objidnum );
        objective_state( vehicle.objidnum, "current" );
        objective_setshowoncompass( vehicle.objidnum, 1 );
        objective_setplayintro( vehicle.objidnum, 0 );
        objective_setplayoutro( vehicle.objidnum, 0 );
        objective_setbackground( vehicle.objidnum, 1 );
        objective_icon( vehicle.objidnum, "ui_map_icon_gas_refuel" );
        objective_onentity( vehicle.objidnum, vehicle );
        objective_setzoffset( vehicle.objidnum, 75 );
        objective_setshowprogress( vehicle.objidnum, 1 );
        objective_removeallfrommask( vehicle.objidnum );
        objective_showtoplayersinmask( vehicle.objidnum );
    }

    _id_9BB26C1FF415A7A3 = 0;
    _id_8F9EFDC9FB55D586 = undefined;

    if ( vehicle._id_CF9BA498AF4E41E9 / _id_29F1EA79ED2B40DD < 0.99 )
    {
        _id_9BB26C1FF415A7A3 = 1;
        _id_8F9EFDC9FB55D586 = vehicle.occupants;

        foreach ( _id_F85572CD5F6117C6 in _id_8F9EFDC9FB55D586 )
            vehicle _id_3BFF37824A58EF7A( _id_F85572CD5F6117C6, vehicle.objidnum, _id_7731ADEF63E19B0C );
    }

    if ( vehicle.health < vehicle.maxhealth && vehicle scripts\cp_mp\vehicles\vehicle_damage::vehicle_damage_getstate() != "heavy" )
        playsoundatpos( vehicle.origin, "veh_repair_health" );

    while ( isdefined( vehicle ) && isdefined( vehicle.origin ) && distancesquared( vehicle.origin, point ) < _id_8FA87D2C8780E014 * 2.25 )
    {
        _id_8F9EFDC9FB55D586 = scripts\cp_mp\vehicles\vehicle_occupancy::_id_0EFA75AA7F0A1289( vehicle );

        if ( isdefined( vehicle.lasttimedamaged ) && gettime() - vehicle.lasttimedamaged < 5000 )
        {
            wait 0.25;
            continue;
        }

        vehicle._id_CF9BA498AF4E41E9 = min( _id_29F1EA79ED2B40DD, vehicle._id_CF9BA498AF4E41E9 + _id_A1153D5FC785FBE1 );
        vehicle scripts\cp_mp\utility\vehicle_omnvar_utility::_id_9DA76B0BE4B2A2D4( vehicle._id_CF9BA498AF4E41E9, _id_29F1EA79ED2B40DD );

        if ( vehicle.health < vehicle.maxhealth && vehicle scripts\cp_mp\vehicles\vehicle_damage::vehicle_damage_getstate() != "heavy" )
            vehicle scripts\cp_mp\vehicles\vehicle_damage::_id_653B96CE8310763E( _id_63EEC8CC9E4260E4 );

        vehicle._id_90C69F8BA6618910 = 0.5 * vehicle._id_CF9BA498AF4E41E9 / _id_29F1EA79ED2B40DD + 0.5 * vehicle.health / vehicle.maxhealth;

        if ( isdefined( vehicle.objidnum ) && vehicle.objidnum != -1 )
            objective_setprogress( vehicle.objidnum, vehicle._id_90C69F8BA6618910 );

        if ( _id_9BB26C1FF415A7A3 && vehicle._id_90C69F8BA6618910 >= 0.99 )
        {
            _id_9BB26C1FF415A7A3 = 0;

            foreach ( _id_F85572CD5F6117C6 in vehicle.occupants )
                vehicle _id_D051E5F825B704AB( _id_F85572CD5F6117C6, vehicle.objidnum, _id_7731ADEF63E19B0C, 1 );
        }

        if ( gettime() > _id_E78B08D58673CB9F )
        {
            _id_E78B08D58673CB9F = gettime() + 2000;
            scripts\cp_mp\vehicles\vehicle_damage::_id_E6F68A61BFFC259A( vehicle );
        }

        if ( abs( vehicle._id_CF9BA498AF4E41E9 - _id_29F1EA79ED2B40DD ) < 1 && vehicle.health == vehicle.maxhealth && ( !isdefined( vehicle._id_C48B10763F1DF79A ) || vehicle._id_C48B10763F1DF79A.size == 0 ) )
        {
            if ( scripts\cp_mp\utility\script_utility::issharedfuncdefined( "pmc_missions", "onVehicleFullRefuelAndRepair" ) )
                [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "pmc_missions", "onVehicleFullRefuelAndRepair" ) ]]( vehicle, self );
        }

        wait 0.25;
    }

    if ( _id_9BB26C1FF415A7A3 && isdefined( _id_8F9EFDC9FB55D586 ) )
    {
        foreach ( _id_F85572CD5F6117C6 in _id_8F9EFDC9FB55D586 )
            vehicle _id_BD48158D51404989( _id_F85572CD5F6117C6, _id_7731ADEF63E19B0C, isdefined( vehicle ) );
    }

    if ( isdefined( objidnum ) && objidnum != -1 && scripts\cp_mp\utility\script_utility::issharedfuncdefined( "game", "returnObjectiveID" ) )
    {
        [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "game", "returnObjectiveID" ) ]]( objidnum );

        if ( isdefined( vehicle ) )
            vehicle.objidnum = -1;
    }

    if ( isdefined( vehicle ) )
        vehicle._id_90C69F8BA6618910 = undefined;
}

_id_C5FE005F06FE5684( vehicle, player )
{
    if ( isdefined( vehicle._id_90C69F8BA6618910 ) && vehicle._id_90C69F8BA6618910 < 0.99 )
        vehicle _id_3BFF37824A58EF7A( player, vehicle.objidnum, vehicle scripts\cp_mp\vehicles\vehicle::_id_D93EC4635290FEBD() );
}

_id_DEB83798A724A77E( vehicle, player )
{
    if ( isdefined( vehicle._id_90C69F8BA6618910 ) && vehicle._id_90C69F8BA6618910 < 0.99 )
        vehicle _id_D051E5F825B704AB( player, vehicle.objidnum, vehicle scripts\cp_mp\vehicles\vehicle::_id_D93EC4635290FEBD() );
}

_id_3BFF37824A58EF7A( player, objidnum, _id_7731ADEF63E19B0C )
{
    if ( isdefined( objidnum ) && objidnum != -1 )
    {
        objective_addclienttomask( objidnum, player );
        objective_showtoplayersinmask( objidnum );
        objective_pinforclient( objidnum, player );
        _func_D1B64C3D055CEEB0( 2, player );
        _func_8B71EB96E1636EDC( &"MP/REFUELING", player );
        _id_82A1C76DA877F6A3( player, _id_7731ADEF63E19B0C );
    }
}

_id_D051E5F825B704AB( player, objidnum, _id_7731ADEF63E19B0C, success )
{
    if ( isdefined( objidnum ) && objidnum != -1 )
    {
        objective_removeclientfrommask( objidnum, player );
        objective_showtoplayersinmask( objidnum );
        objective_unpinforclient( objidnum, player );
        _func_D1B64C3D055CEEB0( 0, player );
        _id_BD48158D51404989( player, _id_7731ADEF63E19B0C, success );
    }
}

_id_82A1C76DA877F6A3( player, _id_7731ADEF63E19B0C )
{
    if ( isdefined( player ) )
    {
        _id_A3C271BD60EC612F = "uin_veh_fuel_gas_ticker";

        if ( _id_7731ADEF63E19B0C == "veh9_hummer" )
            _id_A3C271BD60EC612F = "uin_veh_fuel_ev_charger";

        player playlocalsound( _id_A3C271BD60EC612F );
    }
}

_id_BD48158D51404989( player, _id_7731ADEF63E19B0C, success )
{
    if ( isdefined( player ) )
    {
        _id_A3C271BD60EC612F = "uin_veh_fuel_gas_ticker";
        _id_2D2BBCCA8984C48F = "uin_veh_fuel_gas_ticker_stop";

        if ( _id_7731ADEF63E19B0C == "veh9_hummer" )
        {
            _id_A3C271BD60EC612F = "uin_veh_fuel_ev_charger";
            _id_2D2BBCCA8984C48F = "uin_veh_fuel_ev_charger_stop";
        }

        player stoplocalsound( _id_A3C271BD60EC612F );

        if ( istrue( success ) )
            player playlocalsound( _id_2D2BBCCA8984C48F );
    }
}

_id_A203F8033EEB57F1( _id_7731ADEF63E19B0C, vehicle )
{
    if ( !vehicle scripts\cp_mp\vehicles\vehicle::_id_B7148A3BFC4DEFB2() && _id_A717A31AE35BA01C() && !istrue( vehicle.isfromkillstreak ) )
    {
        vehicle._id_CF9BA498AF4E41E9 = _id_F02703F19A787F77( _id_7731ADEF63E19B0C );
        vehicle thread _id_722B030261C05941( _id_7731ADEF63E19B0C );
    }
}

_id_F02703F19A787F77( _id_7731ADEF63E19B0C )
{
    _id_E2818AD39A3341B4 = vehicle_interact_getleveldataforvehicle( _id_7731ADEF63E19B0C );

    if ( _id_E2818AD39A3341B4._id_4C6D695D0920DF19 >= _id_E2818AD39A3341B4._id_4C4A7B5D08FABEF7 )
        return _id_E2818AD39A3341B4._id_4C6D695D0920DF19;

    return randomfloatrange( _id_E2818AD39A3341B4._id_4C6D695D0920DF19, _id_E2818AD39A3341B4._id_4C4A7B5D08FABEF7 );
}

_id_722B030261C05941( _id_7731ADEF63E19B0C )
{
    self endon( "death" );
    level endon( "game_ended" );
    _id_29F1EA79ED2B40DD = vehicle_interact_getleveldataforvehicle( _id_7731ADEF63E19B0C )._id_29F1EA79ED2B40DD;
    occupants = scripts\cp_mp\vehicles\vehicle_occupancy::_id_0EFA75AA7F0A1289( self );
    scripts\cp_mp\utility\vehicle_omnvar_utility::vehomn_showfuel( occupants );
    scripts\cp_mp\utility\vehicle_omnvar_utility::_id_9DA76B0BE4B2A2D4( self._id_CF9BA498AF4E41E9, _id_29F1EA79ED2B40DD );
    _id_F2478A60DDDE9FAB = self vehicle_gettopspeedforward();
    _id_5639B8EEC4682DF5 = 0;
    _id_A6C30B623DFA92DE = 0;

    for (;;)
    {
        wait 1;

        if ( !istrue( self.ishovering ) && ( istrue( self.isempty ) || !isplayer( scripts\cp_mp\vehicles\vehicle_occupancy::vehicle_occupancy_getdriver( self ) ) ) )
            continue;

        _id_15F8441922036C46 = min( scripts\engine\utility::ter_op( scripts\common\vehicle::ishelicopter(), 1.0, self vehicle_getspeed() / _id_F2478A60DDDE9FAB ), 1.0 );
        self._id_CF9BA498AF4E41E9 = max( self._id_CF9BA498AF4E41E9 - _id_15F8441922036C46, 0 );
        scripts\cp_mp\utility\vehicle_omnvar_utility::_id_9DA76B0BE4B2A2D4( self._id_CF9BA498AF4E41E9, _id_29F1EA79ED2B40DD );

        if ( self._id_CF9BA498AF4E41E9 <= 0 && !_id_A6C30B623DFA92DE )
        {
            _id_A6C30B623DFA92DE = 1;
            self vehicle_turnengineoff();
            scripts\cp_mp\vehicles\vehicle_occupancy::_id_EE4B8B879B1B120C();
            scripts\cp_mp\vehicles\vehicle_occupancy::vehicle_occupancy_allowmovement( self, 0, 0 );
            scripts\cp_mp\utility\vehicle_omnvar_utility::vehomn_showwarning( "outOfFuel", scripts\cp_mp\vehicles\vehicle_occupancy::_id_0EFA75AA7F0A1289( self ), _id_7731ADEF63E19B0C );

            if ( scripts\cp_mp\utility\script_utility::issharedfuncdefined( _id_7731ADEF63E19B0C, "outOfFuel" ) )
                [[ scripts\cp_mp\utility\script_utility::getsharedfunc( _id_7731ADEF63E19B0C, "outOfFuel" ) ]]();

            if ( scripts\cp_mp\utility\script_utility::issharedfuncdefined( "pmc_missions", "onVehicleOutOfFuel" ) )
                [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "pmc_missions", "onVehicleOutOfFuel" ) ]]( scripts\cp_mp\vehicles\vehicle_occupancy::vehicle_occupancy_getdriver( self ) );
        }
        else if ( self._id_CF9BA498AF4E41E9 > 0 && _id_A6C30B623DFA92DE )
        {
            _id_A6C30B623DFA92DE = 0;
            self vehicle_turnengineon();
            scripts\cp_mp\vehicles\vehicle_occupancy::vehicle_occupancy_allowmovement( self, 1 );
            scripts\cp_mp\utility\vehicle_omnvar_utility::vehomn_hidewarning( "outOfFuel", scripts\cp_mp\vehicles\vehicle_occupancy::_id_0EFA75AA7F0A1289( self ), _id_7731ADEF63E19B0C );
        }

        if ( self._id_CF9BA498AF4E41E9 <= 25 && self._id_CF9BA498AF4E41E9 > 0 && !_id_5639B8EEC4682DF5 )
        {
            _id_5639B8EEC4682DF5 = 1;
            scripts\cp_mp\utility\vehicle_omnvar_utility::vehomn_showwarning( "lowFuel", scripts\cp_mp\vehicles\vehicle_occupancy::_id_0EFA75AA7F0A1289( self ), _id_7731ADEF63E19B0C );
            player = scripts\cp_mp\vehicles\vehicle_occupancy::vehicle_occupancy_getdriver( self );

            if ( scripts\cp_mp\utility\script_utility::issharedfuncdefined( "hud", "ftue_triggerTip" ) )
            {
                _id_C4DC2501D7D2B68B = undefined;
                _id_47415E4E37E805FF = undefined;

                foreach ( _id_C75620CA74D2E522 in level._id_354F6E3EEBCE5123 )
                {
                    if ( !isdefined( _id_C4DC2501D7D2B68B ) )
                    {
                        _id_C4DC2501D7D2B68B = _id_C75620CA74D2E522;
                        _id_47415E4E37E805FF = distancesquared( self.origin, _id_C75620CA74D2E522.origin );
                    }

                    _id_50F1AC2AFF931B50 = distancesquared( self.origin, _id_C75620CA74D2E522.origin );

                    if ( _id_50F1AC2AFF931B50 < _id_47415E4E37E805FF )
                    {
                        _id_C4DC2501D7D2B68B = _id_C75620CA74D2E522;
                        _id_47415E4E37E805FF = distancesquared( self.origin, _id_C75620CA74D2E522.origin );
                    }
                }

                player [[ scripts\cp_mp\utility\script_utility::getsharedfunc( "hud", "ftue_triggerTip" ) ]]( "br_ftue_driving", _id_C4DC2501D7D2B68B.origin );
            }

            continue;
        }

        if ( ( self._id_CF9BA498AF4E41E9 > 25 || self._id_CF9BA498AF4E41E9 <= 0 ) && _id_5639B8EEC4682DF5 )
        {
            _id_5639B8EEC4682DF5 = 0;
            scripts\cp_mp\utility\vehicle_omnvar_utility::vehomn_hidewarning( "lowFuel", scripts\cp_mp\vehicles\vehicle_occupancy::_id_0EFA75AA7F0A1289( self ), _id_7731ADEF63E19B0C );
        }
    }
}

_id_557DA58E3AD8A579()
{
    vehicle = scripts\cp_mp\utility\player_utility::getvehicle();

    if ( !isdefined( vehicle ) || !isdefined( vehicle._id_CF9BA498AF4E41E9 ) )
        return 0;

    _id_B7898AEE43BB07EF = vehicle_interact_getleveldataforvehicle( vehicle scripts\cp_mp\vehicles\vehicle::_id_D93EC4635290FEBD() );

    if ( !isdefined( _id_B7898AEE43BB07EF._id_B81D9A2B741F2FE4 ) || _id_B7898AEE43BB07EF._id_B81D9A2B741F2FE4 <= 0 )
        return 0;

    _id_29F1EA79ED2B40DD = _id_B7898AEE43BB07EF._id_29F1EA79ED2B40DD;
    _id_6D9C08596CEAF731 = _id_29F1EA79ED2B40DD * ( _id_B7898AEE43BB07EF._id_B81D9A2B741F2FE4 / 100 );
    vehicle._id_CF9BA498AF4E41E9 = min( _id_29F1EA79ED2B40DD, vehicle._id_CF9BA498AF4E41E9 + _id_6D9C08596CEAF731 );
    vehicle scripts\cp_mp\utility\vehicle_omnvar_utility::_id_9DA76B0BE4B2A2D4( vehicle._id_CF9BA498AF4E41E9, _id_29F1EA79ED2B40DD );
    return 1;
}

_id_68CDB3D30284BE07()
{
    if ( scripts\cp_mp\vehicles\vehicle::_id_B7148A3BFC4DEFB2() )
        return;

    _id_8797136EBD7115CB = vehicle_interact_getleveldataforvehicle( scripts\cp_mp\vehicles\vehicle::_id_D93EC4635290FEBD() );

    if ( istrue( self._id_408E9E761C8463C5 ) || !istrue( self.isempty ) || !isdefined( _id_8797136EBD7115CB ) || !isdefined( _id_8797136EBD7115CB._id_261258CC3A12AF34 ) || _id_8797136EBD7115CB._id_261258CC3A12AF34 == "" || !self getscriptablehaspart( _id_8797136EBD7115CB._id_261258CC3A12AF34 ) || !self getscriptableparthasstate( _id_8797136EBD7115CB._id_261258CC3A12AF34, "on" ) )
        return;

    self notify( "car_alarm_start" );
    self endon( "car_alarm_start" );
    self endon( "death" );
    self setscriptablepartstate( _id_8797136EBD7115CB._id_261258CC3A12AF34, "on" );
    _id_A6CF8B7A0D3630B5();

    if ( self getscriptableparthasstate( _id_8797136EBD7115CB._id_261258CC3A12AF34, "off" ) )
        self setscriptablepartstate( _id_8797136EBD7115CB._id_261258CC3A12AF34, "off" );

    self._id_408E9E761C8463C5 = 1;
}

_id_A6CF8B7A0D3630B5( _id_CC748B6D457627FE )
{
    self endon( "vehicle_owner_update" );
    wait 5;
}

vehicle_interact_initdev()
{
    _id_D233EA035E59E2F4 = setdvarifuninitialized( "dvar_FB517A5A3D736FA0", 0 );
}
