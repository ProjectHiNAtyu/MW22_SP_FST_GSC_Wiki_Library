// IW9 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

_id_988FBCA3C4CB0525()
{
    scripts\engine\utility::flag_init( "enemies_spawned" );
    scripts\engine\utility::flag_init( "spotter_scope_given" );
    scripts\engine\utility::flag_init( "laswell_request_visual" );
    scripts\engine\utility::flag_init( "player_inspect_motorpool" );
    scripts\engine\utility::flag_init( "begin_ghorbrani_search" );
    scripts\engine\utility::flag_init( "vip_spotted" );
    scripts\engine\utility::flag_init( "ghorbrani_spotted" );
    scripts\engine\utility::flag_init( "overwatch_vo_done" );
    scripts\engine\utility::flag_init( "target_confirmed" );
    scripts\engine\utility::flag_init( "player_spotted" );
}

_id_B9EC6BC7100CECA8()
{
    setdvarifuninitialized( "dvar_92A8528E3AEB0669", 0 );
}

_id_C42F0806D087829C()
{

}

overwatch_setup()
{
    level.player _id_79FB381FD77D2642::_id_B831401568C40AF8();
    thread _id_D963976FC25AD23F();
    thread _id_305B8179CA81D788();
    scripts\engine\sp\utility::activate_trigger_with_targetname( "peak_reached_overwatch" );
}

_id_9D06F72D2E2EC656()
{
    _id_1096BC9315122E88::_id_D1A8270C167E8A4F( "strike_task_00", "stop", "completed" );
    _id_1096BC9315122E88::_id_D1A8270C167E8A4F( "strike_task_01", "start" );
    scripts\engine\sp\utility::add_extra_autosave_check( "overwatch_no_save_on_fall", ::_id_036145573F54EA2D, "Player is fallling" );
    thread scripts\engine\sp\utility::autosave_now();
    thread _id_B3F096B1124E2210();
    _id_50924364DF2B5579::_id_C74E8E2DE8C8FC54();
    level.player thread _id_79FB381FD77D2642::_id_E376A2A1B419E02A();
    scripts\common\utility::_id_B4ACCA4C27BC193F();
    thread _id_C6A454D27EABE863();
    thread _id_AB6704F8F9E110D1();
    thread _id_EE20C748F6175D7F();
    thread _id_09AD272D2DFB3F0F();
    thread _id_CBDA9AF1B4B1266C();
    thread _id_374739F7E42489F8();
    thread _id_132BCA1D1C9E2B05();
    scripts\engine\utility::flag_wait( "target_confirmed" );
    scripts\engine\sp\utility::remove_extra_autosave_check( "overwatch_no_save_on_fall" );
    level.player notify( "stop_updating_demeanor" );
    setomnvar( "ui_out_of_bounds_countdown", 0 );
}

_id_DB53B8F6C50DD8DF()
{
    scripts\engine\utility::flag_set( "stop_tutorials" );
    scripts\engine\utility::flag_set( "vip_spotted" );
    scripts\engine\utility::flag_set( "ghorbrani_spotted" );
    scripts\engine\utility::flag_set( "target_confirmed" );
    scripts\engine\utility::flag_set( "overwatch_vo_done" );
    _id_50924364DF2B5579::_id_883521CD779AB9ED();
    setsaveddvar( "dvar_5A83A561CB4970B2", 16000 );
    scripts\engine\utility::kill_exploder( "birds" );
    level.player _id_79FB381FD77D2642::_id_B831401568C40AF8();
    _id_D776CF84A9041C16();
}

_id_036145573F54EA2D()
{
    return !level.player isinfreefall();
}

_id_AB6704F8F9E110D1()
{
    level endon( "target_confirmed" );
    level.player endon( "death" );
    _id_5BB9EF97013A8E9E = scripts\engine\utility::getstruct( "strike_overwatch_start", "targetname" );
    _id_A239759B89500ACE = 1;

    for (;;)
    {
        _id_0D73BDD3CCD0DF1C = distancesquared( _id_5BB9EF97013A8E9E.origin, level.player.origin );

        if ( _id_0D73BDD3CCD0DF1C >= squared( 310 ) )
        {
            if ( _id_A239759B89500ACE )
            {
                _id_A239759B89500ACE = 0;
                _id_A380DC4A98352212();
                level.player _id_79FB381FD77D2642::_id_C9EA209D6966AAC5();
            }
        }
        else if ( !_id_A239759B89500ACE )
        {
            _id_A239759B89500ACE = 1;
            _id_63285EC600EE2D2D();
            level.player _id_79FB381FD77D2642::_id_E376A2A1B419E02A();
        }

        waitframe();
    }
}

_id_C6A454D27EABE863()
{
    level endon( "target_confirmed" );
    _id_DC8625458EE5ED14 = getent( "peak_player_bounds", "targetname" );

    for (;;)
    {
        while ( !level.player istouching( _id_DC8625458EE5ED14 ) )
            waitframe();

        setomnvar( "ui_out_of_bounds_countdown", 1 );
        start_time = gettime();

        while ( _id_DC8625458EE5ED14 istouching( level.player ) )
        {
            if ( scripts\engine\utility::time_has_passed( start_time, 5 ) )
            {
                setomnvar( "ui_out_of_bounds_countdown", 0 );
                scripts\sp\player_death::set_custom_death_quote( 29 );
                scripts\sp\utility::missionfailedwrapper();
                level waittill( "forever" );
            }

            waitframe();
        }

        setomnvar( "ui_out_of_bounds_countdown", 0 );
        waitframe();
    }
}

_id_D963976FC25AD23F()
{
    scripts\stealth\utility::enable_stealth_system();
    level._id_7604B74E080BCE69 = [];
    level._id_671B79D96235FD1D = [];
    scripts\engine\sp\utility::array_spawn_function_noteworthy( "strike_enemy", ::_id_BB2E6AC2BD58DACA );
    level._id_ABC709ED60ADFE1D = scripts\engine\sp\utility::array_spawn_noteworthy( "strike_enemy", 1 );

    for ( _id_AC0E594AC96AA3A8 = 0; _id_AC0E594AC96AA3A8 < 5; _id_AC0E594AC96AA3A8++ )
    {
        targetname = "rus_soldier0" + ( _id_AC0E594AC96AA3A8 + 1 );
        level._id_7604B74E080BCE69[_id_AC0E594AC96AA3A8] = scripts\engine\sp\utility::get_living_ai( targetname, "targetname" );
        _id_90DFAA11D327E85A = scripts\sp\utility::make_weapon( "iw9_ar_akilo105" );
        level._id_7604B74E080BCE69[_id_AC0E594AC96AA3A8] _id_3433EE6B63C7E243::forceuseweapon( _id_90DFAA11D327E85A, "primary" );
    }

    for ( _id_AC0E594AC96AA3A8 = 0; _id_AC0E594AC96AA3A8 < 2; _id_AC0E594AC96AA3A8++ )
    {
        targetname = "iran_soldier0" + ( _id_AC0E594AC96AA3A8 + 1 );
        level._id_671B79D96235FD1D[_id_AC0E594AC96AA3A8] = scripts\engine\sp\utility::get_living_ai( targetname, "targetname" );
    }

    level._id_178676AE3AB08204 = scripts\engine\sp\utility::get_living_ai( "rus_officer01", "targetname" );
    level._id_178676AE3AB08204 scripts\engine\sp\utility::putgunaway();
    level._id_30FFA2D97ADB1413 = _id_79FB381FD77D2642::_id_C418440ADB8F6EC6( "ghorbrani", "head_sc_m_ghorbrani" );
    scripts\engine\utility::flag_set( "enemies_spawned" );
}

_id_19B26AE079FE8064()
{
    level endon( "target_confirmed" );
    _id_B048AD4FDB04DD40 = 0;

    for (;;)
    {
        if ( scripts\engine\utility::ent_flag( "scope_used" ) && !scripts\engine\utility::ent_flag( "scope_zoomed" ) )
        {
            if ( !_id_B048AD4FDB04DD40 )
            {
                _id_B048AD4FDB04DD40 = 1;
                scripts\engine\sp\utility::display_hint( "zoom_spotter_scope", undefined, 3, self, "stop_scope_zoom_hint" );
            }
        }
        else
        {
            if ( _id_B048AD4FDB04DD40 )
                self notify( "stop_scope_zoom_hint" );

            _id_B048AD4FDB04DD40 = 0;
        }

        waitframe();
    }
}

_id_4D20C097714C427A()
{
    level endon( "target_confirmed" );
    _id_FCD35B6807F1776F = 0;
    level._id_B048AD4FDB04DD40 = 0;
    level.player._id_26331D928649D9B0 = 0;

    for (;;)
    {
        if ( !scripts\engine\utility::ent_flag( "scope_used" ) )
        {
            if ( !level._id_B048AD4FDB04DD40 && !level.player._id_26331D928649D9B0 )
            {
                level._id_B048AD4FDB04DD40 = 1;

                if ( level.player _meth_61C258EACEE448B2() )
                    scripts\engine\sp\utility::display_hint( "use_spotter_scope_press", undefined, _id_FCD35B6807F1776F, self, "stop_scope_hint" );
                else
                    scripts\engine\sp\utility::display_hint( "use_spotter_scope", undefined, _id_FCD35B6807F1776F, self, "stop_scope_hint" );

                _id_FCD35B6807F1776F = 5;
            }
        }
        else
        {
            if ( level._id_B048AD4FDB04DD40 )
                self notify( "stop_scope_hint" );

            level._id_B048AD4FDB04DD40 = 0;
        }

        waitframe();
    }
}

_id_A380DC4A98352212()
{
    level.player._id_26331D928649D9B0 = scripts\engine\utility::_id_53C4C53197386572( level.player._id_26331D928649D9B0, 1 );
    level.player notify( "stop_scope_hint" );
    level._id_B048AD4FDB04DD40 = 0;
    level.player._id_26331D928649D9B0 = 1;
}

_id_63285EC600EE2D2D()
{
    level.player._id_26331D928649D9B0 = 0;
}

_id_EE20C748F6175D7F()
{
    level endon( "missile_called" );
    level.player endon( "death" );
    childthread _id_481F1484A16E8AAC();
    scripts\engine\utility::flag_wait( "player_spotted" );
    scripts\sp\player_death::set_custom_death_quote( 24 );
    scripts\sp\utility::missionfailedwrapper();
    scripts\sp\player_death::clear_custom_death_quote();
    level waittill( "forever" );
}

_id_481F1484A16E8AAC()
{
    level endon( "missile_called" );
    scripts\engine\sp\utility::trigger_wait_targetname( "peak_kill_trigger" );
    level.player disableinvulnerability();
    level.player kill( level.player.origin, level.player, level.player, "MOD_EXPLOSIVE" );
}

_id_CBDA9AF1B4B1266C()
{
    scripts\engine\utility::flag_wait( "canyon_opening_vo_done" );
    level.player _id_93D9CBD9EA7DDDFF();

    while ( _id_5D265B4FCA61F070::_id_E9E38931019C791F() )
        waitframe();

    level.player _id_79FB381FD77D2642::_id_400664C262BEE794();
    level.player _id_79FB381FD77D2642::_id_9A74DA5BA2E42B14( "dx_sp_hell_posl_ghos_imeyeson" );
    level.player thread _id_79FB381FD77D2642::_id_C96A3A882632425E();
    scripts\engine\utility::flag_set( "laswell_request_visual" );
    level._id_0D0D86A5364DB0CB _id_79FB381FD77D2642::_id_9A74DA5BA2E42B14( "dx_sp_hell_posl_lasw_whatdoyousee" );
    level.player setsoundsubmix( "iw9_sp_music_down", 16.0 );
    scripts\engine\utility::flag_wait( "player_inspect_motorpool" );
    level.player _id_79FB381FD77D2642::_id_400664C262BEE794();
    level.player _id_79FB381FD77D2642::_id_9A74DA5BA2E42B14( "dx_sp_hell_posl_ghos_armedpersonnelarmora" );
    level._id_01BF6EA71AAAF0EE _id_79FB381FD77D2642::_id_9A74DA5BA2E42B14( "dx_sp_hell_posl_shep_whatthehellaretherus" );
    level._id_0D0D86A5364DB0CB _id_79FB381FD77D2642::_id_9A74DA5BA2E42B14( "dx_sp_hell_posl_lasw_supplyingiranitsanar" );
    level._id_01BF6EA71AAAF0EE _id_79FB381FD77D2642::_id_9A74DA5BA2E42B14( "dx_sp_hell_posl_shep_youcopyingthisshadow" );
    level._id_E3BF2B6FB9AF5BF7 _id_79FB381FD77D2642::_id_9A74DA5BA2E42B14( "dx_sp_hell_posl_grav_affirmativetwobirdso" );
    level._id_0D0D86A5364DB0CB _id_79FB381FD77D2642::_id_9A74DA5BA2E42B14( "dx_sp_hell_posl_lasw_weneedpositiveidongh" );
    level._id_01BF6EA71AAAF0EE _id_79FB381FD77D2642::_id_9A74DA5BA2E42B14( "dx_sp_hell_posl_shep_ghostcanyouidentifyt" );
    level.player thread _id_79FB381FD77D2642::_id_C96A3A882632425E();
    level.player thread _id_79FB381FD77D2642::_id_E376A2A1B419E02A();
    scripts\engine\utility::flag_set( "begin_ghorbrani_search" );
    thread _id_F85216CEDB36E175();
    scripts\engine\utility::flag_wait( "vip_spotted" );
    _id_5D265B4FCA61F070::_id_CB329CF8896EDEAA( "allies" );
    level.player _id_79FB381FD77D2642::_id_9A74DA5BA2E42B14( "dx_sp_hell_posl_ghos_armedescortsaroundon" );
    level._id_01BF6EA71AAAF0EE _id_79FB381FD77D2642::_id_9A74DA5BA2E42B14( "dx_sp_hell_posl_shep_itllbethelasttimethe" );
    thread _id_DEDDD209762395D3();
    scripts\engine\utility::flag_wait( "ghorbrani_spotted" );
    scripts\engine\utility::flag_wait( "target_confirmed" );
    _id_5D265B4FCA61F070::_id_CB329CF8896EDEAA( "allies", 1, 1 );
    level.player _id_79FB381FD77D2642::_id_9A74DA5BA2E42B14( "dx_sp_hell_peak_ghos_visualongeneralghorb" );
    wait 1;
    scripts\engine\utility::flag_set( "overwatch_vo_done" );
}

_id_F85216CEDB36E175()
{
    level endon( "vip_spotted" );

    if ( scripts\engine\utility::flag( "vip_spotted" ) )
        return;

    _id_DEAC24FDEB5443B4 = [ "dx_sp_hell_posl_shep_ghostgetyourglassint", "dx_sp_hell_posl_shep_ghostgeneralghorbran" ];
    level _id_5D265B4FCA61F070::nagtill( "vip_spotted", _id_DEAC24FDEB5443B4, 15, 10 );
}

_id_DEDDD209762395D3()
{
    level endon( "target_confirmed" );
    _id_602B610C7B4820EA = scripts\engine\utility::create_deck( [ "dx_sp_hell_posl_lasw_watchthatvipghosttha", "dx_sp_hell_posl_shep_ghoststaywiththatpro" ] );
    _id_8DEADB88E8A702BB = scripts\engine\utility::create_deck( [ "dx_sp_hell_posl_lasw_ghostdoyouhavepositi", "dx_sp_hell_posl_grav_missileishotwegottaf" ] );
    _id_FB2ED2B14507F142 = scripts\engine\utility::create_deck( [ "dx_sp_hell_posl_ghos_nojoystandby", "dx_sp_hell_posl_ghos_scanningholdtight" ] );
    delay = _id_5D265B4FCA61F070::_id_B9007D9F0FF19676( 16, 20, 4 );

    for (;;)
    {
        _id_5D265B4FCA61F070::_id_B0FDDB86A2358953( delay );

        if ( !level.player _id_4ECE68A78002E8EB() )
        {
            nag = _id_602B610C7B4820EA scripts\engine\utility::deck_draw();
            level _id_79FB381FD77D2642::_id_9A74DA5BA2E42B14( nag );
            continue;
        }

        _id_01EFC3F59CBB5A99 = _id_8DEADB88E8A702BB scripts\engine\utility::deck_draw();
        level _id_79FB381FD77D2642::_id_9A74DA5BA2E42B14( _id_01EFC3F59CBB5A99 );
        wait 3;
        _id_7E9CCC2D6DDB44DA = _id_FB2ED2B14507F142 scripts\engine\utility::deck_draw();
        level.player _id_79FB381FD77D2642::_id_9A74DA5BA2E42B14( _id_7E9CCC2D6DDB44DA );
    }
}

_id_8CDAF07659D9DA6A()
{
    setmusicstate( "mx_strike_overwatch" );
}

_id_132BCA1D1C9E2B05()
{
    scripts\engine\utility::flag_wait( "enemies_spawned" );
    animnode = scripts\engine\utility::getstruct( "animnode_ghorbrani_arrive", "targetname" );
    _id_E7366D1C8172C5AF = scripts\engine\sp\utility::array_merge( level._id_7604B74E080BCE69, level._id_671B79D96235FD1D );
    _id_E7366D1C8172C5AF = scripts\engine\sp\utility::array_merge( _id_E7366D1C8172C5AF, [ level._id_30FFA2D97ADB1413, level._id_178676AE3AB08204 ] );
    _id_79FB381FD77D2642::_id_AE884D53DE8FE220( _id_E7366D1C8172C5AF );
    animnode scripts\common\anim::anim_first_frame( _id_E7366D1C8172C5AF, "meeting" );
    animnode thread scripts\common\anim::anim_single_solo( level._id_95962314C3EC729F, "meeting" );
    wait 3;
    animnode scripts\common\anim::anim_single( _id_E7366D1C8172C5AF, "meeting" );
    animnode thread scripts\common\anim::anim_loop( _id_E7366D1C8172C5AF, "meeting_loop", "stop_meeting_loop" );
    animation = level._id_30FFA2D97ADB1413 scripts\engine\utility::getanim( "meeting_loop" )[0];
    _id_010A8F996B653E4E = getanimlength( animation );

    for (;;)
    {
        wait( _id_010A8F996B653E4E );

        if ( scripts\engine\utility::flag( "vip_spotted" ) )
            break;
    }

    animnode notify( "stop_meeting_loop" );
    _id_D776CF84A9041C16();
}

_id_D776CF84A9041C16( _id_703F5326D615B314 )
{
    scripts\engine\utility::flag_wait( "enemies_spawned" );
    _id_703F5326D615B314 = scripts\engine\utility::_id_53C4C53197386572( _id_703F5326D615B314, 0 );
    thread _id_C662B4B1C9C998DE( _id_703F5326D615B314 );
    thread _id_C662B3B1C9C996AB( _id_703F5326D615B314 );
    thread _id_C662B2B1C9C99478( _id_703F5326D615B314 );
}

_id_C662B4B1C9C998DE( _id_703F5326D615B314 )
{
    level endon( "missile_explosion_vfx_played" );
    level endon( "vfx_pre_explosion_played" );
    guys = [ level._id_30FFA2D97ADB1413, level._id_178676AE3AB08204, level._id_671B79D96235FD1D[0] ];
    animnode = scripts\engine\utility::getstruct( "animnode_ghorbrani_arrive", "targetname" );

    if ( !_id_703F5326D615B314 )
        animnode scripts\common\anim::anim_single( guys, "inspect_set01" );

    animnode scripts\common\anim::anim_loop( guys, "inspect_set01_loop", "inspect_loop_set01" );
}

_id_C662B3B1C9C996AB( _id_703F5326D615B314 )
{
    level endon( "missile_explosion_vfx_played" );
    level endon( "vfx_pre_explosion_played" );
    guys = [ level._id_671B79D96235FD1D[1], level._id_7604B74E080BCE69[0], level._id_7604B74E080BCE69[1] ];
    animnode = scripts\engine\utility::getstruct( "animnode_ghorbrani_arrive", "targetname" );

    if ( _id_703F5326D615B314 )
        animnode scripts\common\anim::anim_first_frame( guys, "inspect_set02_loop" );
    else
    {
        animnode scripts\sp\anim::anim_reach( guys, "inspect_set02" );
        animnode scripts\common\anim::anim_single( guys, "inspect_set02" );
    }

    animnode scripts\common\anim::anim_loop( guys, "inspect_set02_loop", "inspect_loop_set02" );
}

_id_C662B2B1C9C99478( _id_703F5326D615B314 )
{
    level endon( "missile_explosion_vfx_played" );
    level endon( "vfx_pre_explosion_played" );
    guys = [ level._id_7604B74E080BCE69[2], level._id_7604B74E080BCE69[3], level._id_7604B74E080BCE69[4] ];
    animnode = scripts\engine\utility::getstruct( "animnode_ghorbrani_arrive", "targetname" );

    if ( _id_703F5326D615B314 )
        animnode scripts\common\anim::anim_first_frame( guys, "inspect_set03_loop" );
    else
    {
        animnode scripts\sp\anim::anim_reach( guys, "inspect_set03" );
        animnode scripts\common\anim::anim_single( guys, "inspect_set03" );
    }

    animnode scripts\common\anim::anim_loop( guys, "inspect_set03_loop", "inspect_loop_set03" );
}

_id_305B8179CA81D788()
{
    if ( level.start_point != "spot_ghorbrani" )
        scripts\engine\sp\utility::trigger_wait_targetname( "tutorial_crouch_trigger" );
    else
        waitframe();

    animnode = scripts\engine\utility::getstruct( "animnode_ghorbrani_arrive", "targetname" );
    setsaveddvar( "dvar_5A83A561CB4970B2", 16000 );
    playfx( scripts\engine\utility::getfx( "vfx_strike_heli_dust" ), animnode.origin );
}

_id_374739F7E42489F8()
{
    level.player scripts\common\utility::dof_disable_autofocus();
}

_id_09AD272D2DFB3F0F()
{
    scripts\engine\utility::flag_wait( "laswell_request_visual" );
    _id_7939F5F6121B47FB();
    _id_9991FCE49EB84276();
    scripts\engine\utility::flag_set( "player_inspect_motorpool" );
    scripts\engine\utility::flag_wait( "begin_ghorbrani_search" );
    _id_F1ACDD558FE31C0D();
    scripts\engine\utility::flag_wait( "ghorbrani_first_face_player" );
    _id_8DB7B70FEB51C0EA();
    scripts\engine\utility::flag_set( "ghorbrani_spotted" );
    thread _id_4C6884BCFDB82268();
    _id_05585D9189ACEEDC();
    scripts\engine\utility::flag_set( "target_confirmed" );
    _id_624B16E62718D18A::_id_CF2ADE74EF2EC215( 0 );
    _id_624B16E62718D18A::_id_BF4B28AC990E07C4( 0 );
}

_id_7939F5F6121B47FB()
{
    level.player thread _id_19B26AE079FE8064();
    level.player thread _id_4D20C097714C427A();
}

_id_4C6884BCFDB82268()
{
    level endon( "target_confirmed" );

    for (;;)
    {
        if ( !isdefined( level.player._id_0783B55C97556DF6 ) )
            waitframe();

        _id_624B16E62718D18A::_id_CF2ADE74EF2EC215( level.player._id_0783B55C97556DF6 );
        _id_624B16E62718D18A::_id_BF4B28AC990E07C4( level.player._id_0783B55C97556DF6 );
        waitframe();
    }
}

_id_8AFD6ACFCFCBFBCD( _id_8D51C5502A861071 )
{
    _id_8D51C5502A861071 = scripts\engine\utility::_id_53C4C53197386572( _id_8D51C5502A861071, 1 );
    _id_624B16E62718D18A::_id_CF2ADE74EF2EC215( 0 );
    _id_624B16E62718D18A::_id_BF4B28AC990E07C4( 0 );
    _id_79FB381FD77D2642::give_spotter_scope( ::_id_280C83235F13312D, ::_id_9093A99D770FE8F8, ::_id_3A621127017EE1E2, ::_id_1F5D2205D0DC22A5 );

    if ( _id_8D51C5502A861071 )
        _id_7939F5F6121B47FB();

    scripts\engine\utility::flag_set( "spotter_scope_given" );
}

_id_9991FCE49EB84276()
{
    _id_741C70BA0DE65FB8 = scripts\engine\utility::getstruct( "peak_base_center", "targetname" );

    for (;;)
    {
        if ( level.player scripts\engine\utility::ent_flag( "scope_used" ) )
        {
            _id_5B0BB49E2ED5F3B8 = level.player geteye();
            _id_7CA02A03522A0C09 = _id_5B0BB49E2ED5F3B8 + _id_79FB381FD77D2642::_id_FFC7A1716E646BFF() * _id_79FB381FD77D2642::_id_C7CDBFE8D938A136( 20000 );
            _id_69EB8681E3FC6EA6 = _id_79FB381FD77D2642::_id_EB1327C165EB1226( _id_5B0BB49E2ED5F3B8, _id_7CA02A03522A0C09, _id_741C70BA0DE65FB8.origin, 1200, 0 );

            if ( _id_69EB8681E3FC6EA6 )
                break;
        }

        wait 1;
    }
}

_id_F1ACDD558FE31C0D()
{
    while ( !level.player _id_A001F4BEB55BA3F9() )
        waitframe();

    scripts\engine\utility::flag_set( "vip_spotted" );
}

_id_05585D9189ACEEDC()
{
    level.player._id_0783B55C97556DF6 = 0;

    for (;;)
    {
        if ( level.player _id_A001F4BEB55BA3F9() && _id_BC6E27C744B1C1FB() )
        {
            if ( !level.player._id_0783B55C97556DF6 )
            {
                scripts\engine\sp\utility::display_hint( "offhand_spotter_commit", undefined, 0, level.player, "confirm_target_endon" );
                level.player._id_0783B55C97556DF6 = 1;
            }

            if ( level.player usinggamepad() && ( level.player attackbuttonpressed() || level.player meleebuttonpressed() || level.player usebuttonpressed() ) )
            {
                _id_CC0E89A6625950C3();
                break;
            }
            else if ( level.player attackbuttonpressed() )
            {
                _id_CC0E89A6625950C3();
                break;
            }
        }
        else if ( level.player._id_0783B55C97556DF6 )
        {
            level.player notify( "confirm_target_endon" );
            level.player._id_0783B55C97556DF6 = 0;
        }

        waitframe();
    }

    level.player notify( "confirm_target_endon" );
}

_id_8DB7B70FEB51C0EA()
{
    _id_1B716A75FD6840E0 = 40;

    for (;;)
    {
        wait 2;

        if ( _id_BC6E27C744B1C1FB() && level.player _id_A001F4BEB55BA3F9() )
            break;
    }
}

_id_A001F4BEB55BA3F9()
{
    return scripts\engine\utility::ent_flag( "scope_used" ) && scripts\engine\utility::ent_flag( "scope_zoomed" ) && _id_4ECE68A78002E8EB();
}

_id_4ECE68A78002E8EB()
{
    _id_21EA528A803510AD = getdvarint( "dvar_92A8528E3AEB0669", 0 );
    _id_1B716A75FD6840E0 = 60;
    _id_5B0BB49E2ED5F3B8 = level.player geteye();
    _id_7CA02A03522A0C09 = _id_5B0BB49E2ED5F3B8 + _id_79FB381FD77D2642::_id_FFC7A1716E646BFF() * _id_79FB381FD77D2642::_id_C7CDBFE8D938A136( 1000 );
    _id_69EB8681E3FC6EA6 = _id_79FB381FD77D2642::_id_EB1327C165EB1226( _id_5B0BB49E2ED5F3B8, _id_7CA02A03522A0C09, level._id_30FFA2D97ADB1413 gettagorigin( "j_head" ), _id_1B716A75FD6840E0, _id_21EA528A803510AD );
    return _id_69EB8681E3FC6EA6;
}

_id_CC0E89A6625950C3()
{
    level._id_47F211362E2945AE = newhudelem();
    level._id_47F211362E2945AE setshader( "icon_waypoint_enemy_marker", 2, 2 );
    level._id_47F211362E2945AE.alpha = 0.8;
    level._id_47F211362E2945AE setwaypoint( 1, 1, 1 );
    offset = ( 0, 0, distance( level._id_30FFA2D97ADB1413.origin, level._id_30FFA2D97ADB1413 gettagorigin( "j_head" ) ) + 5 );
    level._id_47F211362E2945AE _meth_4F1F5E315DC51039( level._id_30FFA2D97ADB1413, offset );
    level._id_30FFA2D97ADB1413 dontinterpolate();
    level._id_47F211362E2945AE.origin = level._id_30FFA2D97ADB1413 gettagorigin( "j_head" );
}

_id_BC6E27C744B1C1FB()
{
    if ( scripts\engine\utility::flag( "ghorbrani_first_face_player" ) )
        return 1;

    if ( scripts\engine\utility::flag( "ghorbrani_second_face_player" ) )
        return 1;

    if ( scripts\engine\utility::flag( "ghorbrani_always_face_player" ) )
        return 1;

    return 0;
}

_id_93D9CBD9EA7DDDFF()
{
    base = spawnstruct();
    base.origin = ( 21840, 13608, 2016 );

    for (;;)
    {
        if ( scripts\engine\trace::can_see_origin( base.origin, 0 ) )
            break;

        wait 0.5;
    }
}

_id_D60A742376440949()
{
    level._id_FD636EEBAF1FD1DC = scripts\engine\utility::_id_53C4C53197386572( level._id_FD636EEBAF1FD1DC, [] );
    animnode = scripts\engine\utility::getstruct( "animnode_ruins_lean", "targetname" );
    _id_A4312E2C956F3B0D = scripts\engine\sp\utility::get_living_ai( "ruins_crates_lean_guy", "targetname" );
    _id_A4312E2C956F3B0D.animname = "ruins_crates_lean_guy";
    level._id_FD636EEBAF1FD1DC scripts\engine\utility::array_add( level._id_FD636EEBAF1FD1DC, _id_A4312E2C956F3B0D );
    animnode scripts\common\anim::anim_first_frame_solo( _id_A4312E2C956F3B0D, "wall_lean" );
    animnode thread scripts\common\anim::anim_loop_solo( _id_A4312E2C956F3B0D, "wall_lean" );
    _id_D69620CD063ABBAC = scripts\engine\sp\utility::get_living_ai( "lav_repair_guy", "targetname" );
    _id_D69620CD063ABBAC.animname = "lav_repair_guy";
    level._id_FD636EEBAF1FD1DC scripts\engine\utility::array_add( level._id_FD636EEBAF1FD1DC, _id_D69620CD063ABBAC );
    _id_D69620CD063ABBAC thread _id_5F367827BA73DE85();
    animnode = scripts\engine\utility::getstruct( "animnoe_ruins_phone_guy", "targetname" );
    _id_5D0932D4A657541F = scripts\engine\sp\utility::get_living_ai( "ruins_phone_guy", "targetname" );
    _id_5D0932D4A657541F.animname = "ruins_phone_guy";
    level._id_FD636EEBAF1FD1DC scripts\engine\utility::array_add( level._id_FD636EEBAF1FD1DC, _id_5D0932D4A657541F );
    animnode scripts\common\anim::anim_first_frame_solo( _id_5D0932D4A657541F, "phone_use_loop" );
    animnode thread scripts\common\anim::anim_loop_solo( _id_5D0932D4A657541F, "phone_use_loop" );
    animnode = spawnstruct();
    animnode.origin = ( 16506, 15607, 1369 );
    animnode.angles = ( 0, 304.51, 0 );
    _id_782768B9E92E4B61 = scripts\engine\sp\utility::get_living_ai( "map_guy", "targetname" );
    _id_782768B9E92E4B61.animname = "map_guy";
    level._id_FD636EEBAF1FD1DC scripts\engine\utility::array_add( level._id_FD636EEBAF1FD1DC, _id_782768B9E92E4B61 );
    animnode scripts\common\anim::anim_first_frame_solo( _id_782768B9E92E4B61, "map_lookat_loop" );
    animnode thread scripts\common\anim::anim_loop_solo( _id_782768B9E92E4B61, "map_lookat_loop" );
    animnode = scripts\engine\utility::getstruct( "animnode_tank_repair", "targetname" );
    _id_1D4360B75D011D89 = scripts\engine\sp\utility::get_living_ai( "tank_repair_guy", "targetname" );
    _id_1D4360B75D011D89.animname = "tank_repair_guy";
    level._id_FD636EEBAF1FD1DC scripts\engine\utility::array_add( level._id_FD636EEBAF1FD1DC, _id_1D4360B75D011D89 );
    animnode scripts\common\anim::anim_first_frame_solo( _id_1D4360B75D011D89, "repair_loop" );
    animnode thread scripts\common\anim::anim_loop_solo( _id_1D4360B75D011D89, "repair_loop" );
    animnode = scripts\engine\utility::getstruct( "animnode_sleeping_guy", "targetname" );
    _id_5FBEBA920D5B1B94 = scripts\engine\sp\utility::get_living_ai( "ruins_sleeping_guy", "targetname" );
    _id_5FBEBA920D5B1B94.animname = "sleeping_guy";
    level._id_FD636EEBAF1FD1DC scripts\engine\utility::array_add( level._id_FD636EEBAF1FD1DC, _id_5FBEBA920D5B1B94 );
    animnode scripts\common\anim::anim_first_frame_solo( _id_5FBEBA920D5B1B94, "sleep_loop" );
    animnode thread scripts\common\anim::anim_loop_solo( _id_5FBEBA920D5B1B94, "sleep_loop" );
    _id_5D0932D4A657541F = scripts\engine\sp\utility::get_living_ai( "tent_phone_guy", "targetname" );
    _id_5D0932D4A657541F.animname = "phone_guy";
    level._id_FD636EEBAF1FD1DC scripts\engine\utility::array_add( level._id_FD636EEBAF1FD1DC, _id_5D0932D4A657541F );
    _id_5D0932D4A657541F thread _id_ABF4A4BF4DE59FF6();
}

_id_ABF4A4BF4DE59FF6()
{
    self endon( "death" );
    scripts\engine\sp\utility::putgunaway();
    phone = scripts\engine\sp\utility::spawn_anim_model( "phone", self gettagorigin( "tag_accessory_left" ), self gettagangles( "tag_accessory_left" ) );
    phone linkto( self, "tag_accessory_left" );
    phone thread _id_A1CBEB0B29BECC97( self );
    animnode = spawnstruct();
    animnode.origin = ( 19954.3, 11630, 1360 );
    animnode.angles = ( 0, 284.621, 0 );
    animnode scripts\common\anim::anim_first_frame_solo( self, "phone_enter" );
    animnode scripts\common\anim::anim_single_solo( self, "phone_enter" );
    animnode childthread scripts\common\anim::anim_loop_solo( self, "phone_loop" );
}

_id_A1CBEB0B29BECC97( owner )
{
    owner waittill( "death" );
    self delete();
}

_id_5F367827BA73DE85()
{
    self endon( "death" );
    wait 8;
    _id_3C0C99D253D57D7E = getnode( "to_lav_path_start", "targetname" );
    childthread scripts\sp\spawner::go_to_node( _id_3C0C99D253D57D7E );
    self waittill( "reached_path_end" );
    animnode = scripts\engine\utility::getstruct( "anim_node_lav_repair_enter", "targetname" );
    animnode scripts\sp\anim::anim_reach_solo( self, "repair_enter" );
    animnode scripts\common\anim::anim_single_solo( self, "repair_enter" );
    animnode = scripts\engine\utility::getstruct( "animnode_lav_repair", "targetname" );
    animnode childthread scripts\common\anim::anim_loop_solo( self, "repair_loop" );
    _id_CE6E673848F4EAD4 = getanimlength( scripts\engine\utility::getanim( "repair_loop" )[0] );
    _id_D5146610CF31D61D = gettime();

    for (;;)
    {
        wait( _id_CE6E673848F4EAD4 );
        _id_7B1581126294041D = _id_79FB381FD77D2642::_id_D26404FA28607555( gettime() - _id_D5146610CF31D61D );

        if ( _id_7B1581126294041D >= 10 )
            break;
    }

    animnode notify( "stop_loop" );
    animnode scripts\common\anim::anim_single_solo( self, "repair_exit" );
    _id_EC691F68530A2F62 = getnode( "leave_lav_path_start", "targetname" );
    childthread scripts\sp\spawner::go_to_node( _id_EC691F68530A2F62 );
}

_id_B3F096B1124E2210()
{
    _id_3ECFAF158298AD39();
    _id_34002B25F5A90BEA();
    thread _id_D60A742376440949();
    scripts\engine\utility::flag_wait( "enemies_spawned" );
    animnode = scripts\engine\utility::getstruct( "animnode_ghorbrani_arrive", "targetname" );
    animnode scripts\common\anim::anim_first_frame( level._id_7604B74E080BCE69, "meeting" );
    animnode scripts\common\anim::anim_first_frame( level._id_671B79D96235FD1D, "meeting" );
    animnode scripts\common\anim::anim_first_frame( [ level._id_30FFA2D97ADB1413, level._id_178676AE3AB08204, level._id_95962314C3EC729F ], "meeting" );
}

_id_3ECFAF158298AD39()
{
    level._id_95962314C3EC729F = scripts\engine\sp\utility::spawn_anim_model( "ghorbrani_chopper" );

    for ( _id_AC0E594AC96AA3A8 = 1; _id_AC0E594AC96AA3A8 < 6; _id_AC0E594AC96AA3A8++ )
        level._id_95962314C3EC729F hidepart( "tag_main_rotor_blade_0" + _id_AC0E594AC96AA3A8 + "_blur" );

    for ( _id_AC0E594AC96AA3A8 = 1; _id_AC0E594AC96AA3A8 < 4; _id_AC0E594AC96AA3A8++ )
        level._id_95962314C3EC729F hidepart( "tag_tail_rotor_blade_0" + _id_AC0E594AC96AA3A8 + "_blur" );
}

_id_34002B25F5A90BEA()
{
    level._id_2C34DCBB741FABD3 = _id_79FB381FD77D2642::_id_C418440ADB8F6EC6( "pilot_left", "head_russian_helicopter_pilot_opaque_gray" );
    level._id_B01A904242A948DC = _id_79FB381FD77D2642::_id_C418440ADB8F6EC6( "pilot_right", "head_russian_helicopter_pilot_opaque_gray" );
    _id_FB6E7F874C383200 = scripts\engine\utility::getstruct( "animnode_pilot_left", "targetname" );
    _id_FB6E7F874C383200 thread scripts\common\anim::anim_loop_solo( level._id_2C34DCBB741FABD3, "idle_loop" );
    _id_9D1999E8115EB695 = scripts\engine\utility::getstruct( "animnode_pilot_right", "targetname" );
    _id_9D1999E8115EB695 thread scripts\common\anim::anim_loop_solo( level._id_B01A904242A948DC, "idle_loop" );
}

_id_280C83235F13312D()
{
    if ( getdvarint( "dvar_7699C03A5F0AAC1D", 0 ) )
        iprintlnbold( "Scope used" );

    level thread _id_CCDDB499A9541C36();
    thread _id_68345A6B719A553C::_id_DD12F8676DDA4A4F();
    scripts\engine\utility::kill_exploder( "heathaze_normal" );
    scripts\engine\utility::kill_exploder( "heathaze_zoom_2" );
    scripts\engine\utility::exploder( "heathaze_zoom_1" );
    level.player allowmelee( 0 );
    self stopgestureviewmodel( level.gestures["relaxed"] );
}

_id_CCDDB499A9541C36()
{
    level endon( "scope_put_away" );
    level.player playsound( "scn_strike_spotter_scope_raise_start" );
    wait 0.3;
    level.player playsound( "scn_strike_spotter_scope_raise_end" );
}

_id_9093A99D770FE8F8()
{
    if ( getdvarint( "dvar_7699C03A5F0AAC1D", 0 ) )
        iprintlnbold( "Scope put away" );

    level notify( "scope_put_away" );
    level.player playsound( "scn_strike_spotter_scope_lower" );
    thread _id_68345A6B719A553C::_id_8AD0E9FFC375CDE4();
    level.player allowmelee( 1 );
    _id_79FB381FD77D2642::_id_9F219BB151515501();

    if ( !scripts\engine\utility::flag( "missile_called" ) )
        _id_79FB381FD77D2642::_id_E376A2A1B419E02A();
}

_id_3A621127017EE1E2()
{
    if ( getdvarint( "dvar_7699C03A5F0AAC1D", 0 ) )
        iprintlnbold( "Scope zoomed" );

    level.player playsound( "scn_strike_spotter_scope_zoom_in" );
    thread _id_68345A6B719A553C::_id_71ED461C2E5C4D69();
    scripts\engine\utility::kill_exploder( "heathaze_normal" );
    scripts\engine\utility::kill_exploder( "heathaze_zoom_1" );
    scripts\engine\utility::exploder( "heathaze_zoom_2" );
}

_id_1F5D2205D0DC22A5()
{
    if ( getdvarint( "dvar_7699C03A5F0AAC1D", 0 ) )
        iprintlnbold( "Scope unzoomed" );

    level.player playsound( "scn_strike_spotter_scope_zoom_out" );
    thread _id_68345A6B719A553C::_id_DD12F8676DDA4A4F();

    if ( level.player scripts\engine\utility::ent_flag( "scope_used" ) )
    {
        scripts\engine\utility::kill_exploder( "heathaze_normal" );
        scripts\engine\utility::kill_exploder( "heathaze_zoom_2" );
        scripts\engine\utility::exploder( "heathaze_zoom_1" );
    }
    else
    {
        scripts\engine\utility::kill_exploder( "heathaze_zoom_1" );
        scripts\engine\utility::kill_exploder( "heathaze_zoom_2" );
        scripts\engine\utility::exploder( "heathaze_normal" );
    }
}

_id_BB2E6AC2BD58DACA()
{
    level._id_ABC709ED60ADFE1D = scripts\engine\utility::_id_53C4C53197386572( level._id_ABC709ED60ADFE1D, [] );
    self.stealth.funcs["event_combat"] = ::_id_68B6409CA7D4DE09;
    self.stealth.funcs["event_bulletwhizby"] = ::_id_68B6409CA7D4DE09;
    self.stealth.funcs["event_investigate"] = ::_id_68B6409CA7D4DE09;
    self.stealth.funcs["event_cover_blown"] = ::_id_68B6409CA7D4DE09;
    scripts\engine\sp\utility::battlechatter_off();
    self.goalradius = 32;
    level._id_ABC709ED60ADFE1D = scripts\engine\utility::array_add( level._id_ABC709ED60ADFE1D, self );
}

_id_68B6409CA7D4DE09( event )
{
    if ( _id_D495C60151843308( event ) )
    {
        scripts\engine\utility::flag_set( "player_spotted" );
        return 1;
    }

    return 0;
}

_id_D495C60151843308( event )
{
    _id_3807BEF81851C3FE = [ "silenced_shot_impact", "gunshot_impact" ];

    if ( scripts\engine\utility::array_contains( _id_3807BEF81851C3FE, event.typeorig ) )
        return 1;

    return 0;
}
