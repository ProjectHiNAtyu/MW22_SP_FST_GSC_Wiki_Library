// IW9 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

init_starts()
{
    scripts\engine\utility::flag_init( "start_is_set" );
    setdvarifuninitialized( "dvar_6CDDEF6C142D4CF5", 0 );
    scripts\engine\sp\utility::add_start( "no_game", ::start_nogame );
    add_no_game_starts();
}

do_starts()
{
    thread handle_starts();
    do_no_game_start();
}

add_no_game_starts()
{
    _id_66AB67677B93DD3D = getentarray( "script_origin_start_nogame", "classname" );

    if ( !_id_66AB67677B93DD3D.size )
        return;

    foreach ( _id_0C3EA9B1A20FF199 in _id_66AB67677B93DD3D )
    {
        if ( !isdefined( _id_0C3EA9B1A20FF199.script_startname ) )
            continue;

        scripts\engine\sp\utility::add_start( "no_game_" + _id_0C3EA9B1A20FF199.script_startname, ::start_nogame );
    }
}

do_no_game_start()
{
    if ( !is_no_game_start() )
        return;

    setsaveddvar( "dvar_1CC4E4A2542AF7F5", "1" );

    if ( isdefined( level.custom_no_game_setupfunc ) )
        level [[ level.custom_no_game_setupfunc ]]();

    scripts\sp\audio::init_audio();
    do_no_game_start_teleport();
    scripts\engine\utility::array_call( getentarray( "truckjunk", "targetname" ), ::delete );
    scripts\engine\utility::array_call( getentarray( "truckjunk", "script_noteworthy" ), ::delete );
    level waittill( "eternity" );
}

do_no_game_start_teleport()
{
    _id_66AB67677B93DD3D = getentarray( "script_origin_start_nogame", "classname" );

    if ( !_id_66AB67677B93DD3D.size )
        return;

    _id_66AB67677B93DD3D = sortbydistance( _id_66AB67677B93DD3D, level.player.origin );

    if ( level.start_point == "no_game" )
    {
        level.player scripts\engine\sp\utility::teleport_player( _id_66AB67677B93DD3D[0] );
        return;
    }

    _id_23CC4FB96F8E24CC = getsubstr( level.start_point, 8 );
    _id_12B5978D746F0CA4 = 0;

    foreach ( point in _id_66AB67677B93DD3D )
    {
        if ( !isdefined( point.script_startname ) )
            continue;

        if ( _id_23CC4FB96F8E24CC != point.script_startname )
            continue;

        if ( isdefined( point.script_visionset ) )
            visionsetnaked( point.script_visionset, 0 );

        level.player scripts\engine\sp\utility::teleport_player( point );
        _id_12B5978D746F0CA4 = 1;
        break;
    }

    if ( !_id_12B5978D746F0CA4 )
        level.player scripts\engine\sp\utility::teleport_player( _id_66AB67677B93DD3D[0] );
}

start_nogame()
{
    if ( getdvarint( "dvar_5D83147342337F0B" ) > 0 )
    {
        spawners = _func_91E8F01DD90DE05A();

        foreach ( spawner in spawners )
        {
            spawner.target = undefined;
            spawner.targetname = undefined;
        }
    }
    else
        scripts\engine\utility::array_call( _func_91E8F01DD90DE05A(), ::delete );

    scripts\engine\utility::array_call( getaiarray(), ::delete );
    _id_B65F27B4BA84B114 = [];
    _id_B65F27B4BA84B114["trigger_multiple_createart_transient"] = scripts\sp\trigger::trigger_createart_transient;

    foreach ( classname, function in _id_B65F27B4BA84B114 )
    {
        triggers = getentarray( classname, "classname" );
        scripts\engine\utility::array_levelthread( triggers, function );
    }
}

start_menu()
{

}

get_start_dvars()
{
    _id_09A8C945FE45C8E5 = [];

    for ( _id_AC0E594AC96AA3A8 = 0; _id_AC0E594AC96AA3A8 < level.start_functions.size; _id_AC0E594AC96AA3A8++ )
        _id_09A8C945FE45C8E5[_id_09A8C945FE45C8E5.size] = level.start_functions[_id_AC0E594AC96AA3A8]["name"];

    return _id_09A8C945FE45C8E5;
}

display_starts()
{
    if ( level.start_functions.size <= 0 )
        return;

    _id_09A8C945FE45C8E5 = get_start_dvars();
    _id_09A8C945FE45C8E5[_id_09A8C945FE45C8E5.size] = "default";
    _id_09A8C945FE45C8E5[_id_09A8C945FE45C8E5.size] = "cancel";
    level.player enableinvulnerability();
    level.player freezecontrols( 1 );
    _id_2E5F671F800DB00F = start_list_menu();
    title = create_start( "Selected Start:", -1 );
    title.color = ( 1, 1, 1 );
    strings = [];

    for ( _id_AC0E594AC96AA3A8 = 0; _id_AC0E594AC96AA3A8 < _id_09A8C945FE45C8E5.size; _id_AC0E594AC96AA3A8++ )
    {
        dvar = _id_09A8C945FE45C8E5[_id_AC0E594AC96AA3A8];
        _id_16EE78BE2C1E34B5 = "[" + _id_09A8C945FE45C8E5[_id_AC0E594AC96AA3A8] + "]";
        strings[strings.size] = _id_16EE78BE2C1E34B5;
    }

    selected = _id_09A8C945FE45C8E5.size - 1;
    _id_AFE3F74CC0310E71 = 0;
    _id_3A509549F27FE5C0 = 0;

    for ( _id_23C24FAF493B443A = 0; selected > 0; selected-- )
    {
        if ( _id_09A8C945FE45C8E5[selected] == level.start_point )
        {
            _id_23C24FAF493B443A = 1;
            break;
        }
    }

    if ( !_id_23C24FAF493B443A )
        selected = _id_09A8C945FE45C8E5.size - 1;

    start_list_settext( _id_2E5F671F800DB00F, strings, selected );
    _id_BE30910D301F5836 = selected;
    _id_1A6F1E60B90FBE7C = 0;

    for (;;)
    {
        if ( _id_BE30910D301F5836 != selected )
        {
            start_list_settext( _id_2E5F671F800DB00F, strings, selected );
            _id_BE30910D301F5836 = selected;
        }

        if ( gettime() - _id_1A6F1E60B90FBE7C > 150 )
        {
            _id_AFE3F74CC0310E71 = 0;
            _id_3A509549F27FE5C0 = 0;
        }

        if ( !_id_AFE3F74CC0310E71 )
        {
            if ( level.player buttonpressed( "UPARROW" ) || level.player buttonpressed( "DPAD_UP" ) || level.player buttonpressed( "APAD_UP" ) )
            {
                _id_AFE3F74CC0310E71 = 1;
                _id_1A6F1E60B90FBE7C = gettime();
                selected--;
            }
        }
        else if ( !level.player buttonpressed( "UPARROW" ) && !level.player buttonpressed( "DPAD_UP" ) && !level.player buttonpressed( "APAD_UP" ) )
            _id_AFE3F74CC0310E71 = 0;

        if ( !_id_3A509549F27FE5C0 )
        {
            if ( level.player buttonpressed( "DOWNARROW" ) || level.player buttonpressed( "DPAD_DOWN" ) || level.player buttonpressed( "APAD_DOWN" ) )
            {
                _id_3A509549F27FE5C0 = 1;
                _id_1A6F1E60B90FBE7C = gettime();
                selected++;
            }
        }
        else if ( !level.player buttonpressed( "DOWNARROW" ) && !level.player buttonpressed( "DPAD_DOWN" ) && !level.player buttonpressed( "APAD_DOWN" ) )
            _id_3A509549F27FE5C0 = 0;

        if ( selected < 0 )
            selected = _id_09A8C945FE45C8E5.size - 1;

        if ( selected >= _id_09A8C945FE45C8E5.size )
            selected = 0;

        if ( level.player buttonpressed( "BUTTON_B" ) || level.player buttonpressed( "escape" ) )
        {
            start_display_cleanup( _id_2E5F671F800DB00F, title );
            break;
        }

        if ( level.player buttonpressed( "kp_enter" ) || level.player buttonpressed( "BUTTON_A" ) || level.player buttonpressed( "enter" ) )
        {
            if ( _id_09A8C945FE45C8E5[selected] == "cancel" )
            {
                start_display_cleanup( _id_2E5F671F800DB00F, title );
                break;
            }

            setdvar( "dvar_8CB00B8C1F5FF522", _id_09A8C945FE45C8E5[selected] );
            map_restart();
        }

        wait 0.05;
    }

    level.player freezecontrols( 0 );
    level.player disableinvulnerability();
}

start_list_menu()
{
    _id_448919804EE75ECC = [];

    for ( _id_AC0E594AC96AA3A8 = 0; _id_AC0E594AC96AA3A8 < 11; _id_AC0E594AC96AA3A8++ )
    {
        hud = create_start( "", _id_AC0E594AC96AA3A8 );
        _id_448919804EE75ECC[_id_448919804EE75ECC.size] = hud;
    }

    return _id_448919804EE75ECC;
}

start_list_settext( _id_448919804EE75ECC, strings, num )
{
    for ( _id_AC0E594AC96AA3A8 = 0; _id_AC0E594AC96AA3A8 < _id_448919804EE75ECC.size; _id_AC0E594AC96AA3A8++ )
    {
        index = _id_AC0E594AC96AA3A8 + ( num - 5 );

        if ( isdefined( strings[index] ) )
            text = strings[index];
        else
            text = "";

        _id_448919804EE75ECC[_id_AC0E594AC96AA3A8] settext( text );
    }
}

start_display_cleanup( _id_2E5F671F800DB00F, title )
{
    title destroy();

    for ( _id_AC0E594AC96AA3A8 = 0; _id_AC0E594AC96AA3A8 < _id_2E5F671F800DB00F.size; _id_AC0E594AC96AA3A8++ )
        _id_2E5F671F800DB00F[_id_AC0E594AC96AA3A8] destroy();
}

start_load_transients()
{
    _id_37A46A86C391CE84 = [];

    if ( _func_69D0ACF74B96CAB4() )
        _id_37A46A86C391CE84 = _func_C580A674E4683C23();
    else
    {
        if ( level.start_point != "default" )
        {
            _id_D1C6381E96D14169 = level.start_arrays[level.start_point];

            if ( isdefined( _id_D1C6381E96D14169["transient"] ) )
            {
                _id_F4322CE4EC225081 = _id_D1C6381E96D14169["transient"];

                if ( isstring( _id_F4322CE4EC225081 ) )
                {
                    if ( _id_F4322CE4EC225081 == "none" )
                        _id_37A46A86C391CE84 = [];
                    else
                    {
                        _id_CCDD77193DEFD398 = _func_18D9902DDD82755F();
                        _id_E53BFC2BD3BA06C9 = "none";

                        foreach ( name in _id_CCDD77193DEFD398 )
                        {
                            if ( _id_F4322CE4EC225081 == name )
                            {
                                _id_E53BFC2BD3BA06C9 = _id_F4322CE4EC225081;
                                level._id_D06C0DF83859D1C3[_id_F4322CE4EC225081] = 1;
                                break;
                            }
                        }

                        if ( _id_E53BFC2BD3BA06C9 == "none" )
                            _id_37A46A86C391CE84 = [ _id_F4322CE4EC225081 ];
                        else
                            _id_37A46A86C391CE84 = _func_4B2EEF7AEDA21AB9( _id_E53BFC2BD3BA06C9 );
                    }
                }
                else if ( isarray( _id_F4322CE4EC225081 ) )
                    _id_37A46A86C391CE84 = _id_F4322CE4EC225081;
            }
        }

        foreach ( _id_F90358454413407F in _id_37A46A86C391CE84 )
        {
            if ( !_func_CE0A91B4AEDBEA1E( _id_F90358454413407F ) )
                scripts\engine\utility::error( "add_start() list has a non SP level transient in it: " + _id_F90358454413407F );
        }
    }

    if ( _id_37A46A86C391CE84.size > 0 )
    {
        _func_8C54F75C7A634308( _id_37A46A86C391CE84 );

        foreach ( _id_E4223248FA0A44F9 in _id_37A46A86C391CE84 )
            scripts\engine\utility::flag_set( _id_E4223248FA0A44F9 + "_loaded" );

        level notify( "new_transient_loaded" );
    }
    else
        _func_2D95D2DE0E83E6FF();
}

handle_starts()
{
    level.start_struct = spawnstruct();
    setdvarifuninitialized( "dvar_8CB00B8C1F5FF522", "" );

    if ( getdvar( "dvar_7F5C464E214C560C" ) != "" && getdvar( "dvar_7F5C464E214C560C" ) != "0" )
        return;

    if ( !isdefined( level.start_functions ) )
        level.start_functions = [];

    start = tolower( getdvar( "dvar_8CB00B8C1F5FF522" ) );
    _id_09A8C945FE45C8E5 = get_start_dvars();

    if ( isdefined( level.start_point ) )
        start = level.start_point;

    if ( getdvarint( "dvar_6CDDEF6C142D4CF5" ) )
        start = level.feedback_start_point;

    _id_2F05FDC372F83530 = 0;

    for ( _id_AC0E594AC96AA3A8 = 0; _id_AC0E594AC96AA3A8 < _id_09A8C945FE45C8E5.size; _id_AC0E594AC96AA3A8++ )
    {
        if ( start == _id_09A8C945FE45C8E5[_id_AC0E594AC96AA3A8] )
        {
            _id_2F05FDC372F83530 = _id_AC0E594AC96AA3A8;
            level.start_point = _id_09A8C945FE45C8E5[_id_AC0E594AC96AA3A8];
            break;
        }
    }

    if ( isdefined( level.default_start_override_alt ) && !isdefined( level.start_point ) )
    {
        _id_C413E9BA7FAB9C45 = level.player _meth_2583E4BC5ABCA7B5( "lastCompletedMission" );

        if ( isdefined( _id_C413E9BA7FAB9C45 ) )
        {
            _id_E97377032A878881 = strtok( _id_C413E9BA7FAB9C45, "_" );

            if ( isdefined( _id_C413E9BA7FAB9C45 ) && _id_E97377032A878881.size > 0 )
            {
                if ( _id_E97377032A878881[0] == "sa" || _id_E97377032A878881[0] == "ja" )
                {
                    foreach ( index, dvar in _id_09A8C945FE45C8E5 )
                    {
                        if ( level.default_start_override_alt == dvar )
                        {
                            _id_2F05FDC372F83530 = index;
                            level.start_point = dvar;
                            break;
                        }
                    }
                }
            }
        }
    }

    if ( isdefined( level.default_start_override ) && !isdefined( level.start_point ) )
    {
        foreach ( index, dvar in _id_09A8C945FE45C8E5 )
        {
            if ( level.default_start_override == dvar )
            {
                _id_2F05FDC372F83530 = index;
                level.start_point = dvar;
                break;
            }
        }
    }

    if ( !isdefined( level.start_point ) )
    {
        if ( isdefined( level.default_start ) )
            level.start_point = "default";
        else if ( level_has_start_points() )
            level.start_point = level.start_functions[0]["name"];
        else
            level.start_point = "default";
    }

    start_load_transients();
    waittillframeend;
    scripts\engine\utility::flag_set( "start_is_set" );
    thread start_menu();
    _id_D1C6381E96D14169 = level.start_arrays[level.start_point];

    if ( isdefined( _id_D1C6381E96D14169 ) && isdefined( _id_D1C6381E96D14169["start_in_jackal"] ) )
    {
        setomnvar( "ui_active_hud", "jackal" );
        setsaveddvar( "dvar_E5E11740F51A39D5", 1 );
    }
    else
        setomnvar( "ui_active_hud", "infantry" );

    if ( level.start_point == "default" )
    {
        if ( isdefined( level.default_start ) )
            level thread [[ level.default_start ]]();
    }
    else
    {
        _id_D1C6381E96D14169 = level.start_arrays[level.start_point];
        _func_D6004361B7A233E4();
        thread [[ _id_D1C6381E96D14169["start_func"] ]]();
    }

    if ( scripts\engine\sp\utility::is_default_start() || getdvarint( "dvar_3086AA2871E781C1" ) )
    {
        string = get_string_for_starts( _id_09A8C945FE45C8E5 );
        setdvar( "dvar_8CB00B8C1F5FF522", string );
    }

    if ( getdvarint( "dvar_3086AA2871E781C1" ) )
        setdvar( "dvar_46467383874E22FD", "" );

    waittillframeend;

    if ( _func_69D0ACF74B96CAB4() )
        wait 0.1;

    _id_8751813F2DAE82EE = [];

    if ( !scripts\engine\sp\utility::is_default_start() && level.start_point != "no_game" )
    {
        time = gettime();

        for ( _id_AC0E594AC96AA3A8 = 0; _id_AC0E594AC96AA3A8 < level.start_functions.size; _id_AC0E594AC96AA3A8++ )
        {
            _id_D1C6381E96D14169 = level.start_functions[_id_AC0E594AC96AA3A8];

            if ( _id_D1C6381E96D14169["name"] == level.start_point )
                break;

            if ( !isdefined( _id_D1C6381E96D14169["catchup_function"] ) )
                continue;

            [[ _id_D1C6381E96D14169["catchup_function"] ]]();
        }
    }

    for ( _id_AC0E594AC96AA3A8 = _id_2F05FDC372F83530; _id_AC0E594AC96AA3A8 < level.start_functions.size; _id_AC0E594AC96AA3A8++ )
    {
        _id_D1C6381E96D14169 = level.start_functions[_id_AC0E594AC96AA3A8];

        if ( !isdefined( _id_D1C6381E96D14169["logic_func"] ) )
            continue;

        if ( already_ran_function( _id_D1C6381E96D14169["logic_func"], _id_8751813F2DAE82EE ) )
            continue;

        if ( getdvarint( "dvar_6CDDEF6C142D4CF5" ) )
            feedback_check_start( _id_D1C6381E96D14169, _id_AC0E594AC96AA3A8 );

        if ( getdvarint( "dvar_3086AA2871E781C1" ) || getdvarint( "dvar_660BA9CAADAA5659" ) )
            setdvar( "dvar_46467383874E22FD", _id_D1C6381E96D14169["name"] );

        scripts\sp\analytics::start_point_setup();
        level notify( "start_logic", _id_D1C6381E96D14169["name"] );
        level.start_struct [[ _id_D1C6381E96D14169["logic_func"] ]]();
        scripts\sp\analytics::start_point_check( _id_D1C6381E96D14169["name"] );
        _id_8751813F2DAE82EE[_id_8751813F2DAE82EE.size] = _id_D1C6381E96D14169["logic_func"];

        if ( getdvarint( "dvar_6CDDEF6C142D4CF5" ) )
            feedback_increase_index();
    }
}

already_ran_function( func, _id_8751813F2DAE82EE )
{
    foreach ( _id_FB707540FFB0FBDA in _id_8751813F2DAE82EE )
    {
        if ( _id_FB707540FFB0FBDA == func )
            return 1;
    }

    return 0;
}

get_string_for_starts( _id_09A8C945FE45C8E5 )
{
    string = " ** No starts have been set up for this map with scriptsenginesputility::add_start().";

    if ( _id_09A8C945FE45C8E5.size )
    {
        string = " ** ";

        for ( _id_AC0E594AC96AA3A8 = _id_09A8C945FE45C8E5.size - 1; _id_AC0E594AC96AA3A8 >= 0; _id_AC0E594AC96AA3A8-- )
            string = string + _id_09A8C945FE45C8E5[_id_AC0E594AC96AA3A8] + " ";
    }

    setdvar( "dvar_8CB00B8C1F5FF522", string );
    return string;
}

create_start( start, index )
{
    alpha = 1;
    color = ( 0.9, 0.9, 0.9 );

    if ( index != -1 )
    {
        _id_63E26D5A86AC531C = 5;

        if ( index != _id_63E26D5A86AC531C )
            alpha = 1 - abs( _id_63E26D5A86AC531C - index ) / _id_63E26D5A86AC531C;
        else
            color = ( 1, 1, 0 );
    }

    if ( alpha == 0 )
        alpha = 0.05;

    _id_94480E1669B7FF0D = newhudelem();
    _id_94480E1669B7FF0D.alignx = "left";
    _id_94480E1669B7FF0D.aligny = "middle";
    _id_94480E1669B7FF0D.x = 80;
    _id_94480E1669B7FF0D.y = 80 + index * 18;
    _id_94480E1669B7FF0D settext( start );
    _id_94480E1669B7FF0D.alpha = 0;
    _id_94480E1669B7FF0D.foreground = 1;
    _id_94480E1669B7FF0D.color = color;
    _id_94480E1669B7FF0D.fontscale = 1.75;
    _id_94480E1669B7FF0D fadeovertime( 0.5 );
    _id_94480E1669B7FF0D.alpha = alpha;
    return _id_94480E1669B7FF0D;
}

indicate_start( start )
{
    if ( istrue( level._id_4C9C84F746D64381 ) )
        return;

    _id_94480E1669B7FF0D = newhudelem();
    _id_94480E1669B7FF0D.alignx = "left";
    _id_94480E1669B7FF0D.aligny = "middle";
    _id_94480E1669B7FF0D.x = 10;
    _id_94480E1669B7FF0D.y = 400;
    _id_94480E1669B7FF0D settext( start );
    _id_94480E1669B7FF0D.alpha = 0;
    _id_94480E1669B7FF0D.fontscale = 3;
    wait 1;
    _id_94480E1669B7FF0D fadeovertime( 1 );
    _id_94480E1669B7FF0D.alpha = 1;
    wait 5;
    _id_94480E1669B7FF0D fadeovertime( 1 );
    _id_94480E1669B7FF0D.alpha = 0;
    wait 1;
    _id_94480E1669B7FF0D destroy();
}

force_start_catchup()
{
    level.forced_start_catchup = 1;
}

is_first_start()
{
    if ( !level_has_start_points() )
        return 1;

    return level.start_point == level.start_functions[0]["name"];
}

is_after_start( name )
{
    _id_81878D29F5A714F3 = 0;
    name = tolower( name );

    if ( level.start_point == name )
        return 0;

    for ( _id_AC0E594AC96AA3A8 = 0; _id_AC0E594AC96AA3A8 < level.start_functions.size; _id_AC0E594AC96AA3A8++ )
    {
        if ( level.start_functions[_id_AC0E594AC96AA3A8]["name"] == name )
        {
            _id_81878D29F5A714F3 = 1;
            continue;
        }

        if ( level.start_functions[_id_AC0E594AC96AA3A8]["name"] == level.start_point )
            return _id_81878D29F5A714F3;
    }
}

create_feedback_starts( _id_4D568423B665310F )
{
    if ( !getdvarint( "dvar_6CDDEF6C142D4CF5" ) )
        return;

    scripts\engine\utility::flag_init( "feedback_waiting_on_endFunc" );
    setdvarifuninitialized( "dvar_E4BE6DA1F4450CA2", 0 );
    setdvarifuninitialized( "dvar_B9725E2C8D3C3DF7", 0 );

    if ( !getdvarint( "dvar_B9725E2C8D3C3DF7" ) )
        setdvar( "dvar_E4BE6DA1F4450CA2", 0 );

    setdvar( "dvar_B9725E2C8D3C3DF7", 0 );
    _id_BE775DD8CBB29AF4 = [];

    foreach ( _id_AC0E594AC96AA3A8, s in _id_4D568423B665310F )
        _id_BE775DD8CBB29AF4[_id_AC0E594AC96AA3A8] = tolower( s );

    thread check_feedback_starts_existance( _id_BE775DD8CBB29AF4 );
    level.feedback_starts = _id_BE775DD8CBB29AF4;
    level.feedback_start_point = _id_BE775DD8CBB29AF4[getdvarint( "dvar_E4BE6DA1F4450CA2" )];
}

create_feedback_context( _id_757398075BC0C10F, context )
{
    if ( !getdvarint( "dvar_6CDDEF6C142D4CF5" ) )
        return;

    _id_757398075BC0C10F = tolower( _id_757398075BC0C10F );

    if ( !isdefined( level.feedback_context ) )
        level.feedback_context = [];

    level.feedback_context[_id_757398075BC0C10F] = "^3" + context;
}

create_feedback_endfunc( _id_757398075BC0C10F, end_func, param )
{
    if ( !getdvarint( "dvar_6CDDEF6C142D4CF5" ) )
        return;

    _id_757398075BC0C10F = tolower( _id_757398075BC0C10F );
    scripts\engine\utility::flag_init( _id_757398075BC0C10F + "_endFunc" );
    thread create_feedback_endfunc_thread( _id_757398075BC0C10F, end_func, param );
}

display_feedback_context( _id_757398075BC0C10F )
{
    if ( !isdefined( level.feedback_context ) )
        return;

    if ( !isdefined( level.feedback_context[_id_757398075BC0C10F] ) )
        return;

    waitframe();
}

create_feedback_endfunc_thread( _id_757398075BC0C10F, end_func, param )
{
    level waittill( "load_finished" );

    if ( isdefined( param ) )
        [[ end_func ]]( param );
    else
        [[ end_func ]]();

    scripts\engine\utility::flag_set( _id_757398075BC0C10F + "_endFunc" );
}

feedback_check_start( _id_D1C6381E96D14169, _id_2F05FDC372F83530 )
{
    if ( !isdefined( level.feedback_starts ) )
        return;

    _id_757398075BC0C10F = _id_D1C6381E96D14169["name"];
    index = getdvarint( "dvar_E4BE6DA1F4450CA2" );
    thread feedback_check_endfunc( _id_757398075BC0C10F, index );
    feedback_check_end( _id_757398075BC0C10F, index );
    display_feedback_context( _id_757398075BC0C10F );
}

feedback_check_endfunc( _id_757398075BC0C10F, index )
{
    if ( !isdefined( level.feedback_starts[index] ) )
        return;

    if ( !scripts\engine\utility::flag_exist( level.feedback_starts[index] + "_endFunc" ) )
        return;

    scripts\engine\utility::flag_set( "feedback_waiting_on_endFunc" );
    scripts\engine\utility::flag_wait( level.feedback_starts[index] + "_endFunc" );
    scripts\engine\utility::flag_clear( "feedback_waiting_on_endFunc" );
    feedback_check_end( _id_757398075BC0C10F, index + 1 );
}

feedback_check_end( _id_757398075BC0C10F, index )
{
    if ( scripts\engine\utility::flag( "feedback_waiting_on_endFunc" ) )
        return;

    if ( !isdefined( level.feedback_starts[index] ) )
    {
        _func_DD2FFD2B8725F9F9( "", 0 );
        level waittill( "forever" );
    }

    if ( level.feedback_starts[index] != _id_757398075BC0C10F )
    {
        setdvar( "dvar_8CB00B8C1F5FF522", level.feedback_starts[index] );
        blackoverlay = scripts\sp\hud_util::create_client_overlay( "black", 0 );
        blackoverlay fadeovertime( 0.5 );
        blackoverlay.alpha = 1;
        wait 0.65;
        setdvar( "dvar_B9725E2C8D3C3DF7", 1 );
        map_restart();
        level waittill( "forever" );
    }
}

feedback_increase_index()
{
    index = getdvarint( "dvar_E4BE6DA1F4450CA2" );
    index++;
    setdvar( "dvar_E4BE6DA1F4450CA2", index );
}

check_feedback_starts_existance( _id_0E534176E56C4EA7 )
{
    level waittill( "load_finished" );
    _id_1050CAC21606C5C5 = [];

    foreach ( startstruct in level.start_arrays )
        _id_1050CAC21606C5C5[_id_1050CAC21606C5C5.size] = startstruct["name"];

    foreach ( start in _id_0E534176E56C4EA7 )
    {

    }
}

add_start_construct( msg, func, _id_8A65799B42BD1960, _id_E4223248FA0A44F9, _id_7A3C1094F38EC7D2 )
{
    array = [];
    array["name"] = msg;
    array["start_func"] = func;
    array["logic_func"] = _id_8A65799B42BD1960;
    array["transient"] = _id_E4223248FA0A44F9;
    array["catchup_function"] = _id_7A3C1094F38EC7D2;
    return array;
}

add_start_assert()
{
    if ( !isdefined( level.start_functions ) )
        level.start_functions = [];
}

level_has_start_points()
{
    return level.start_functions.size > 1;
}

is_no_game_start()
{
    if ( isdefined( level.start_point ) )
        return issubstr( level.start_point, "no_game" );
    else
        return getdvar( "dvar_8CB00B8C1F5FF522" ) == "no_game";
}
