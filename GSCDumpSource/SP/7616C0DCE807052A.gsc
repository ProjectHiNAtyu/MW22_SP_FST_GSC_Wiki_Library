// IW9 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

precache( offhand )
{
    scripts\sp\equipment\offhands::registeroffhandfirefunc( offhand, ::_id_339DA040930B7667 );
    thread _id_5EEE8E4AE8FC69A3();
}

_id_339DA040930B7667( grenade, weapon )
{
    if ( isdefined( grenade ) )
        grenade delete();
}

_id_5EEE8E4AE8FC69A3()
{
    level.player endon( "death" );

    if ( !isdefined( level.map_extents ) )
        _id_CFFFFC8E6C8D7875();

    for (;;)
    {
        _id_55CC5AC5E416E1E5();
        wait 0.05;
    }
}

_id_55CC5AC5E416E1E5()
{
    _id_66D02DCE4615A1F0 = ( 0, 0, getnorthyaw() );
    playerorigin = rotatevector( level.player.origin, _id_66D02DCE4615A1F0 );
    xoffset = playerorigin[1] - level.map_extents["left"];
    yoffset = abs( playerorigin[0] - level.map_extents["top"] );
    setomnvar( "ui_map_player_x", xoffset );
    setomnvar( "ui_map_player_y", yoffset );
    forward = anglestoforward( level.player.angles );
    _id_B5642800228E11C9 = rotatevector( forward, _id_66D02DCE4615A1F0 );
    _id_CB89120314447D62 = vectortoyaw( _id_B5642800228E11C9 );
    setomnvar( "ui_map_player_rot", _id_CB89120314447D62 );
}

_id_CFFFFC8E6C8D7875()
{
    _id_D0C656DDDD860089 = getdvarfloat( "dvar_24D7DC1CC026A63B", 1.33333 );
    _id_7BA521E5CC4CB125 = getentarray( "minimap_corner", "targetname" );

    if ( _id_7BA521E5CC4CB125.size != 2 )
        return;

    _id_7BA4DEE5CC4C1DCC = ( _id_7BA521E5CC4CB125[0].origin[0], _id_7BA521E5CC4CB125[0].origin[1], 0 );
    _id_7BA4DFE5CC4C1FFF = ( _id_7BA521E5CC4CB125[1].origin[0], _id_7BA521E5CC4CB125[1].origin[1], 0 );
    _id_8EE89AF74376AB13 = _id_7BA4DFE5CC4C1FFF - _id_7BA4DEE5CC4C1DCC;
    _id_66D02DCE4615A1F0 = ( cos( getnorthyaw() ), sin( getnorthyaw() ), 0 );
    _id_DE4ABD1411075732 = ( 0 - _id_66D02DCE4615A1F0[1], _id_66D02DCE4615A1F0[0], 0 );

    if ( vectordot( _id_8EE89AF74376AB13, _id_DE4ABD1411075732 ) > 0 )
    {
        if ( vectordot( _id_8EE89AF74376AB13, _id_66D02DCE4615A1F0 ) > 0 )
        {
            _id_6C2FE87A3F4D8BC7 = _id_7BA4DFE5CC4C1FFF;
            _id_1996B8BC8D47D84F = _id_7BA4DEE5CC4C1DCC;
        }
        else
        {
            _id_A66BA9B157533F5A = vecscale( _id_66D02DCE4615A1F0, vectordot( _id_8EE89AF74376AB13, _id_66D02DCE4615A1F0 ) );
            _id_6C2FE87A3F4D8BC7 = _id_7BA4DFE5CC4C1FFF - _id_A66BA9B157533F5A;
            _id_1996B8BC8D47D84F = _id_7BA4DEE5CC4C1DCC + _id_A66BA9B157533F5A;
        }
    }
    else if ( vectordot( _id_8EE89AF74376AB13, _id_66D02DCE4615A1F0 ) > 0 )
    {
        _id_A66BA9B157533F5A = vecscale( _id_66D02DCE4615A1F0, vectordot( _id_8EE89AF74376AB13, _id_66D02DCE4615A1F0 ) );
        _id_6C2FE87A3F4D8BC7 = _id_7BA4DEE5CC4C1DCC + _id_A66BA9B157533F5A;
        _id_1996B8BC8D47D84F = _id_7BA4DFE5CC4C1FFF - _id_A66BA9B157533F5A;
    }
    else
    {
        _id_6C2FE87A3F4D8BC7 = _id_7BA4DEE5CC4C1DCC;
        _id_1996B8BC8D47D84F = _id_7BA4DFE5CC4C1FFF;
    }

    if ( _id_D0C656DDDD860089 > 0 )
    {
        _id_9F72E62E262287DF = vectordot( _id_6C2FE87A3F4D8BC7 - _id_1996B8BC8D47D84F, _id_66D02DCE4615A1F0 );
        _id_755D4C721ECB6165 = vectordot( _id_6C2FE87A3F4D8BC7 - _id_1996B8BC8D47D84F, _id_DE4ABD1411075732 );
        _id_9EFBEAF97C663AB0 = _id_755D4C721ECB6165 / _id_9F72E62E262287DF;

        if ( _id_9EFBEAF97C663AB0 < _id_D0C656DDDD860089 )
        {
            _id_AD1167B62B969063 = _id_D0C656DDDD860089 / _id_9EFBEAF97C663AB0;
            _id_5A976CA4F755DC8A = vecscale( _id_DE4ABD1411075732, _id_755D4C721ECB6165 * ( _id_AD1167B62B969063 - 1 ) * 0.5 );
        }
        else
        {
            _id_AD1167B62B969063 = _id_9EFBEAF97C663AB0 / _id_D0C656DDDD860089;
            _id_5A976CA4F755DC8A = vecscale( _id_66D02DCE4615A1F0, _id_9F72E62E262287DF * ( _id_AD1167B62B969063 - 1 ) * 0.5 );
        }

        _id_6C2FE87A3F4D8BC7 = _id_6C2FE87A3F4D8BC7 + _id_5A976CA4F755DC8A;
        _id_1996B8BC8D47D84F = _id_1996B8BC8D47D84F - _id_5A976CA4F755DC8A;
    }

    level.map_extents = [];
    level.map_extents["top"] = _id_6C2FE87A3F4D8BC7[1];
    level.map_extents["left"] = _id_6C2FE87A3F4D8BC7[0];
    level.map_extents["bottom"] = _id_1996B8BC8D47D84F[1];
    level.map_extents["right"] = _id_1996B8BC8D47D84F[0];
    level.map_width = level.map_extents["right"] - level.map_extents["left"];
    level.map_height = level.map_extents["top"] - level.map_extents["bottom"];
    setomnvar( "ui_map_width", level.map_width );
    setomnvar( "ui_map_height", level.map_height );
    level.mapsize = vectordot( _id_6C2FE87A3F4D8BC7 - _id_1996B8BC8D47D84F, _id_66D02DCE4615A1F0 );
}

vecscale( _id_06A3A1033FFC2699, _id_B79930868F410231 )
{
    return ( _id_06A3A1033FFC2699[0] * _id_B79930868F410231, _id_06A3A1033FFC2699[1] * _id_B79930868F410231, _id_06A3A1033FFC2699[2] * _id_B79930868F410231 );
}
