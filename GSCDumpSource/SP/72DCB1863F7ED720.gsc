// IW9 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

init_introscreen()
{
    scripts\engine\utility::flag_init( "introscreen_complete" );
}

main()
{
    precacheshader( "black" );
    setomnvar( "ui_chyron_on", 0 );
    thread main_thread();
}

main_thread()
{
    scripts\engine\utility::flag_wait( "start_is_set" );
    _id_8FD2F9E5C4358DEF = 0;
    thread quick_fadeup();

    if ( !scripts\engine\sp\utility::is_default_start() || _id_8FD2F9E5C4358DEF )
        scripts\engine\utility::delaythread( 0.05, scripts\engine\utility::flag_set, "introscreen_complete" );
    else
    {
        if ( isdefined( level.introscreen ) && isdefined( level.introscreen.customfunc ) )
        {
            [[ level.introscreen.customfunc ]]();
            return;
        }

        scripts\engine\utility::delaythread( 1, ::introscreen );
    }
}

level_has_chyron()
{
    _id_9965D5FC5A99FA04 = tablelookup( "sp/levels.csv", 1, level.script, 14 );
    return _id_9965D5FC5A99FA04 != "";
}

quick_fadeup()
{
    level._id_1EB2A64EAD0AD6F5 = scripts\sp\hud_util::create_client_overlay( "black", 1 );
    wait 0.2;
    level._id_1EB2A64EAD0AD6F5.alpha = 0;
    level._id_1EB2A64EAD0AD6F5 destroy();
}

introscreen( _id_DE42E9CD2606A1D4, _id_B27CAD3410976F5E )
{
    if ( scripts\engine\utility::flag_exist( "introscreen_start_wait" ) )
        scripts\engine\utility::flag_wait( "introscreen_start_wait" );

    index = scripts\sp\endmission::getlevelindex( level.script );

    if ( !isdefined( index ) )
        return;

    index = index + 1;
    setomnvar( "ui_chyron_level_index", index );
    setomnvar( "ui_chyron_on", 1 );
    setomnvar( "ui_hide_dpad_hud", 1 );
    wait 6;
    setomnvar( "ui_hide_dpad_hud", 0 );
    setomnvar( "ui_chyron_on", 0 );
    scripts\engine\utility::flag_set( "introscreen_complete" );
}
