// IW9 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

precache( offhand )
{
    scripts\sp\equipment\offhands::registeroffhandfirefunc( offhand, ::_id_0172B68E9EA28C13 );
}

_id_0172B68E9EA28C13( grenade, weapon )
{
    _id_0328D4DC9F970B40 = self;
    grenade waittill( "missile_stuck", _id_DDD80F5D1DA23C60, _id_F3E5EC9ECAAF8E1B );
    earthquake( 0.25, 0.35, _id_F3E5EC9ECAAF8E1B, 1000 );
    playrumbleonposition( "grenade_rumble", _id_F3E5EC9ECAAF8E1B );
    _id_A830AA21C1B60A3C = distancesquared( level.player.origin, _id_F3E5EC9ECAAF8E1B );

    if ( _id_A830AA21C1B60A3C <= 22500 )
        thread scripts\sp\equipment\offhands::_id_14DD7FE1D23F9DC3( "iw9_ges_gas_cough_long", _id_F3E5EC9ECAAF8E1B, "smoke_bomb", 150 );

    enemies = getaiarray( "axis" );

    foreach ( enemy in enemies )
    {
        distancesquared = distancesquared( enemy.origin, _id_F3E5EC9ECAAF8E1B );
        _id_0690B87CF6507D86 = isdefined( enemy.stealth );
        _id_046ABBA9D70107BE = isdefined( enemy.fnisinstealthcombat ) && enemy [[ enemy.fnisinstealthcombat ]]();

        if ( _id_0690B87CF6507D86 && !_id_046ABBA9D70107BE && distancesquared <= 1000000 )
            enemy aieventlistenerevent( "explosion", level.player, _id_F3E5EC9ECAAF8E1B );

        if ( distancesquared <= 57600 )
        {
            enemy thread _id_281E000BB98136ED( 9 );
            enemy notify( "flashbang", ( 0, 0, 0 ), 1, 1, _id_0328D4DC9F970B40, "allies", 9 );
            enemy _id_4ADE3AE5C138C8B3::saygenericdialogue( "cough_fit" );
        }
    }
}

_id_281E000BB98136ED( duration )
{
    self endon( "death" );
    self notify( "smoked_bombed" );
    self endon( "smoked_bombed" );
    self._id_8BE07FC13BA66777 = 1;
    wait( duration );
    self._id_8BE07FC13BA66777 = undefined;
}
