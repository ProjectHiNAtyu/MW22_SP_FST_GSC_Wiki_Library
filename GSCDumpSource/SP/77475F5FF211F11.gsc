// IW9 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

#using_animtree("generic_human");

precache( offhand )
{
    level.g_effect["acid_grenade_explode"] = loadfx( "vfx/iw9/core/equipment/vfx_equip_acid_grenade.vfx" );
    level.scr_anim["generic"]["acid_grenade_death"] = %exposed_death_neckgrab;
    scripts\sp\equipment\offhands::registeroffhandfirefunc( offhand, ::_id_684230CA19989897 );
}

_id_684230CA19989897( grenade, weapon )
{
    grenade waittill( "missile_stuck", stuckto, _id_DDD80F5D1DA23C60, position, _id_3E293ABD063AA9F5 );
    grenade delete();
    thread scripts\engine\utility::play_sound_in_space( "weap_bottle_explo", position );
    thread scripts\engine\utility::play_sound_in_space( "gas_grenade_body", position );
    playfx( level.g_effect["acid_grenade_explode"], position );
    playrumbleonposition( "grenade_rumble", position );
    earthquake( 0.15, 0.35, position, 300 );
    enemies = getaiarrayinradius( position, 150, "axis" );

    foreach ( enemy in enemies )
    {
        enemy.animname = "generic";
        enemy scripts\common\ai::set_deathanim( "acid_grenade_death" );
        enemy playsound( "dx_vom_aq2_3rd_floor_bedroom_92" );
        enemy scripts\sp\utility::do_damage( enemy.health + 9999, position, self, self );
    }
}
