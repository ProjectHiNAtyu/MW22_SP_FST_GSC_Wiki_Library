// IW9 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

init_cursor_hint()
{
    setdvarifuninitialized( "dvar_7925A1F90294E6E8", 0 );
    precacheshader( "cursor_hint_circle" );
    precacheshader( "cursor_hint_x" );
    precacheshader( "cursor_hint_square" );
    precacheshader( "alien_dpad_none" );
    precacheshader( "hud_arrow_up" );
    precacheshader( "hud_interaction_prompt_center_ammo" );
    precacheshader( "hud_scrap_medium_icon_test" );
    precacheshader( "hud_interaction_prompt_center_heavy" );
    precacheshader( "hud_interaction_prompt_center_steel_dragon" );
    level.cursor_hints = [];
    level.cursor_hints_max = 1;
}

create_cursor_hint( _id_4CADAFE0DB5700B3, _id_1E2F2224127D2990, hintstring, _id_DF024A1642F13910, _id_1D15541035909A45, _id_2312D6385AE695A8, _id_0BCA9B971F3BB97C, _id_A437BC9A2005DF60, _id_9E9B6D24B7A157F0, _id_64E9E1F9BECAB35F, _id_F61019386E1B1034, usecommand, _id_E077514A6FF04ACF, _id_40D4D7A8AD6420E3, _id_7CFF52334740FD08 )
{
    _id_52145FC3D0FAB939 = self;

    if ( isstruct( _id_52145FC3D0FAB939 ) || scripts\engine\utility::is_equal( _id_52145FC3D0FAB939.code_classname, "script_origin" ) || isdefined( _id_1E2F2224127D2990 ) )
    {
        _id_52145FC3D0FAB939 = spawn( "script_origin", self.origin );
        self.cursor_hint_ent = _id_52145FC3D0FAB939;
    }

    _id_52145FC3D0FAB939 makeusable();

    if ( isdefined( _id_1E2F2224127D2990 ) )
    {
        tag = "tag_origin";

        if ( isdefined( _id_4CADAFE0DB5700B3 ) )
        {
            tag = _id_4CADAFE0DB5700B3;
            _id_52145FC3D0FAB939.origin = self gettagorigin( tag );
        }

        if ( isdefined( self.model ) && self.classname == "script_model" && self tagexists( tag ) )
            _id_52145FC3D0FAB939 linkto( self, tag, _id_1E2F2224127D2990, ( 0, 0, 0 ) );
        else if ( isdefined( _id_4CADAFE0DB5700B3 ) )
            _id_52145FC3D0FAB939 linkto( self, tag, _id_1E2F2224127D2990, ( 0, 0, 0 ) );
        else if ( isdefined( self.angles ) )
        {
            _id_52145FC3D0FAB939.origin = _id_52145FC3D0FAB939.origin + rotatevector( _id_1E2F2224127D2990, self.angles );

            if ( isent( self ) )
                _id_52145FC3D0FAB939 linkto( self );
        }
        else
        {
            _id_52145FC3D0FAB939.origin = _id_52145FC3D0FAB939.origin + _id_1E2F2224127D2990;

            if ( isent( self ) )
                _id_52145FC3D0FAB939 linkto( self );
        }
    }
    else if ( isdefined( _id_4CADAFE0DB5700B3 ) )
        _id_52145FC3D0FAB939 sethinttag( _id_4CADAFE0DB5700B3 );

    if ( isdefined( _id_9E9B6D24B7A157F0 ) && _id_9E9B6D24B7A157F0 )
        _id_52145FC3D0FAB939 setcursorhint( "HINT_NOICON" );
    else
        _id_52145FC3D0FAB939 setcursorhint( "HINT_BUTTON" );

    if ( isdefined( hintstring ) && !scripts\engine\sp\utility::in_realism_mode() )
        _id_52145FC3D0FAB939 sethintstring( hintstring );

    _id_CF1DDA7C717E1BE0 = 360;

    if ( isdefined( _id_DF024A1642F13910 ) )
        _id_CF1DDA7C717E1BE0 = _id_DF024A1642F13910;

    _id_52145FC3D0FAB939 sethintdisplayfov( _id_CF1DDA7C717E1BE0 );
    usefov = 65;

    if ( isdefined( _id_40D4D7A8AD6420E3 ) )
        usefov = _id_40D4D7A8AD6420E3;

    _id_52145FC3D0FAB939 setusefov( usefov );
    _id_1DAF42081ED5D776 = 500;

    if ( isdefined( _id_1D15541035909A45 ) )
        _id_1DAF42081ED5D776 = _id_1D15541035909A45;

    _id_52145FC3D0FAB939 sethintdisplayrange( _id_1DAF42081ED5D776 );
    userange = 80;

    if ( isdefined( _id_2312D6385AE695A8 ) )
        userange = _id_2312D6385AE695A8;

    _id_52145FC3D0FAB939 setuserange( userange );

    if ( isdefined( _id_0BCA9B971F3BB97C ) && _id_0BCA9B971F3BB97C )
        _id_52145FC3D0FAB939 sethintonobstruction( "show" );
    else
        _id_52145FC3D0FAB939 sethintonobstruction( "hide" );

    if ( isdefined( _id_A437BC9A2005DF60 ) && _id_A437BC9A2005DF60 )
        _id_52145FC3D0FAB939 sethintrequiresmashing( _id_A437BC9A2005DF60 );

    if ( !isdefined( _id_F61019386E1B1034 ) )
        _id_F61019386E1B1034 = "duration_short";

    _id_52145FC3D0FAB939 setuseholdduration( _id_F61019386E1B1034 );

    if ( _id_F61019386E1B1034 != "duration_none" && _id_F61019386E1B1034 != "duration_short" )
        _id_52145FC3D0FAB939 sethintrequiresholding( 1 );

    if ( !istrue( self._id_2962AF1B05702467 ) )
        thread hint_delete_on_trigger();

    if ( isdefined( _id_64E9E1F9BECAB35F ) )
        _id_52145FC3D0FAB939 sethinticon( _id_64E9E1F9BECAB35F );

    if ( isdefined( usecommand ) )
        _id_52145FC3D0FAB939 setusecommand( usecommand );

    if ( isdefined( _id_E077514A6FF04ACF ) )
        _id_52145FC3D0FAB939 sethintlockplayermovement( 1 );
    else
        _id_52145FC3D0FAB939 sethintlockplayermovement( 0 );

    if ( isdefined( _id_7CFF52334740FD08 ) )
        thread internal_hint_toggle_use_by_angles( _id_52145FC3D0FAB939, _id_7CFF52334740FD08, userange );
}

create_cursor_hint_forced( _id_4CADAFE0DB5700B3, _id_1E2F2224127D2990, hintstring, _id_DF024A1642F13910, _id_1D15541035909A45, _id_2312D6385AE695A8, _id_0BCA9B971F3BB97C, _id_A437BC9A2005DF60, _id_9E9B6D24B7A157F0, _id_64E9E1F9BECAB35F, _id_F61019386E1B1034, usecommand, _id_E077514A6FF04ACF, _id_40D4D7A8AD6420E3, _id_7CFF52334740FD08 )
{
    _id_52145FC3D0FAB939 = self;

    if ( isstruct( _id_52145FC3D0FAB939 ) || _id_52145FC3D0FAB939.code_classname == "script_origin" || isdefined( _id_1E2F2224127D2990 ) )
    {
        _id_52145FC3D0FAB939 = spawn( "script_origin", self.origin );
        self.cursor_hint_ent = _id_52145FC3D0FAB939;
    }

    _id_52145FC3D0FAB939 makeusable();

    if ( isdefined( _id_1E2F2224127D2990 ) )
    {
        tag = "tag_origin";

        if ( isdefined( _id_4CADAFE0DB5700B3 ) )
        {
            tag = _id_4CADAFE0DB5700B3;
            _id_52145FC3D0FAB939.origin = self gettagorigin( tag );
        }

        if ( isdefined( self.model ) && self.classname == "script_model" && scripts\engine\utility::hastag( self.model, tag ) )
            _id_52145FC3D0FAB939 linkto( self, tag, _id_1E2F2224127D2990, ( 0, 0, 0 ) );
        else if ( isdefined( _id_4CADAFE0DB5700B3 ) )
            _id_52145FC3D0FAB939 linkto( self, tag, _id_1E2F2224127D2990, ( 0, 0, 0 ) );
        else if ( isdefined( self.angles ) )
        {
            _id_52145FC3D0FAB939.origin = _id_52145FC3D0FAB939.origin + rotatevector( _id_1E2F2224127D2990, self.angles );

            if ( isent( self ) )
                _id_52145FC3D0FAB939 linkto( self );
        }
        else
        {
            _id_52145FC3D0FAB939.origin = _id_52145FC3D0FAB939.origin + _id_1E2F2224127D2990;

            if ( isent( self ) )
                _id_52145FC3D0FAB939 linkto( self );
        }
    }
    else if ( isdefined( _id_4CADAFE0DB5700B3 ) )
        _id_52145FC3D0FAB939 sethinttag( _id_4CADAFE0DB5700B3 );

    if ( isdefined( _id_9E9B6D24B7A157F0 ) && _id_9E9B6D24B7A157F0 )
        _id_52145FC3D0FAB939 setcursorhint( "HINT_NOICON" );
    else
        _id_52145FC3D0FAB939 setcursorhint( "HINT_BUTTON" );

    if ( isdefined( hintstring ) )
        _id_52145FC3D0FAB939 sethintstring( hintstring );

    _id_CF1DDA7C717E1BE0 = 360;

    if ( isdefined( _id_DF024A1642F13910 ) )
        _id_CF1DDA7C717E1BE0 = _id_DF024A1642F13910;

    _id_52145FC3D0FAB939 sethintdisplayfov( _id_CF1DDA7C717E1BE0 );
    usefov = 65;

    if ( isdefined( _id_40D4D7A8AD6420E3 ) )
        usefov = _id_40D4D7A8AD6420E3;

    _id_52145FC3D0FAB939 setusefov( usefov );
    _id_1DAF42081ED5D776 = 500;

    if ( isdefined( _id_1D15541035909A45 ) )
        _id_1DAF42081ED5D776 = _id_1D15541035909A45;

    _id_52145FC3D0FAB939 sethintdisplayrange( _id_1DAF42081ED5D776 );
    userange = 80;

    if ( isdefined( _id_2312D6385AE695A8 ) )
        userange = _id_2312D6385AE695A8;

    _id_52145FC3D0FAB939 setuserange( userange );

    if ( isdefined( _id_0BCA9B971F3BB97C ) && _id_0BCA9B971F3BB97C )
        _id_52145FC3D0FAB939 sethintonobstruction( "show" );
    else
        _id_52145FC3D0FAB939 sethintonobstruction( "hide" );

    if ( isdefined( _id_A437BC9A2005DF60 ) && _id_A437BC9A2005DF60 )
        _id_52145FC3D0FAB939 sethintrequiresmashing( _id_A437BC9A2005DF60 );

    if ( !isdefined( _id_F61019386E1B1034 ) )
        _id_F61019386E1B1034 = "duration_short";

    _id_52145FC3D0FAB939 setuseholdduration( _id_F61019386E1B1034 );

    if ( _id_F61019386E1B1034 != "duration_none" && _id_F61019386E1B1034 != "duration_short" )
        _id_52145FC3D0FAB939 sethintrequiresholding( 1 );

    thread hint_delete_on_trigger();

    if ( isdefined( _id_64E9E1F9BECAB35F ) )
        _id_52145FC3D0FAB939 sethinticon( _id_64E9E1F9BECAB35F );

    if ( isdefined( usecommand ) )
        _id_52145FC3D0FAB939 setusecommand( usecommand );

    if ( isdefined( _id_E077514A6FF04ACF ) )
        _id_52145FC3D0FAB939 sethintlockplayermovement( 1 );
    else
        _id_52145FC3D0FAB939 sethintlockplayermovement( 0 );

    if ( isdefined( _id_7CFF52334740FD08 ) )
        thread internal_hint_toggle_use_by_angles( _id_52145FC3D0FAB939, _id_7CFF52334740FD08, userange );
}

_id_FA06DE21F8AAEE3B( anime, scriptednode, _id_4CADAFE0DB5700B3, _id_1E2F2224127D2990, hintstring, _id_DF024A1642F13910, _id_1D15541035909A45, _id_4E6EF8FE3C3A2FBB, _id_0BCA9B971F3BB97C, _id_A437BC9A2005DF60, _id_9E9B6D24B7A157F0, _id_64E9E1F9BECAB35F, _id_F61019386E1B1034, usecommand, _id_E077514A6FF04ACF, _id_40D4D7A8AD6420E3, _id_94370A44392F701B )
{
    if ( !isdefined( _id_4E6EF8FE3C3A2FBB ) )
        _id_4E6EF8FE3C3A2FBB = 0;

    if ( !isdefined( _id_94370A44392F701B ) )
        _id_94370A44392F701B = 0;

    if ( !isdefined( _id_40D4D7A8AD6420E3 ) )
        _id_40D4D7A8AD6420E3 = 45;

    rig = scripts\engine\sp\utility::spawn_anim_model( "player_rig", self.origin, self.angles );
    rig hide();
    _id_22B4906AFB0ED359 = scriptednode scripts\engine\utility::_id_6D41AC1C3D718A62( anime, rig );
    _id_B48D82BC0E38E9DA = 0;
    _id_D8D48F0C349AA682 = [];
    _id_D85CC836998C34DD = [];

    foreach ( _id_AC0E594AC96AA3A8, _id_81AA7E8BC8F8C030 in _id_22B4906AFB0ED359 )
    {
        _id_D85CC836998C34DD[_id_D85CC836998C34DD.size] = distance2d( self.origin, _id_81AA7E8BC8F8C030 );

        if ( _id_AC0E594AC96AA3A8 + 1 == _id_22B4906AFB0ED359.size )
        {
            _id_68EF20834737ECA0 = distance2d( _id_81AA7E8BC8F8C030, _id_22B4906AFB0ED359[0] );

            if ( _id_68EF20834737ECA0 > _id_B48D82BC0E38E9DA )
            {
                _id_B48D82BC0E38E9DA = _id_68EF20834737ECA0;
                _id_D8D48F0C349AA682[1] = _id_22B4906AFB0ED359[_id_AC0E594AC96AA3A8];
                _id_D8D48F0C349AA682[0] = _id_22B4906AFB0ED359[0];
            }

            continue;
        }

        _id_68EF20834737ECA0 = distance2d( _id_81AA7E8BC8F8C030, _id_22B4906AFB0ED359[_id_AC0E594AC96AA3A8 + 1] );

        if ( _id_68EF20834737ECA0 > _id_B48D82BC0E38E9DA )
        {
            _id_B48D82BC0E38E9DA = _id_68EF20834737ECA0;
            _id_D8D48F0C349AA682[0] = _id_22B4906AFB0ED359[_id_AC0E594AC96AA3A8];
            _id_D8D48F0C349AA682[1] = _id_22B4906AFB0ED359[_id_AC0E594AC96AA3A8 + 1];
        }
    }

    _id_3CEE84479012D871 = scripts\engine\utility::array_average( _id_D85CC836998C34DD );
    _id_3A1CFF486B7956DC = 60 + _id_3CEE84479012D871 + _id_4E6EF8FE3C3A2FBB;

    if ( _id_22B4906AFB0ED359.size > 1 )
    {
        _id_11257A1FF69C8CF6 = 30;
        _id_2A017EBA8E9664A6 = self.origin;

        if ( isdefined( _id_4CADAFE0DB5700B3 ) )
            _id_2A017EBA8E9664A6 = self gettagorigin( _id_4CADAFE0DB5700B3 );

        angle = scripts\engine\math::anglebetweenvectors( _id_2A017EBA8E9664A6 - _id_D8D48F0C349AA682[0], _id_2A017EBA8E9664A6 - _id_D8D48F0C349AA682[1] );
    }
    else
    {
        _id_11257A1FF69C8CF6 = 65;
        angle = 0;
    }

    _id_B22FA04E81595347 = _id_11257A1FF69C8CF6 + angle + _id_94370A44392F701B;
    rig delete();
    create_cursor_hint( _id_4CADAFE0DB5700B3, _id_1E2F2224127D2990, hintstring, _id_DF024A1642F13910, _id_1D15541035909A45, _id_3A1CFF486B7956DC, _id_0BCA9B971F3BB97C, _id_A437BC9A2005DF60, _id_9E9B6D24B7A157F0, _id_64E9E1F9BECAB35F, _id_F61019386E1B1034, usecommand, _id_E077514A6FF04ACF, _id_40D4D7A8AD6420E3, _id_B22FA04E81595347 );
}

internal_hint_toggle_use_by_angles( _id_52145FC3D0FAB939, _id_D9BE5B54E8A3F098, userange )
{
    self endon( "death" );
    self endon( "hint_destroyed" );
    level.player endon( "death" );
    _id_C5F846C1088D726E = 1;
    _id_2FEF5331164585F9 = cos( _id_D9BE5B54E8A3F098 );

    for (;;)
    {
        origin = self.origin;
        angles = self.angles;
        fwd = anglestoforward( angles );
        _id_64EF820441895B24 = vectornormalize( level.player geteye() - origin );
        dot = vectordot( fwd, _id_64EF820441895B24 );
        can_use = dot >= _id_2FEF5331164585F9;

        if ( can_use != _id_C5F846C1088D726E )
        {
            if ( can_use )
                _id_52145FC3D0FAB939 setuserange( userange );
            else
                _id_52145FC3D0FAB939 setuserange( 1 );

            _id_C5F846C1088D726E = can_use;
        }

        waitframe();
    }
}

_id_29589FFF42BE0668( _id_4CADAFE0DB5700B3, _id_1E2F2224127D2990, hintstring, _id_24E138FF53F671EE, duration, _id_4A4268457B600842 )
{
    thread _id_C5ECFE572BD65FD0( _id_4CADAFE0DB5700B3, _id_1E2F2224127D2990, hintstring, _id_24E138FF53F671EE, duration, _id_4A4268457B600842 );
}

_id_C5ECFE572BD65FD0( _id_4CADAFE0DB5700B3, _id_1E2F2224127D2990, hintstring, _id_24E138FF53F671EE, duration, _id_4A4268457B600842 )
{
    thread create_cursor_hint( _id_4CADAFE0DB5700B3, _id_1E2F2224127D2990, hintstring );
    triggered = _id_4D0A70B3E87A01CD();

    if ( !istrue( triggered ) )
        return;

    thread _id_1202CD03E8123816( _id_24E138FF53F671EE, duration, _id_4A4268457B600842 );
}

_id_1202CD03E8123816( _id_24E138FF53F671EE, duration, _id_4A4268457B600842 )
{
    waittillframeend;

    if ( isdefined( _id_4A4268457B600842 ) )
    {
        showhint = _id_B8DE3859F8626AAA( _id_4A4268457B600842 );

        if ( !istrue( showhint ) )
            return;
    }

    self._id_F3845E34F291E97D = newhudelem();
    self._id_F3845E34F291E97D.alignx = "center";
    self._id_F3845E34F291E97D.aligny = "bottom";
    self._id_F3845E34F291E97D.x = 320.0;
    self._id_F3845E34F291E97D.y = 380;
    self._id_F3845E34F291E97D.fontscale = 3;

    if ( isdefined( _id_24E138FF53F671EE ) )
        self._id_F3845E34F291E97D settext( _id_24E138FF53F671EE );
    else
        self._id_F3845E34F291E97D settext( "HOLD ^3[{+activate,+usereload}]^7" );

    _id_CBB6E098F3E2D086( duration );
    self._id_F3845E34F291E97D destroy();
}

_id_B8DE3859F8626AAA( _id_4A4268457B600842 )
{
    self endon( "hint_destroyed" );
    self waittill( _id_4A4268457B600842 );
    return 1;
}

_id_CBB6E098F3E2D086( duration )
{
    self endon( "hint_destroyed" );
    self.holding = undefined;
    counter = 0;
    _id_01F4ED3495A24F00 = 15.0;

    for (;;)
    {
        _id_9E75EC0D84D21089 = istrue( self.holding );

        if ( level.player usebuttonpressed() )
            counter = counter + 1.0;
        else
            counter = 0.0;

        if ( isdefined( duration ) && counter >= duration * 20 + _id_01F4ED3495A24F00 )
            break;

        if ( counter >= _id_01F4ED3495A24F00 )
        {
            self.holding = 1;
            level.player playrumbleonentity( "light_1s" );
        }
        else
            self.holding = undefined;

        if ( istrue( self.holding ) && !_id_9E75EC0D84D21089 )
            self notify( "hold_start" );
        else if ( !istrue( self.holding ) && _id_9E75EC0D84D21089 )
            self notify( "hold_stop" );

        waitframe();
    }

    self notify( "hold_complete" );
}

hint_delete_on_trigger()
{
    self endon( "hint_destroyed" );
    _id_52145FC3D0FAB939 = self;

    if ( isdefined( self.cursor_hint_ent ) )
        _id_52145FC3D0FAB939 = self.cursor_hint_ent;

    _id_7AC69D749CD3DA7A( _id_52145FC3D0FAB939 );

    if ( isdefined( self ) )
        remove_cursor_hint();
}

_id_7AC69D749CD3DA7A( _id_52145FC3D0FAB939 )
{
    self endon( "entitydeleted" );
    _id_52145FC3D0FAB939 waittill( "trigger", other );

    if ( _id_52145FC3D0FAB939 != self )
        self notify( "trigger", other );
}

remove_cursor_hint()
{
    _id_52145FC3D0FAB939 = self;

    if ( isdefined( self.cursor_hint_ent ) )
    {
        _id_52145FC3D0FAB939 = self.cursor_hint_ent;
        _id_52145FC3D0FAB939 delete();
        self notify( "hint_destroyed" );
        return;
    }

    if ( !isstruct( _id_52145FC3D0FAB939 ) )
        _id_52145FC3D0FAB939 makeunusable();

    self notify( "hint_destroyed" );
}

hint_waittill_trigger()
{
    _id_6BCC6405C250ECB4 = scripts\engine\sp\utility::monitor_interact_delay( self, "stand" );
    return _id_6BCC6405C250ECB4;
}

_id_4D0A70B3E87A01CD()
{
    self endon( "hint_destroyed" );

    if ( isdefined( self.cursor_hint_ent ) )
        self.cursor_hint_ent waittill( "trigger" );
    else
        self waittill( "trigger" );

    return 1;
}
