// IW9 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

precache( offhand )
{
    scripts\sp\equipment\offhands::registeroffhandfirefunc( offhand, ::_id_E4F132E4CAA48E7E );
}

_id_E4F132E4CAA48E7E( grenade, weapon )
{
    grenade endon( "thermite_deleted" );
    thread thermite_used( grenade );
    grenade thread notifyondelete();
}

notifyondelete()
{
    self endon( "explode" );

    while ( isdefined( self ) )
        wait 0.05;

    self notify( "thermite_deleted" );
}

thermite_used( grenade, _id_E012E0B70D7D54FA )
{
    if ( isdefined( _id_E012E0B70D7D54FA ) )
    {

    }

    grenade thread thermite_watchstuck( _id_E012E0B70D7D54FA );
}

thermite_watchstuck( _id_E012E0B70D7D54FA )
{
    self endon( "death" );
    stuckto = undefined;
    self waittill( "missile_stuck", stuckto );
    weaponobj = scripts\sp\utility::make_weapon( "thermite_sp" );
    thread thermite_watchstucktoterrain();
    self setscriptablepartstate( "effects", "impact", 0 );
    thermite_doradiusdamage( weaponobj );
    wait 0.5;
    ticks = 1;

    while ( ticks <= 10 )
    {
        _id_6B3EE446F2845368 = ticks + 1;

        if ( mod( _id_6B3EE446F2845368, 2 ) > 0 )
            thermite_doradiusdamage( weaponobj );
        else
            thermite_doradiusdamage( weaponobj );

        ticks = _id_6B3EE446F2845368;
        wait 0.5;
    }

    thread thermite_destroy();
}

thermite_watchstucktoterrain()
{
    self endon( "death" );
    stuckto = self getlinkedparent();

    while ( isdefined( stuckto ) )
        self waittill( "missile_stuck", stuckto );

    self.badplace = createnavbadplacebybounds( self.origin, ( 125, 125, 125 ), ( 0, 0, 0 ) );
}

thermite_doradiusdamage( weaponobj )
{
    radius = 125;
    _id_95B523256E906E92 = 25;
    _id_994D66DFA5028629 = 10;
    meansofdeath = "MOD_FIRE";

    if ( weaponobj.basename == "thermite_sp" )
    {
        radius = 125;
        _id_95B523256E906E92 = 30;
        _id_994D66DFA5028629 = 30;
    }

    self radiusdamage( self.origin, radius, _id_95B523256E906E92, _id_994D66DFA5028629, self.owner, meansofdeath, weaponobj );
}

thermite_destroy()
{
    self setscriptablepartstate( "effects", "burnEnd", 0 );
    thread thermite_delete( 5 );
}

thermite_delete( _id_CBF7BE4F62A0DDB2 )
{
    self notify( "death" );
    self.exploding = 1;

    if ( isdefined( self.badplace ) )
    {
        destroynavobstacle( self.badplace );
        self.badplace = undefined;
    }

    self forcehidegrenadehudwarning( 1 );

    if ( isdefined( _id_CBF7BE4F62A0DDB2 ) )
        wait( _id_CBF7BE4F62A0DDB2 );

    self delete();
}

mod( _id_A860076E6B45DB06, _id_F1563935AEEB5199 )
{
    _id_AC0E414AC96A6EE0 = int( _id_A860076E6B45DB06 / _id_F1563935AEEB5199 );

    if ( _id_A860076E6B45DB06 * _id_F1563935AEEB5199 < 0 )
        _id_AC0E414AC96A6EE0 = _id_AC0E414AC96A6EE0 - 1;

    return _id_A860076E6B45DB06 - _id_AC0E414AC96A6EE0 * _id_F1563935AEEB5199;
}
