// IW9 GSC SOURCE
// Generated by https://github.com/xensik/gsc-tool

_id_AD4172A44F169CB6()
{
    if ( !getdvarint( "dvar_FA0D15FA95281A06", 1 ) )
        return;

    level._id_D57C61FE001F1707 = spawnstruct();
    level._id_D57C61FE001F1707._id_AB56B9F3B70782A6 = getdvarint( "dvar_BC26DF7F41837A1E", 3 );
    level._id_D57C61FE001F1707._id_5975A9EF47C4674C = getdvarint( "dvar_BC02F17F415B26FC", 7 );
    level._id_D57C61FE001F1707._id_029A79D378C70E0B = getdvarint( "dvar_E8C36536AFD06323", 512 );
    level._id_D57C61FE001F1707.capturetime = getdvarint( "dvar_A47D932B5DCB7A74", 60 );
    level._id_D57C61FE001F1707._id_36576A67F06F7657 = getdvarint( "dvar_CC862F7D0A6C378F", 5000 );
    level._id_D57C61FE001F1707._id_AAFBA8D70563022B = getdvarint( "dvar_AB0966FACF3E7683", 300 );
    level._id_D57C61FE001F1707._id_1DECB3B28FA5E1C9 = getdvarint( "dvar_7A4C18BDA90EAE0C", 16000 );
    level._id_D57C61FE001F1707._id_F4F7F8E7AA14EE19 = getdvarint( "dvar_C858E5FF90540E26", 50000 );
    level._id_D57C61FE001F1707._id_D0F63034F54017E3 = getdvarint( "dvar_7FF620132228B8A9", 2500 );
    level._id_D57C61FE001F1707._id_4BB2FF3E6E82C373 = getdvarint( "dvar_E2C51295CA08D914", 5 );
    level._id_D57C61FE001F1707._id_FFB94540411249A9 = getdvarint( "dvar_FCAF02F59D6AA9CE", 8 );
    level._id_D57C61FE001F1707._id_A098A0B9DBCFC30D = getdvarint( "dvar_B6AADDBF47FC8DB6", 1 );
    level._id_D57C61FE001F1707._id_125035462230088F = getdvarint( "dvar_9134BB0C8C176121", 40 );
    level._id_D57C61FE001F1707._id_18BE0584E3DC6151 = getdvarint( "dvar_B2BACDB9FAC9E30F", 80 );
    level._id_D57C61FE001F1707._id_5D016CC8C6057E32 = getdvarint( "dvar_834C9AD109576FE1", 30 );
    level._effect["samsite_bomb_explosion"] = loadfx( "vfx/iw8_mp/gamemode/vfx_search_bombsite_destroy.vfx" );
    level._id_9215E3A9DFE8A262 = ::_id_2CCF2416263812E2;
    level._id_D8D4808549090419 = ::_id_36DC1A84DE5BDB04;
    scripts\engine\scriptable::scriptable_addusedcallbackbypart( "samsite_base_mp", ::_id_5E0B45946652EEB3 );
    level._id_721546C4F8DF565D = [];

    foreach ( team in level.teamnamelist )
    {
        start = level.teamdata[team]["startPoint"];

        if ( !isdefined( start ) )
            continue;

        if ( !isdefined( level._id_721546C4F8DF565D[start._id_B205D90302DA2F07] ) )
            level._id_721546C4F8DF565D[start._id_B205D90302DA2F07] = [];

        level._id_721546C4F8DF565D[start._id_B205D90302DA2F07][level._id_721546C4F8DF565D[start._id_B205D90302DA2F07].size] = start;
    }

    locations = scripts\engine\utility::getstructarray( "dmz_samsite", "targetname" );
    _id_371C833EBA04930E = _id_5DEF7AF2A9F04234::_id_7E9CBC0F32DE6578();
    level._id_086CDE7DDE516573 = [];
    _id_622366932D8EA2CB = [];

    foreach ( _id_AC0E594AC96AA3A8, location in locations )
    {
        if ( !isdefined( location._id_B205D90302DA2F07 ) )
            location._id_B205D90302DA2F07 = _id_5DEF7AF2A9F04234::_id_6CC445C02B5EFFAC( location.origin );

        _id_B205D90302DA2F07 = location._id_B205D90302DA2F07;

        if ( !isdefined( _id_B205D90302DA2F07 ) || _id_371C833EBA04930E && !_id_5DEF7AF2A9F04234::_id_FAA6481E65F14ADE( _id_B205D90302DA2F07 ) )
            continue;

        location.score = _id_E2D9A460B285095E( location );

        if ( isdefined( _id_622366932D8EA2CB[_id_B205D90302DA2F07] ) && _id_622366932D8EA2CB.size > 0 )
        {
            if ( _id_622366932D8EA2CB[_id_B205D90302DA2F07].score < location.score )
                _id_622366932D8EA2CB[_id_B205D90302DA2F07] = location;

            continue;
        }

        _id_622366932D8EA2CB[_id_B205D90302DA2F07] = location;
    }

    foreach ( node in _id_622366932D8EA2CB )
        level._id_086CDE7DDE516573[level._id_086CDE7DDE516573.size] = node;

    level._id_CF3FEEAA65A4E3F0 = [];
    _id_FC617751F654A141 = randomintrange( level._id_D57C61FE001F1707._id_AB56B9F3B70782A6, level._id_D57C61FE001F1707._id_5975A9EF47C4674C + 1 );
    level._id_086CDE7DDE516573 = scripts\engine\utility::array_randomize( level._id_086CDE7DDE516573 );

    for ( _id_62E50AD3144802A8 = 0; _id_62E50AD3144802A8 < _id_FC617751F654A141 && _id_62E50AD3144802A8 < level._id_086CDE7DDE516573.size; _id_62E50AD3144802A8++ )
    {
        node = level._id_086CDE7DDE516573[_id_62E50AD3144802A8];
        _id_C327ADFAD89EFC23 = _id_4BCDAA72E4FE9480( node );
        _id_C327ADFAD89EFC23 _id_0A94F5CEEAE751B8();
        _id_C327ADFAD89EFC23._id_B3AEFAFBA795117F = spawn( "script_model", _id_C327ADFAD89EFC23.origin + ( 0, 0, 9000 ) + anglestoforward( _id_C327ADFAD89EFC23.angles ) * 10000 );
        _id_C327ADFAD89EFC23 settargetentity( _id_C327ADFAD89EFC23._id_B3AEFAFBA795117F );
        _id_C327ADFAD89EFC23 _id_DD951B288C7C19F8( node );
        _id_C327ADFAD89EFC23.curorigin = _id_C327ADFAD89EFC23.origin;
        _id_C327ADFAD89EFC23.offset3d = ( 0, 0, 100 );
        _id_C327ADFAD89EFC23 scripts\mp\gameobjects::requestid( 1, 1, undefined, 1 );
        scripts\mp\objidpoolmanager::update_objective_icon( _id_C327ADFAD89EFC23.objidnum, "ui_map_icon_obj_sam_site" );
        objective_setbackground( _id_C327ADFAD89EFC23.objidnum, 1 );
        objective_setpinned( _id_C327ADFAD89EFC23.objidnum, 1 );
        objective_position( _id_C327ADFAD89EFC23.objidnum, _id_C327ADFAD89EFC23.origin + ( 0, 0, 50 ) );
        objective_addalltomask( _id_C327ADFAD89EFC23.objidnum );
        objective_hidefromplayersinmask( _id_C327ADFAD89EFC23.objidnum );

        while ( !isdefined( level.struct_class_names ) || !isdefined( level._id_41670C1C65F3D3CF ) || _func_9A83377C98BCE82A( "everybody" ) <= 0 )
            waitframe();

        numagents = randomintrange( level._id_D57C61FE001F1707._id_4BB2FF3E6E82C373, level._id_D57C61FE001F1707._id_FFB94540411249A9 + 1 );
        _id_C327ADFAD89EFC23 _id_920E785CFDD82B86( numagents );
        _id_C327ADFAD89EFC23._id_08EA2BEB55597DB7 = [];
        _id_C327ADFAD89EFC23 thread _id_594D850004436026();
    }

    thread _id_18A561A377CAC8A7();
}

#using_animtree("script_model");

_id_5EA3FE433148FA9F()
{
    level.scr_animtree["samsite"] = #animtree;
    level.scr_anim["samsite"]["fire"] = level._id_1A209BD995A7FA83["iw9_mp_prop_samsite_launch"];
}

_id_E2D9A460B285095E( location )
{
    score = 0;

    if ( isdefined( level._id_721546C4F8DF565D[location._id_B205D90302DA2F07] ) )
    {
        foreach ( start in level._id_721546C4F8DF565D[location._id_B205D90302DA2F07] )
            score = score + distancesquared( location.origin, start.origin );
    }

    return score;
}

_id_4BCDAA72E4FE9480( location )
{
    _id_C327ADFAD89EFC23 = spawnturret( "misc_turret", location.origin, "iw9_tur_samsite_cp" );

    if ( !isdefined( location.angles ) )
        location.angles = ( 0, 0, 0 );

    _id_C327ADFAD89EFC23.angles = location.angles;
    _id_C327ADFAD89EFC23 setmodel( "military_samsite_01_rig_skeleton_mp" );
    _id_C327ADFAD89EFC23 settoparc( 90 );
    _id_C327ADFAD89EFC23 setbottomarc( 15 );
    _id_C327ADFAD89EFC23 setleftarc( 360 );
    _id_C327ADFAD89EFC23 setrightarc( 360 );
    _id_C327ADFAD89EFC23 setscriptablepartstate( "rocket1", "hidden" );
    _id_C327ADFAD89EFC23 setscriptablepartstate( "rocket2", "hidden" );
    _id_C327ADFAD89EFC23 setscriptablepartstate( "rocket3", "hidden" );
    _id_C327ADFAD89EFC23 makeunusable();
    _id_C327ADFAD89EFC23 setscriptablepartstate( "samsite_base_mp", "usable" );
    _id_C327ADFAD89EFC23.icon = spawnscriptable( "dmz_samsite_icon", _id_C327ADFAD89EFC23.origin, _id_C327ADFAD89EFC23.angles );
    _id_C327ADFAD89EFC23.icon setscriptablepartstate( "icon", "healthy" );
    _id_C327ADFAD89EFC23._id_B205D90302DA2F07 = location._id_B205D90302DA2F07;
    _id_C327ADFAD89EFC23._id_90FB369A18926018 = [];
    level._id_CF3FEEAA65A4E3F0[level._id_CF3FEEAA65A4E3F0.size] = _id_C327ADFAD89EFC23;
    return _id_C327ADFAD89EFC23;
}

_id_CC25275B4F14DF1B( num )
{
    missile = spawn( "script_model", self gettagorigin( "mg0" + num ) );
    missile setmodel( "military_missile_rig_skeleton" );
    missile.angles = self gettagangles( "mg0" + num );
    missile linkto( self, "mg0" + num );
    return missile;
}

_id_0A94F5CEEAE751B8()
{
    if ( !isdefined( self.missiles ) )
        self.missiles = [];

    self.missiles[0] = _id_CC25275B4F14DF1B( 1 );
    self.missiles[1] = _id_CC25275B4F14DF1B( 2 );
    self.missiles[2] = _id_CC25275B4F14DF1B( 3 );
}

_id_13FFBC8076C6A2F3( _id_1600845F933938D5, target )
{
    self endon( "death" );
    missile = self.missiles[_id_1600845F933938D5];

    if ( isdefined( missile ) )
    {
        missile notify( "launched" );
        self.missiles[_id_1600845F933938D5] = undefined;
    }

    self setscriptablepartstate( "launch", "on" );

    if ( !isdefined( missile ) )
        return;

    missile._id_DA169210CED21C6B = 1;
    origin = missile.origin;
    missile delete();
    _id_3865E73449A5A438 = makeweapon( "samsite_missile_weapon" );
    _id_D42E799E256E8C7A = magicbullet( _id_3865E73449A5A438, origin, self._id_B3AEFAFBA795117F.origin );
    self._id_D42E799E256E8C7A = _id_D42E799E256E8C7A;
    _id_D42E799E256E8C7A._id_C327ADFAD89EFC23 = self;
    _id_D42E799E256E8C7A setmodel( "military_missile_rig_skeleton" );
    _id_D42E799E256E8C7A setentityowner( self );
    _id_D42E799E256E8C7A._id_3A94ED22775A3C94 = self._id_3A94ED22775A3C94;
    _id_D42E799E256E8C7A _id_EA701DE0C74B3D7A( target );
    _id_D42E799E256E8C7A setscriptablepartstate( "military_samsite_missile", "on" );
    _id_D42E799E256E8C7A thread _id_A9720AE0CD1C43EC( target );
}

_id_EA701DE0C74B3D7A( target )
{
    if ( isdefined( target ) && isdefined( target.ent ) && isdefined( self ) )
    {
        if ( target.type == 0 )
            self missile_settargetent( target.ent, ( 0, 0, -100 ) );
        else if ( target.type == 1 )
            self missile_settargetent( target.ent, ( 1500, 0, 0 ) );
        else if ( target.type == 2 )
            self missile_settargetent( target.ent, ( 0, 0, -100 ) );

        self missile_setflightmodedirect();
    }
}

_id_A9720AE0CD1C43EC( target )
{
    level endon( "game_ended" );

    if ( target.type == 1 )
    {
        for (;;)
        {
            if ( !isdefined( self ) || !isdefined( target ) || !isdefined( target.ent ) )
                return;

            dist = distance( target.ent.origin, self.origin );

            if ( dist < 400 )
            {
                level._id_D57C61FE001F1707._id_CF0B6780C2D8A0F8 = 1;
                level notify( "plane_hit", target.ent );
                _id_1F97A44D1761C919::_id_9793A81BC3BC19E9( "samsite_plane_hit", self._id_3A94ED22775A3C94 );

                if ( isdefined( level._effect["chopper_explosion"] ) )
                    playfx( level._effect["chopper_explosion"], self.origin );

                origin = getclosestpointonnavmesh( self.origin );
                crate = _id_046CF752D93DC17B::_id_52F17E5FBEC318A6( self.origin - ( 0, 0, level._id_5D2AF95280A3CF58 ), level._id_EF63E063E320ACFC["dmz_samsite_drop"] );

                if ( isdefined( crate ) )
                {
                    crate unlink();
                    crate physicslaunchserver( ( 0, 0, 0 ), ( 0, 0, 0 ) );
                    _id_212A44A5393C3B34 = crate physics_getbodyid( 0 );
                    physics_setbodycenterofmassnormal( _id_212A44A5393C3B34, ( 0, 0, -1 ) );
                    crate.physicsactivated = 1;
                    crate.usetime = 10;
                    crate setscriptablepartstate( "dmz_supply_drop", "usable" );
                }

                self delete();
                target.ent delete();

                if ( isdefined( target.ent.chassis ) )
                    target.ent.chassis delete();
            }

            waitframe();
        }
    }
}

_id_CE2565296095B940( target )
{
    if ( !isdefined( self._id_CC54CBA4C1D60EA4 ) )
        self._id_CC54CBA4C1D60EA4 = 0;

    thread _id_13FFBC8076C6A2F3( self._id_CC54CBA4C1D60EA4, target );
    self._id_CC54CBA4C1D60EA4 = ( self._id_CC54CBA4C1D60EA4 + 1 ) % 3;

    if ( self._id_CC54CBA4C1D60EA4 == 0 )
    {
        wait 5.0;
        _id_0A94F5CEEAE751B8();
    }

    wait 1.0;
}

_id_AB3D52600E20B324()
{
    for (;;)
    {
        thread _id_13FFBC8076C6A2F3( 0 );
        wait 5.0;
        thread _id_13FFBC8076C6A2F3( 1 );
        wait 5.0;
        thread _id_13FFBC8076C6A2F3( 2 );
        _id_0A94F5CEEAE751B8();
        wait 5.0;
    }
}

_id_FBFACB92D755DEDC( target )
{
    velocity = undefined;
    origin = undefined;

    if ( target.type == 0 )
    {
        heli = target.ent;
        velocity = heli vehicle_getvelocity();
        origin = heli.occupants["driver"].origin;
    }
    else if ( target.type == 1 )
    {
        c130 = target.ent;
        velocity = c130.velocity;
        origin = c130.origin;
    }
    else if ( target.type == 2 )
    {
        heli = target.ent;
        velocity = heli vehicle_getvelocity();
        origin = heli.origin;
    }

    if ( !isdefined( velocity ) || !isdefined( origin ) )
        return undefined;

    dist = distance( self.origin, origin );
    speed = 6000;
    _id_D1E7847092585DDB = dist / speed;
    return origin + velocity * _id_D1E7847092585DDB;
}

_id_12EED3315BE94B9E( target )
{
    _id_77294299D5BEE66B = 50;
    _id_F58FF7E9A26FD75D = 50;
    duration = 5.0;
    timer = 0.0;

    while ( timer < duration && isdefined( self._id_3A94ED22775A3C94 ) )
    {
        if ( !isdefined( target ) || !isdefined( target.ent ) || !_id_66BA1EE70DFA7F10( target ) )
            return 0;

        origin = target.ent.origin;
        _id_5FBECC8C72D34761 = [ self ];

        foreach ( missile in self.missiles )
            _id_5FBECC8C72D34761[_id_5FBECC8C72D34761.size] = missile;

        trace = scripts\engine\trace::ray_trace( self.origin, origin, _id_5FBECC8C72D34761, undefined, 0, 1 );
        _id_30E65BD6257F2186 = distance( self.origin, origin ) * ( 1 - trace["fraction"] );

        if ( _id_30E65BD6257F2186 > 100.0 || isdefined( trace["entity"] ) && trace["entity"] != target.ent )
            return 0;

        origin = _id_FBFACB92D755DEDC( target );

        if ( !isdefined( origin ) )
            return 0;

        pitch = self _meth_1959623F094566C0();
        yaw = self _meth_3DE54A6DE76FC435();
        _id_A5337F8300110201 = 0;
        _id_3C5DF5BF59ED9678 = 0;
        _id_D42E799E256E8C7A = scripts\engine\math::vector_project_onto_plane( origin - self.origin, anglestoup( self.angles ) );
        _id_7CEC60A6D624C6EA = scripts\engine\math::anglebetweenvectorssigned( origin - ( self.origin + ( 0, 0, 100 ) ), _id_D42E799E256E8C7A, anglestoright( self.angles ) );
        _id_58B520B780D1B6B1 = _id_7CEC60A6D624C6EA - pitch;
        _id_623F3095ECFA11FF = scripts\engine\math::anglebetweenvectorssigned( anglestoforward( self.angles ), _id_D42E799E256E8C7A, anglestoup( self.angles ) );
        _id_B98EE2D4674EBBE8 = _id_623F3095ECFA11FF - yaw;
        rate = _id_77294299D5BEE66B * level.framedurationseconds;
        _id_A5337F8300110201 = clamp( _id_58B520B780D1B6B1, 0.0 - rate, rate );
        rate = _id_F58FF7E9A26FD75D * level.framedurationseconds;
        _id_3C5DF5BF59ED9678 = clamp( _id_B98EE2D4674EBBE8, 0.0 - rate, rate );
        _id_7082EB3120E7F1AC = ( pitch + _id_A5337F8300110201 ) * -1;
        _id_0912551CAA02B411 = yaw + _id_3C5DF5BF59ED9678;
        offset = ( cos( _id_7082EB3120E7F1AC ) * cos( _id_0912551CAA02B411 ), cos( _id_7082EB3120E7F1AC ) * sin( _id_0912551CAA02B411 ), sin( _id_7082EB3120E7F1AC ) );
        offset = rotatevector( offset, self.angles );
        self._id_B3AEFAFBA795117F.origin = self.origin + ( 0, 0, 100 ) + 5000.0 * offset;

        if ( abs( _id_58B520B780D1B6B1 ) < 5 && abs( _id_B98EE2D4674EBBE8 ) < 5 )
            return 1;

        timer = timer + level.framedurationseconds;
        waitframe();
    }

    return 0;
}

_id_005B157A05A421CB( target )
{
    if ( target.type == 1 )
        _id_1F97A44D1761C919::_id_9793A81BC3BC19E9( "samsite_nearby_plane", self._id_3A94ED22775A3C94 );

    self setscriptablepartstate( "audio", "rotate_start" );
    _id_F73F345E91F4546A = _id_12EED3315BE94B9E( target );
    self setscriptablepartstate( "audio", "rotate_stop" );

    if ( _id_F73F345E91F4546A )
        _id_CE2565296095B940( target );
}

_id_66BA1EE70DFA7F10( target )
{
    switch ( target.type )
    {
        case 0:
            heli = target.ent;
            return heli.occupants.size && isdefined( self._id_3A94ED22775A3C94 ) && isdefined( heli.occupants["driver"] ) && heli.occupants["driver"].team != self._id_3A94ED22775A3C94 && distance( heli.origin, self.origin ) < level._id_D57C61FE001F1707._id_1DECB3B28FA5E1C9;
        case 1:
            c130 = target.ent;
            return isdefined( self._id_3A94ED22775A3C94 ) && distance2d( c130.origin, self.origin ) < level._id_D57C61FE001F1707._id_F4F7F8E7AA14EE19;
        case 2:
            heli = target.ent;
            return isdefined( self._id_3A94ED22775A3C94 ) && distance( heli.origin, self.origin ) < level._id_D57C61FE001F1707._id_1DECB3B28FA5E1C9;
    }
}

_id_F4442F000C3A0FEC( target )
{
    switch ( target.type )
    {
        case 0:
            return 100;
        case 1:
            return 200;
        case 2:
            return 300;
    }
}

_id_594D850004436026()
{
    level endon( "game_ended" );

    if ( getdvarint( "dvar_53EFF3ABAE42511B", 1 ) == 0 )
        return;

    for (;;)
    {
        if ( isdefined( self._id_3A94ED22775A3C94 ) && isdefined( self._id_08EA2BEB55597DB7 ) && self._id_08EA2BEB55597DB7.size > 0 )
        {
            besttarget = undefined;
            _id_24FF44101B202835 = [];
            priority = 0;

            foreach ( target in self._id_08EA2BEB55597DB7 )
            {
                if ( isdefined( target.ent ) && _id_66BA1EE70DFA7F10( target ) )
                {
                    _id_24FF44101B202835[_id_24FF44101B202835.size] = target;
                    _id_506AAEEFD9242A6C = _id_F4442F000C3A0FEC( target );

                    if ( priority <= _id_506AAEEFD9242A6C )
                    {
                        besttarget = target;
                        priority = _id_506AAEEFD9242A6C;
                    }
                }
            }

            self._id_08EA2BEB55597DB7 = _id_24FF44101B202835;

            if ( isdefined( besttarget ) )
                _id_005B157A05A421CB( besttarget );
        }

        wait 2.0;
    }
}

_id_DD951B288C7C19F8( location )
{
    self._id_594D7B859FDB06F7 = [];

    if ( isdefined( location.target ) )
    {
        nodes = scripts\engine\utility::getstructarray( location.target, "targetname" );

        foreach ( node in nodes )
        {
            switch ( node.script_noteworthy )
            {
                case "guard_sniper":
                    self._id_594D7B859FDB06F7[self._id_594D7B859FDB06F7.size] = node;
                    break;
            }
        }
    }
}

_id_920E785CFDD82B86( numagents )
{
    self.numagents = 0;
    self.agents = [];

    for ( _id_AC0E594AC96AA3A8 = 0; _id_AC0E594AC96AA3A8 < numagents; _id_AC0E594AC96AA3A8++ )
    {
        aitype = _id_48814951E916AF89::_id_D5BC07EABF352ABB( undefined, undefined, "overwatch" );
        _id_0FB30E2E6ACA1D19 = randomfloatrange( 144, 360 );
        forward = anglestoforward( self.angles ) * _id_0FB30E2E6ACA1D19;
        right = vectorcross( ( 0, 0, 1 ), forward );
        _id_CB88E484EB1A3A92 = axistoangles( forward, right, ( 0, 0, 1 ) );
        _id_88B83B0D7A43EA72 = _id_AC0E594AC96AA3A8 / numagents * 360 + randomfloatrange( -30.0, 30.0 ) % 360;
        offset = rotatepointaroundvector( ( 0, 0, 1 ), forward, _id_88B83B0D7A43EA72 );
        origin = self.origin + offset;

        if ( issubstr( aitype, "sniper" ) && isdefined( self._id_594D7B859FDB06F7 ) && self._id_594D7B859FDB06F7.size > 0 )
        {
            node = scripts\engine\utility::random( self._id_594D7B859FDB06F7 );
            self._id_594D7B859FDB06F7 = scripts\engine\utility::array_remove( self._id_594D7B859FDB06F7, node );
            origin = node.origin;
            _id_CB88E484EB1A3A92 = node.angles;
        }

        agent = _id_48814951E916AF89::_id_EA94A8BF24D3C5EF( aitype, origin, _id_CB88E484EB1A3A92, "medium", "mission", "samInitialGuards", undefined, undefined, undefined, self._id_B205D90302DA2F07, 0, undefined, 1 );

        if ( isdefined( agent ) )
        {
            self.agents[_id_AC0E594AC96AA3A8] = agent;
            thread _id_120270BD0A747A35::_id_B11C1964F528574B( agent );
        }
    }

    self.numagents = self.agents.size;
}

_id_5E0B45946652EEB3( instance, part, state, _id_FBA0376E0036DE8D, _id_A5B2C541413AA895, _id_CC38472E36BE1B61 )
{
    _id_C327ADFAD89EFC23 = instance.entity;

    if ( isdefined( _id_C327ADFAD89EFC23._id_118719DB7C3B0EEF ) )
    {
        _id_F6CE5FBAE9847FB9 = scripts\mp\utility\teams::getteamdata( _id_C327ADFAD89EFC23._id_118719DB7C3B0EEF, "players" );

        foreach ( player in _id_F6CE5FBAE9847FB9 )
        {
            if ( isdefined( player ) )
            {
                objective_hideprogressforclient( _id_C327ADFAD89EFC23.objidnum, player );
                _func_D1B64C3D055CEEB0( 0, player );
            }
        }
    }

    _id_E2B2BBD9E6539F11 = scripts\mp\utility\teams::getteamdata( _id_FBA0376E0036DE8D.team, "players" );

    foreach ( player in level.players )
        instance enablescriptableplayeruse( player );

    foreach ( player in _id_E2B2BBD9E6539F11 )
        instance disablescriptableplayeruse( player );

    _id_C327ADFAD89EFC23._id_118719DB7C3B0EEF = _id_FBA0376E0036DE8D.team;
    _id_C327ADFAD89EFC23 notify( "start_capture" );
    _id_C327ADFAD89EFC23 _id_FF2AEEA62B8FFB41();
    _id_C327ADFAD89EFC23 thread _id_30CF9BA4BF893A9A();
}

_id_FF2AEEA62B8FFB41()
{
    foreach ( player in self._id_90FB369A18926018 )
    {
        if ( isdefined( player ) )
            scripts\mp\objidpoolmanager::_id_26259BD38697B5AD( self.objidnum, player );
    }
}

_id_30CF9BA4BF893A9A()
{
    self endon( "start_capture" );
    level endon( "game_ended" );
    _id_6A8EC730B2BFA844::_id_A9F8FA06A358585B( self._id_118719DB7C3B0EEF, "samsite", 0 );
    _id_E2B2BBD9E6539F11 = scripts\mp\utility\teams::getteamdata( self._id_118719DB7C3B0EEF, "players" );
    _id_1F97A44D1761C919::_id_9793A81BC3BC19E9( "samsite_begin_capture", self._id_118719DB7C3B0EEF );
    objective_removeallfrommask( self.objidnum );

    foreach ( player in _id_E2B2BBD9E6539F11 )
    {

    }

    objective_showtoplayersinmask( self.objidnum );
    waitframe();
    objective_setplayintro( self.objidnum, 0 );
    self._id_7B45AAAC74192C14 = _id_48814951E916AF89::_id_353FECD1549F5F42( self.origin, level._id_D57C61FE001F1707._id_D0F63034F54017E3 );

    if ( self._id_7B45AAAC74192C14.size < 5 )
        thread _id_ADBD4A9D1BB7572B();

    starttime = gettime();
    _id_AC85CEAC5AE0C89A = 0.0;
    duration = level._id_D57C61FE001F1707.capturetime * 1000;
    self._id_90FB369A18926018 = [];

    while ( _id_AC85CEAC5AE0C89A < duration )
    {
        _id_B1E1B0A993DBD52A = 0;
        _id_E2B2BBD9E6539F11 = scripts\mp\utility\teams::getteamdata( self._id_118719DB7C3B0EEF, "players" );

        if ( !isdefined( _id_E2B2BBD9E6539F11 ) || _id_E2B2BBD9E6539F11.size == 0 )
        {
            objective_addalltomask( self.objidnum );
            objective_hidefromplayersinmask( self.objidnum );
            self._id_118719DB7C3B0EEF = undefined;
            return;
        }

        foreach ( player in _id_E2B2BBD9E6539F11 )
        {
            if ( scripts\mp\utility\player::isreallyalive( player ) && isdefined( player.origin ) )
            {
                dist = distance2dsquared( player.origin, self.origin );

                if ( dist < level._id_D57C61FE001F1707._id_029A79D378C70E0B * level._id_D57C61FE001F1707._id_029A79D378C70E0B )
                {
                    _id_B1E1B0A993DBD52A = 1;

                    if ( !scripts\engine\utility::array_contains( self._id_90FB369A18926018, player ) )
                    {
                        scripts\mp\objidpoolmanager::objective_playermask_addshowplayer( self.objidnum, player );
                        scripts\mp\objidpoolmanager::_id_CE702E5925E31FC9( self.objidnum, player, 1, 2, &"DMZ/SAMSITE_CAPTURE_PROGRESS" );
                        self._id_90FB369A18926018 = scripts\engine\utility::array_add( self._id_90FB369A18926018, player );
                    }

                    objective_addclienttomask( self.objidnum, player );
                }
                else if ( scripts\engine\utility::array_contains( self._id_90FB369A18926018, player ) )
                {
                    scripts\mp\objidpoolmanager::objective_playermask_hidefrom( self.objidnum, player );
                    scripts\mp\objidpoolmanager::_id_26259BD38697B5AD( self.objidnum, player );
                    self._id_90FB369A18926018 = scripts\engine\utility::array_remove( self._id_90FB369A18926018, player );
                }
            }
        }

        if ( istrue( _id_B1E1B0A993DBD52A ) )
        {
            _id_AC85CEAC5AE0C89A = _id_AC85CEAC5AE0C89A + level.frameduration;
            progress = _id_AC85CEAC5AE0C89A / duration;
            objective_setprogress( self.objidnum, progress );
            objective_showtoplayersinmask( self.objidnum );
        }

        waitframe();
    }

    self notify( "captured" );
    _id_FF2AEEA62B8FFB41();
    objective_addalltomask( self.objidnum );
    objective_hidefromplayersinmask( self.objidnum );
    _id_7408ED52662703D3 = level._id_B205D90302DA2F07[self._id_B205D90302DA2F07]["players"];
    _id_E2B2BBD9E6539F11 = scripts\mp\utility\teams::getteamdata( self._id_118719DB7C3B0EEF, "players" );
    _id_7408ED52662703D3 = scripts\engine\utility::array_remove_array( _id_7408ED52662703D3, _id_E2B2BBD9E6539F11 );
    _id_4480C6CE37B2BDF3::_id_AE6091699E25D8B4( "dmz_samsite_captured", _id_E2B2BBD9E6539F11, self._id_B205D90302DA2F07 );
    _id_4480C6CE37B2BDF3::_id_AE6091699E25D8B4( "dmz_samsite_captured_others", _id_7408ED52662703D3, self._id_B205D90302DA2F07 );

    if ( isdefined( self._id_3A94ED22775A3C94 ) )
    {
        _id_CE6B5424F8072ED9 = scripts\mp\utility\teams::getteamdata( self._id_3A94ED22775A3C94, "players" );
        _id_7408ED52662703D3 = scripts\engine\utility::array_remove_array( _id_7408ED52662703D3, _id_CE6B5424F8072ED9 );
        _id_1F97A44D1761C919::_id_9793A81BC3BC19E9( "samsite_counter_capture", self._id_3A94ED22775A3C94 );
    }

    _id_1F97A44D1761C919::_id_D87D5DEB069BF8E5( "samsite_others_captured", _id_7408ED52662703D3 );
    _id_1F97A44D1761C919::_id_9793A81BC3BC19E9( "samsite_captured", self._id_118719DB7C3B0EEF );
    self._id_3A94ED22775A3C94 = self._id_118719DB7C3B0EEF;
    self._id_118719DB7C3B0EEF = undefined;
    _id_6A8EC730B2BFA844::_id_A9F8FA06A358585B( self._id_3A94ED22775A3C94, "samsite", 1 );
    self.icon setscriptablepartstate( "icon", "attacked" );
    thread _id_43F27B5852D28616();
}

_id_7F8E0B88438E1071( pos )
{
    right = 2000 * scripts\engine\math::random_vector_2d();
    _id_0A26FCF699AD1159 = -99999999;
    _id_0A040EF69986F137 = 99999999;

    foreach ( _id_DC8625458EE5ED14 in level.br_level.br_mapboundsfull )
    {
        foreach ( _id_6E7C70B904418DAA in [ 0, 1 ] )
        {
            t = ( _id_DC8625458EE5ED14[_id_6E7C70B904418DAA] - pos[_id_6E7C70B904418DAA] ) / right[_id_6E7C70B904418DAA];

            if ( t > 0 )
            {
                _id_0A040EF69986F137 = min( _id_0A040EF69986F137, t );
                continue;
            }

            _id_0A26FCF699AD1159 = max( _id_0A26FCF699AD1159, t );
        }
    }

    _id_9C22DBECB3D2D61B = ( pos[0] + _id_0A26FCF699AD1159 * right[0], pos[1] + _id_0A26FCF699AD1159 * right[1], scripts\cp_mp\parachute::getc130height() );
    _id_D686C2BF0F2C7E39 = ( pos[0] + _id_0A040EF69986F137 * right[0], pos[1] + _id_0A040EF69986F137 * right[1], scripts\cp_mp\parachute::getc130height() );
    pathdir = vectornormalize( _id_D686C2BF0F2C7E39 - _id_9C22DBECB3D2D61B );
    pathstruct = spawnstruct();
    pathstruct.startpt = _id_9C22DBECB3D2D61B;
    pathstruct.endpt = _id_D686C2BF0F2C7E39;
    pathstruct.angle = vectortoangles( pathdir );
    return pathstruct;
}

_id_43F27B5852D28616()
{
    level endon( "game_ended" );
    self endon( "captured" );

    if ( level._id_D57C61FE001F1707._id_AAFBA8D70563022B < 0 )
        return;

    wait( level._id_D57C61FE001F1707._id_AAFBA8D70563022B );
    _id_E2B2BBD9E6539F11 = scripts\mp\utility\teams::getteamdata( self._id_3A94ED22775A3C94, "players" );
    _id_4480C6CE37B2BDF3::_id_AE6091699E25D8B4( "dmz_samsite_lost", _id_E2B2BBD9E6539F11, self._id_B205D90302DA2F07 );
    _id_1F97A44D1761C919::_id_9793A81BC3BC19E9( "samsite_capture_over", self._id_3A94ED22775A3C94 );

    foreach ( player in _id_E2B2BBD9E6539F11 )
        self enablescriptableplayeruse( player );

    self.icon setscriptablepartstate( "icon", "healthy" );
    self._id_3A94ED22775A3C94 = undefined;
}

_id_ADBD4A9D1BB7572B()
{
    level endon( "game_ended" );
    agents = undefined;

    while ( !isdefined( agents ) )
    {
        agents = _id_48814951E916AF89::_id_77ACC10C4823DD8A( 5, self.origin, "medium", "mission", "samReinforcements", undefined, undefined, 1, self._id_B205D90302DA2F07 );

        if ( !isdefined( agents ) )
            wait 1.0;
    }
}

_id_BEA9C8EDA67E6310( ent, type )
{
    _id_6B9E1657765FCD4E = spawnstruct();
    _id_6B9E1657765FCD4E.ent = ent;
    _id_6B9E1657765FCD4E.type = type;
    return _id_6B9E1657765FCD4E;
}

_id_4210F9B65C3DB5B9( _id_C327ADFAD89EFC23, ent )
{
    foreach ( _id_8912843E32CFD589 in _id_C327ADFAD89EFC23._id_08EA2BEB55597DB7 )
    {
        if ( _id_8912843E32CFD589.ent == ent )
            return 1;
    }

    return 0;
}

_id_2CCF2416263812E2( vehicle, seatid, _id_FC7C7A874B43A31A, player, data )
{
    vehicle thread _id_C0F043E80F479C20();
}

_id_36DC1A84DE5BDB04( chopper )
{
    chopper thread _id_4E1A28CCE5BE373A();
}

_id_C0F043E80F479C20()
{
    level endon( "game_ended" );

    while ( isdefined( self ) && self.occupants.size > 0 )
    {
        foreach ( _id_C327ADFAD89EFC23 in level._id_CF3FEEAA65A4E3F0 )
        {
            if ( isdefined( _id_C327ADFAD89EFC23._id_3A94ED22775A3C94 ) && isdefined( self.occupants["driver"] ) && _id_C327ADFAD89EFC23._id_3A94ED22775A3C94 != self.occupants["driver"].team && distancesquared( _id_C327ADFAD89EFC23.origin, self.origin ) < level._id_D57C61FE001F1707._id_1DECB3B28FA5E1C9 * level._id_D57C61FE001F1707._id_1DECB3B28FA5E1C9 && !_id_4210F9B65C3DB5B9( _id_C327ADFAD89EFC23, self ) )
                _id_C327ADFAD89EFC23._id_08EA2BEB55597DB7[_id_C327ADFAD89EFC23._id_08EA2BEB55597DB7.size] = _id_BEA9C8EDA67E6310( self, 0 );
        }

        wait 5.0;
    }
}

_id_4E1A28CCE5BE373A()
{
    while ( isdefined( self ) )
    {
        foreach ( _id_C327ADFAD89EFC23 in level._id_CF3FEEAA65A4E3F0 )
        {
            if ( isdefined( _id_C327ADFAD89EFC23._id_3A94ED22775A3C94 ) && distancesquared( _id_C327ADFAD89EFC23.origin, self.origin ) < level._id_D57C61FE001F1707._id_1DECB3B28FA5E1C9 * level._id_D57C61FE001F1707._id_1DECB3B28FA5E1C9 && !_id_4210F9B65C3DB5B9( _id_C327ADFAD89EFC23, self ) )
                _id_C327ADFAD89EFC23._id_08EA2BEB55597DB7[_id_C327ADFAD89EFC23._id_08EA2BEB55597DB7.size] = _id_BEA9C8EDA67E6310( self, 2 );
        }

        wait 5.0;
    }
}

_id_91D32D800E116BFA()
{
    level endon( "game_ended" );

    while ( isdefined( self ) )
    {
        foreach ( _id_C327ADFAD89EFC23 in level._id_CF3FEEAA65A4E3F0 )
        {
            dist = distance2d( _id_C327ADFAD89EFC23.origin, self.origin );

            if ( isdefined( _id_C327ADFAD89EFC23._id_3A94ED22775A3C94 ) && dist < level._id_D57C61FE001F1707._id_F4F7F8E7AA14EE19 && !_id_4210F9B65C3DB5B9( _id_C327ADFAD89EFC23, self ) )
                _id_C327ADFAD89EFC23._id_08EA2BEB55597DB7[_id_C327ADFAD89EFC23._id_08EA2BEB55597DB7.size] = _id_BEA9C8EDA67E6310( self, 1 );
        }

        wait 5.0;
    }
}

_id_995605DB75897B06( plane, time )
{
    level endon( "game_ended" );
    level scripts\engine\utility::waittill_notify_or_timeout( "plane_hit", time );

    if ( isdefined( plane ) )
        plane delete();
}

_id_18A561A377CAC8A7()
{
    level endon( "game_ended" );
    scripts\mp\flags::gameflagwait( "prematch_done" );

    if ( !istrue( level._id_D57C61FE001F1707._id_A098A0B9DBCFC30D ) )
        return;

    if ( !isdefined( level.br_level ) || !isdefined( level.br_level.br_mapboundsfull ) )
        return;

    _id_BFAA41854743F890 = undefined;
    spawntime = 0;

    for (;;)
    {
        if ( !isdefined( _id_BFAA41854743F890 ) )
        {
            if ( istrue( level._id_D57C61FE001F1707._id_CF0B6780C2D8A0F8 ) )
            {
                level._id_D57C61FE001F1707._id_CF0B6780C2D8A0F8 = undefined;
                wait( level._id_D57C61FE001F1707._id_5D016CC8C6057E32 );
            }

            wait( randomfloatrange( level._id_D57C61FE001F1707._id_125035462230088F, level._id_D57C61FE001F1707._id_18BE0584E3DC6151 ) );
            _id_6FDED323B6B347C9 = ( randomfloatrange( -30000, 30000 ), randomfloatrange( -30000, 30000 ), 0 );
            pathstruct = _id_7F8E0B88438E1071( _id_6FDED323B6B347C9 );
            dist = distance( pathstruct.startpt, pathstruct.endpt );
            travelspeed = 2000;
            time = dist / travelspeed;
            c130 = _id_046CF752D93DC17B::_id_2496CDD7BABAED39( pathstruct, dist, travelspeed, time, "veh9_mil_air_cargo_plane_wm_dmz" );
            c130 moveto( c130.endpt, c130.lifetime );
            c130.velocity = ( pathstruct.endpt - pathstruct.startpt ) / time;
            c130 thread _id_91D32D800E116BFA();
            _id_BFAA41854743F890 = c130;
            thread _id_995605DB75897B06( c130, time );
        }

        wait 5.0;
    }
}

_id_F3354DDC02E867C9( _id_16EFCF27E6EFCBE8 )
{
    _id_C327ADFAD89EFC23 = scripts\engine\utility::getclosest( self.origin, level._id_CF3FEEAA65A4E3F0, level._id_D57C61FE001F1707._id_36576A67F06F7657 );
    _id_13A5E22C2A2E9FA0 = isdefined( _id_C327ADFAD89EFC23 ) && isdefined( _id_C327ADFAD89EFC23._id_3A94ED22775A3C94 ) && self.team != _id_C327ADFAD89EFC23._id_3A94ED22775A3C94;

    if ( _id_13A5E22C2A2E9FA0 )
        _id_16EFCF27E6EFCBE8._id_67243B08ECF2E214 = &"DMZ/SAMSITE_BLOCK_KILLSTREAK_ERR_MSG";

    return _id_13A5E22C2A2E9FA0;
}

_id_F14F2CD0267B6AB7()
{
    return scripts\engine\utility::ter_op( isdefined( level._id_CF3FEEAA65A4E3F0 ), level._id_CF3FEEAA65A4E3F0, [] );
}
